#\u5fae\u4fe1\u63a5\u53e3 \u83b7\u53d6\u8f66\u578b\u4fe1\u606f
sql.CouponCommon.001 = \
SELECT \
    DISTINCT \
    STANDARD_MODEL_CODE AS standardModelCode, \
    CAR_TYPE_KBN AS carTypeKbn \
FROM \
    BASE_VEHICLE_MODEL \
WHERE \
    TRIM(SFX) = TRIM(?) \
    AND IS_DEL = 0

##IF0038\u9500\u552e\u5e97\u57fa\u7840\u4fe1\u606f
## Modfy by zhanglei 20170307 for \u9500\u552e\u5e97\u8425\u4e1a\u65f6\u95f4\u53ca\u4e8c\u7ef4\u7801\u8ffd\u52a0 start
sql.DealerInfo.001 = \
SELECT \
    A.DEALER_CODE AS dealerCode, \
    A.DEALER_NAME AS dealerName, \
    A.DEALER_SHORTNAME AS dealerShortName, \
    A.REGION_CODE AS regionCode, \
    A.COOP_SALES_CODE AS coopSalesCode, \
    A.COOP_SERVICE_CODE AS coopServiceCode, \
    A.ADDRESS AS address, \
    A.LONGITUDE AS longitude, \
    A.LATITUDE AS latitude, \
    A.EMERGENCY_CALL_NUMBER AS emergencyCallNumber, \
    A.SERVICE_HOTLINE AS serviceHotline, \
    A.SALE_HOTLINE AS salesHotline, \
    A.DEALER_GRADE AS dealerGrade, \
    A.DEALER_PHOTO_URL AS dealerPhotoURL, \
    A.IS_DEL AS isDel, \
    decode(C.SVC_START_TIME\uff0cnull\uff0c'08:30:00'\uff0c case TO_CHAR(C.SVC_START_TIME\uff0c'HH24:MI:SS') when '00:00:00' then '08:30:00' else TO_CHAR(C.SVC_START_TIME,'HH24:MI:SS') end ) as svcStartTime, \
    decode(C.SVC_END_TIME\uff0cnull\uff0c'17:00:00'\uff0c case TO_CHAR(C.SVC_END_TIME\uff0c'HH24:MI:SS') when '00:00:00' then '17:00:00' else TO_CHAR(C.SVC_END_TIME,'HH24:MI:SS') end ) as svcEndTime, \
    A.QRCODE1 AS QRCODE1, \
    A.QRCODE2 AS QRCODE2, \
    A.QRCODE3 AS QRCODE3, \
    A.QRCODE4 AS QRCODE4, \
    A.QRCODE5 AS QRCODE5 \
FROM \
    BASE_DEALER_INFO A \
    LEFT JOIN ICROP_BRANCH_DETAIL C ON C.DLR_CD = A.DEALER_CODE \
    AND C.BRN_CD  = '01' \
WHERE \
    A.UPD_DATETIME <= SYSDATE \
    AND A.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') 
# 20170905 app\u9700\u8981\u83b7\u5f97\u5df2\u5173\u95ed\u7684\u9500\u552e\u5e97\u7684\u4fe1\u606f \uff0c\u83b7\u53d6\u9500\u552e\u5e97\u4fe1\u606f\u65f6\u53bb\u6389\u6761\u4ef6 id_del=0 by shen_kang 
## Modfy by zhanglei 20170307 for \u9500\u552e\u5e97\u8425\u4e1a\u65f6\u95f4\u53ca\u4e8c\u7ef4\u7801\u8ffd\u52a0 end




##IF0056\u5fae\u4fe1\u4f18\u60e0\u5238\u4fe1\u606f
## Add by zhanglei 20170317 for \u5fae\u4fe1\u4f18\u60e0\u5238\u4fe1\u606f start
#modify for \u8fc7\u6ee4\u6389\u8f66\u53cb\u4f1a\u4f18\u60e0\u5238 by shen_kang 20171228 start
sql.WxCouponInfo.001 = \
SELECT DISTINCT \
    A.COUPON_CONTENT_GUID AS COUPON_CONTENT_GUID, \
    A.CARD_ID AS CARD_ID, \
    A.COUPON_ID AS COUPON_ID, \
    A.EVENT_ID AS EVENT_ID, \
    A.OPEN_ID AS OPEN_ID, \
    A.GZH_HASH AS GZH_HASH, \
    A.DEALER_CODE AS DEALER_CODE, \
    A.COUPON_STATUS AS COUPON_STATUS, \
    A.TYPE_ID AS TYPE_ID, \
    A.COUPON_CONTENT AS COUPON_CONTENT, \
    A.COUPON_RULE AS COUPON_RULE, \
    A.COUPON_BEGIN AS COUPON_BEGIN, \
    A.COUPON_END AS COUPON_END, \
    A.SRV_ORDER_NO AS SRV_ORDER_NO, \
    A.VIN_NO AS VIN_NO, \
    A.SFX_CODE AS SFX_CODE, \
    A.CHECK_MODEL AS CHECK_MODEL, \
    A.USE_STATUS AS USE_STATUS, \
    A.UPDATE_COUNT AS UPDATE_COUNT, \
    A.DEL_FLAG AS DEL_FLAG, \
    A.USER_NAME AS USER_NAME, \
    A.USER_NUMBER AS USER_NUMBER, \
    TO_CHAR(A.UPDATE_ON, 'YYYY-MM-DD HH24:MI:SS') AS UPDATE_ON, \
    A.COUPON_KBN AS COUPON_KBN, \
    A.COUPON_GROUP_ID AS COUPON_GROUP_ID, \
    A.THIRDPARTY_NAME AS THIRDPARTY_NAME, \
    TO_CHAR(A.PUBLISH_DATE, 'YYYY-MM-DD HH24:MI:SS') AS PUBLISH_DATE, \
    A.COUPON_URL AS COUPON_URL, \
    TO_CHAR(A.GET_DATE, 'YYYY-MM-DD HH24:MI:SS') AS GET_DATE, \
    TO_CHAR(A.BIND_DATE, 'YYYY-MM-DD HH24:MI:SS') AS BIND_DATE, \
    TO_CHAR(A.WRITEOFFS_DATE, 'YYYY-MM-DD HH24:MI:SS') AS WRITEOFFS_DATE, \
    A.COUPON_DETAIL AS COUPON_DETAIL, \
    A.DEALER_NAME AS DEALER_NAME, \
    A.COUPON_PWD AS COUPON_PWD, \
    A.COUPON_PHONE AS COUPON_PHONE, \
    A.COUPON_INTRODUCTION AS COUPON_INTRODUCTION, \
    A.COUPON_GRANT_TYPE AS COUPON_GRANT_TYPE, \
    A.FROM_APPLICATION AS FROM_APPLICATION \
FROM \
    WX_COUPON_CONTENT A, \
    USER_LOGIN B \
WHERE \
    A.OPEN_ID = TO_CHAR(B.UID_GTMC) \
    AND B.TEL_NO = ? \
    AND A.DEL_FLAG <> '1' \
    AND (? IS NULL OR ? = A.COUPON_ID) \
    AND (? IS NULL OR ? = A.EVENT_ID) \
    AND EVENT_ID<>'88888'
#modify for \u8fc7\u6ee4\u6389\u8f66\u53cb\u4f1a\u4f18\u60e0\u5238 by shen_kang 20171228 end
## Add by zhanglei 20170317 for \u5fae\u4fe1\u4f18\u60e0\u5238\u4fe1\u606f end

## Add by zhanglei 20170317 for \u9500\u552e\u4f18\u60e0\u5238\u4fe1\u606f start
sql.TactCouponInfo.001 = \
SELECT DISTINCT \
    A.COUPON_ID    AS    COUPON_ID, \
    A.DEALER_CODE    AS    DEALER_CODE, \
    A.COUPON_STATUS    AS    COUPON_STATUS, \
    A.COUPON_KBN    AS    COUPON_KBN, \
    A.COUPON_CONTENT    AS    COUPON_CONTENT, \
    A.COUPON_SUM    AS    COUPON_SUM, \
    A.COUPON_ENTITY_CONTENT    AS    COUPON_ENTITY_CONTENT, \
    TO_CHAR(A.COUPON_BEGIN, 'YYYY-MM-DD HH24:MI:SS')    AS    COUPON_BEGIN, \
    TO_CHAR(A.COUPON_END, 'YYYY-MM-DD HH24:MI:SS')    AS    COUPON_END, \
    A.CONTRACT_NO    AS    CONTRACT_NO, \
    A.VIN_NO    AS    VIN_NO, \
    A.SFX_CODE    AS    SFX_CODE, \
    A.CHECK_MODEL    AS    CHECK_MODEL, \
    A.USE_STATUS    AS    USE_STATUS, \
    A.SMS_VERIFICATION_CODE    AS    SMS_VERIFICATION_CODE, \
    A.UPDATE_COUNT    AS    UPDATE_COUNT, \
    A.DEL_FLAG    AS    DEL_FLAG, \
    A.USER_NAME    AS    USER_NAME, \
    A.USER_PHONE    AS    USER_PHONE, \
    A.EVENT_ID    AS    EVENT_ID, \
    A.OPEN_ID    AS    OPEN_ID, \
    A.CARD_NAME     AS    CARD_NAME , \
    A.COUPON_RULE     AS    COUPON_RULE \
FROM \
    TACT_SALES_COUPON_CONTENT A, \
    USER_LOGIN B \
WHERE \
    A.OPEN_ID = TO_CHAR(B.UID_GTMC) \
    AND B.TEL_NO = ? \
    AND (? IS NULL OR ? = A.COUPON_ID) \
    AND (? IS NULL OR ? = A.EVENT_ID)
## Add by zhanglei 20170317 for \u9500\u552e\u4f18\u60e0\u5238\u4fe1\u606f end

## Add by leikaiwei 20170829 for \u5fae\u4fe1\u4f18\u60e0\u5238\u6279\u91cf\u4fe1\u606f start
#modify for \u8fc7\u6ee4\u6389\u8f66\u53cb\u4f1a\u4f18\u60e0\u5238 by shen_kang 20171221 start
sql.WxCouponInfo.002 = \
SELECT DISTINCT \
    A.COUPON_CONTENT_GUID AS COUPON_CONTENT_GUID, \
    A.CARD_ID AS CARD_ID, \
    A.COUPON_ID AS COUPON_ID, \
    A.EVENT_ID AS EVENT_ID, \
    A.OPEN_ID AS OPEN_ID, \
    A.GZH_HASH AS GZH_HASH, \
    A.DEALER_CODE AS DEALER_CODE, \
    A.COUPON_STATUS AS COUPON_STATUS, \
    A.TYPE_ID AS TYPE_ID, \
    A.COUPON_CONTENT AS COUPON_CONTENT, \
    A.COUPON_RULE AS COUPON_RULE, \
    A.COUPON_BEGIN AS COUPON_BEGIN, \
    A.COUPON_END AS COUPON_END, \
    A.SRV_ORDER_NO AS SRV_ORDER_NO, \
    A.VIN_NO AS VIN_NO, \
    A.SFX_CODE AS SFX_CODE, \
    A.CHECK_MODEL AS CHECK_MODEL, \
    A.USE_STATUS AS USE_STATUS, \
    A.UPDATE_COUNT AS UPDATE_COUNT, \
    A.DEL_FLAG AS DEL_FLAG, \
    A.USER_NAME AS USER_NAME, \
    A.USER_NUMBER AS USER_NUMBER, \
    TO_CHAR(A.UPDATE_ON, 'YYYY-MM-DD HH24:MI:SS') AS UPDATE_ON, \
    A.COUPON_KBN AS COUPON_KBN, \
    A.COUPON_GROUP_ID AS COUPON_GROUP_ID, \
    A.THIRDPARTY_NAME AS THIRDPARTY_NAME, \
    TO_CHAR(A.PUBLISH_DATE, 'YYYY-MM-DD HH24:MI:SS') AS PUBLISH_DATE, \
    A.COUPON_URL AS COUPON_URL, \
    TO_CHAR(A.GET_DATE, 'YYYY-MM-DD HH24:MI:SS') AS GET_DATE, \
    TO_CHAR(A.BIND_DATE, 'YYYY-MM-DD HH24:MI:SS') AS BIND_DATE, \
    TO_CHAR(A.WRITEOFFS_DATE, 'YYYY-MM-DD HH24:MI:SS') AS WRITEOFFS_DATE, \
    A.COUPON_DETAIL AS COUPON_DETAIL, \
    A.DEALER_NAME AS DEALER_NAME, \
    A.COUPON_PWD AS COUPON_PWD, \
    A.COUPON_PHONE AS COUPON_PHONE, \
    A.COUPON_INTRODUCTION AS COUPON_INTRODUCTION, \
    A.COUPON_GRANT_TYPE AS COUPON_GRANT_TYPE, \
    A.FROM_APPLICATION AS FROM_APPLICATION, \
    isdate(nvl(A.CREATED_ON,to_char(A.GET_DATE,'YYYY-MM-DD HH24:MI:SS'))) AS CREATED_ON,  \
    isdate(A.MODIFY_ON) AS MODIFY_ON  \
FROM \
    WX_COUPON_CONTENT A \
INNER JOIN \
    USER_LOGIN B \
ON  A.OPEN_ID = TO_CHAR(B.UID_GTMC) \
WHERE \
      isdate(nvl(A.CREATED_ON,to_char(A.GET_DATE,'YYYY-MM-DD HH24:MI:SS'))) >= ? \
      AND EVENT_ID<>'88888' \
ORDER BY isdate(nvl(A.CREATED_ON,to_char(A.GET_DATE,'YYYY-MM-DD HH24:MI:SS')))
## Add by leikaiwei 20170829 for \u5fae\u4fe1\u4f18\u60e0\u5238\u6279\u91cf\u4fe1\u606f end

## Add by leikaiwei 20170829 for \u5fae\u4fe1\u4f18\u60e0\u5238\u6279\u91cf\u4fe1\u606f start
sql.WxCouponInfo.003 = \
SELECT DISTINCT \
    A.COUPON_CONTENT_GUID AS COUPON_CONTENT_GUID, \
    A.CARD_ID AS CARD_ID, \
    A.COUPON_ID AS COUPON_ID, \
    A.EVENT_ID AS EVENT_ID, \
    A.OPEN_ID AS OPEN_ID, \
    A.GZH_HASH AS GZH_HASH, \
    A.DEALER_CODE AS DEALER_CODE, \
    A.COUPON_STATUS AS COUPON_STATUS, \
    A.TYPE_ID AS TYPE_ID, \
    A.COUPON_CONTENT AS COUPON_CONTENT, \
    A.COUPON_RULE AS COUPON_RULE, \
    A.COUPON_BEGIN AS COUPON_BEGIN, \
    A.COUPON_END AS COUPON_END, \
    A.SRV_ORDER_NO AS SRV_ORDER_NO, \
    A.VIN_NO AS VIN_NO, \
    A.SFX_CODE AS SFX_CODE, \
    A.CHECK_MODEL AS CHECK_MODEL, \
    A.USE_STATUS AS USE_STATUS, \
    A.UPDATE_COUNT AS UPDATE_COUNT, \
    A.DEL_FLAG AS DEL_FLAG, \
    A.USER_NAME AS USER_NAME, \
    A.USER_NUMBER AS USER_NUMBER, \
    TO_CHAR(A.UPDATE_ON, 'YYYY-MM-DD HH24:MI:SS') AS UPDATE_ON, \
    A.COUPON_KBN AS COUPON_KBN, \
    A.COUPON_GROUP_ID AS COUPON_GROUP_ID, \
    A.THIRDPARTY_NAME AS THIRDPARTY_NAME, \
    TO_CHAR(A.PUBLISH_DATE, 'YYYY-MM-DD HH24:MI:SS') AS PUBLISH_DATE, \
    A.COUPON_URL AS COUPON_URL, \
    TO_CHAR(A.GET_DATE, 'YYYY-MM-DD HH24:MI:SS') AS GET_DATE, \
    TO_CHAR(A.BIND_DATE, 'YYYY-MM-DD HH24:MI:SS') AS BIND_DATE, \
    TO_CHAR(A.WRITEOFFS_DATE, 'YYYY-MM-DD HH24:MI:SS') AS WRITEOFFS_DATE, \
    A.COUPON_DETAIL AS COUPON_DETAIL, \
    A.DEALER_NAME AS DEALER_NAME, \
    A.COUPON_PWD AS COUPON_PWD, \
    A.COUPON_PHONE AS COUPON_PHONE, \
    A.COUPON_INTRODUCTION AS COUPON_INTRODUCTION, \
    A.COUPON_GRANT_TYPE AS COUPON_GRANT_TYPE, \
    A.FROM_APPLICATION AS FROM_APPLICATION, \
    isdate(nvl(A.CREATED_ON,A.GET_DATE)) AS CREATED_ON,  \
    isdate(A.MODIFY_ON) AS MODIFY_ON  \
FROM \
    WX_COUPON_CONTENT A \
INNER JOIN \
    USER_LOGIN B \
ON  A.OPEN_ID = TO_CHAR(B.UID_GTMC) \
WHERE \
    isdate(A.MODIFY_ON) >= ? \
    AND EVENT_ID<>'88888' \
ORDER BY isdate(A.MODIFY_ON)
#modify for \u8fc7\u6ee4\u6389\u8f66\u53cb\u4f1a\u4f18\u60e0\u5238 by shen_kang 20171221 end
## Add by leikaiwei 20170829 for \u5fae\u4fe1\u4f18\u60e0\u5238\u6279\u91cf\u4fe1\u606f end

##IF0039\u533a\u57df\u7701\u5e02\u4fe1\u606f 
sql.RegionInfo.001 = \
SELECT \
    REGIONCODE AS regionCode, \
    REGIONNAME AS regionName, \
    PROVINCE AS province, \
    CITY AS city, \
    IS_DEL AS isDel \
FROM \
    BASE_REGION_INFO \
WHERE \
    UPD_DATETIME <= SYSDATE AND \
    UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND IS_DEL = 0
 
##IF0040\u534f\u529b\u4f1a\u4fe1\u606f  
sql.CooperationInfo.001 = \
SELECT \
    COOP_CODE AS coopCode, \
    COOP_NAME AS coopName, \
    COOP_TYPE AS coopType, \
    IS_DEL AS isDel \
FROM \
    BASE_COOP_INFO \
WHERE \
    UPD_DATETIME <= SYSDATE AND \
    UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND IS_DEL = 0
 
##IF0041\u8f66\u578b\u4e3b\u6570\u636e  
sql.ModelInfo.001 = \
SELECT \
    IS_DEL AS isDel, \
    MODEL AS model, \
    SFX AS sfx, \
    COLOR AS color, \
    COLORNAME AS colorName, \
    STANDARD_MODEL_CODE AS standardModelCode, \
    STANDARD_MODEL_NAME AS standardModelName, \
    VHCNAMECODE AS vhcNameCode, \
    VHCNAME AS vhcName, \
    GRADE AS grade, \
    GRADECODE AS gradeCode, \
    EXHAUST AS exhaust, \
    PHOTO_URL AS photoURL, \
    WARRANTY_TIME_YEAR_NUM AS warrantyTimeYearNum, \
    WARRANTY_TIME_MILE_NUM AS warrantyTimeMileNum, \
    CAR_TYPE_KBN AS carTypeKbn, \
    GRADECODE AS gradecode \
FROM \
    BASE_VEHICLE_MODEL \
WHERE \
    UPD_DATETIME <= SYSDATE AND \
    UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND IS_DEL = 0
 
# IF0008 \u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6 (\u83b7\u53d6\u6807\u51c6\u552e\u540e\u5de5\u4f5c\u65f6\u95f4\u6bb5)
sql.StationFreetime.001 = \
SELECT \
    DISTINCT \
    TO_CHAR(SVC_START_TIME, 'HH24:MI:SS') AS svc_job_start_time, \
    TO_CHAR(SVC_END_TIME, 'HH24:MI:SS') AS svc_job_end_time \
FROM \
    ICROP_BRANCH_DETAIL \
WHERE \
    IS_DEL = ? \
    AND DLR_CD = ? \
    AND BRN_CD = '01'

# IF0008 \u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6 (\u83b7\u53d6\u6709\u6548\u5de5\u4f4d\u7684\u5df2\u9884\u7ea6\u65f6\u95f4\u6bb5)
sql.StationFreetime.002 = \
SELECT \
    A.STALL_ID  AS stall_id, \
    A.SCHE_START_DATETIME  AS sche_start_datetime, \
    A.SCHE_END_DATETIME  AS sche_end_datetime \
FROM \
    ICROP_STALL_USE A \
    INNER JOIN ICROP_STALL B ON A.STALL_ID = B.STALL_ID \
WHERE \
    A.IS_DEL = ? \
    AND B.IS_DEL = ? \
    AND B.INUSE_FLG = ? \
    AND B.DLR_CD = ? \
    AND B.BRN_CD = '01' \
    AND A.sche_start_date = REPLACE (?,'-','') \
ORDER BY \
    A.STALL_ID, \
    A.SCHE_START_DATETIME ASC

# IF0008 \u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6 (\u83b7\u53d6\u6709\u6548\u5de5\u4f4d\u7684\u4e0d\u53ef\u7528\u65f6\u95f4\u6bb5) 
sql.StationFreetime.003 = \
SELECT \
    SI.* \
FROM \
    ICROP_STALL_IDLE SI, \
    ICROP_STALL S \
WHERE \
    S.STALL_ID = SI.STALL_ID \
    AND S.IS_DEL = ? \
    AND SI.IS_DEL = ? \
    AND S.INUSE_FLG = ? \
    AND SI.CANCEL_FLG = ? \
    AND S.DLR_CD = ? \
    AND S.BRN_CD = '01' \
    AND ( \
        (SI.IDLE_TYPE = '0' AND SI.IDLE_DATE = TO_DATE(?, 'YYYY-MM-DD')) \
        OR(SI.IDLE_TYPE='1') \
        OR (SI.IDLE_TYPE='2' AND SI.IDLE_START_DATETIME <= TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') AND SI.IDLE_END_DATETIME >= TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS')) \
        ) \
ORDER BY \
    SI.STALL_ID, \
    IDLE_TYPE, \
    SI.IDLE_START_TIME, \
    SI.IDLE_START_DATETIME
 
# IF0008 \u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6 (\u83b7\u53d6\u6709\u6548\u5de5\u4f4d\u7684ID) 
sql.StationFreetime.004 = \
SELECT \
    S.stall_id AS stall_id \
FROM \
    ICROP_STALL S \
WHERE \
    S.DLR_CD = ? \
    AND S.BRN_CD = '01' \
    AND S.INUSE_FLG = ? \
    AND S.IS_DEL = ? \
ORDER BY \
    S.STALL_ID

##Modify for:\u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6(\u65b0\u589e\u9884\u7ea6\u7c7b\u578b\u53c2\u6570) xing_lili 20160119 start
# IF0008 \u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6 (\u83b7\u53d6\u4fdd\u517b\u6709\u6548\u5de5\u4f4d\u7684ID) 
sql.StationFreetime.005 = \
SELECT \
    S.stall_id AS stall_id \
FROM \
    ICROP_STALL S \
    INNER JOIN ICROP_SERVICE_CLASS C ON S.SVC_CLASS_ID=C.SVC_CLASS_ID \
WHERE \
    S.DLR_CD = ? \
    AND S.BRN_CD = '01' \
    AND S.INUSE_FLG = ? \
    AND S.IS_DEL = ? \
    AND C.SVC_CLASS_CD IN ('10','20') \
ORDER BY \
    S.STALL_ID

# IF0008 \u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6 (\u83b7\u53d6\u4e00\u822c\u7ef4\u4fee\u6709\u6548\u5de5\u4f4d\u7684ID) 
sql.StationFreetime.006 = \
SELECT \
    S.stall_id AS stall_id \
FROM \
    ICROP_STALL S \
    INNER JOIN ICROP_SERVICE_CLASS C ON S.SVC_CLASS_ID=C.SVC_CLASS_ID \
WHERE \
    S.DLR_CD = ? \
    AND S.BRN_CD = '01' \
    AND S.INUSE_FLG = ? \
    AND S.IS_DEL = ? \
    AND C.SVC_CLASS_CD IN ('30') \
ORDER BY \
    S.STALL_ID

# IF0008 \u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6 (\u83b7\u53d6\u677f\u55b7\u6709\u6548\u5de5\u4f4d\u7684ID) 
sql.StationFreetime.007 = \
SELECT \
    S.stall_id AS stall_id \
FROM \
    ICROP_STALL S \
    INNER JOIN ICROP_SERVICE_CLASS C ON S.SVC_CLASS_ID=C.SVC_CLASS_ID \
WHERE \
    S.DLR_CD = ? \
    AND S.BRN_CD = '01' \
    AND S.INUSE_FLG = ? \
    AND S.IS_DEL = ? \
    AND C.SVC_CLASS_ID IN ('34') \
ORDER BY \
    S.STALL_ID
##Modify for:\u9500\u552e\u5e97\u5de5\u4f4d\u7a7a\u95f2\u65f6\u95f4\u6bb5\u83b7\u53d6(\u65b0\u589e\u9884\u7ea6\u7c7b\u578b\u53c2\u6570) xing_lili 20160119 end
 
# IF0009 \u4ed6\u6e20\u9053\u9884\u7ea6\u67e5\u8be2
sql.OthChanReseInfo.001 = \
SELECT \
    count(1) AS count \
FROM \
    ICROP_SERVICEIN A \
    INNER JOIN ICROP_VEHICLE B ON A.VCL_ID = B.VCL_ID \
    INNER JOIN ICROP_JOB_DETAIL C ON C.SVCIN_ID = A.SVCIN_ID \
    INNER JOIN ICROP_SERVICE_CLASS D ON C.SVC_CLASS_ID = D.SVC_CLASS_ID AND D.INUSE_FLG = '1' \
WHERE \
    ( \
        (D.SVC_CLASS_ID = 15 AND D.SVC_CLASS_CD = 20 ) \
        OR \
        (D.SVC_CLASS_ID = 4 AND D.SVC_CLASS_CD = 10 ) \
    ) \
    AND B.VCL_VIN = TRIM(?) \
    AND C.CANCEL_FLG ='0'
 
# IF0011 \u9884\u7ea6\u7533\u8bf7\u72b6\u6001\u53d8\u66f4\u83b7\u53d6
sql.ApplyStatus.001 = \
SELECT \
    apmReqId, \
    apmReqStatus, \
    reqResult, \
    reservationStartTime, \
    reservationEndTime, \
    updDatetime \
FROM \
( \
SELECT \
    O.APM_REQ_ID_APP AS apmReqId, \
    O.APM_REQ_STATUS AS apmReqStatus, \
    '2' AS reqResult, \
    null AS reservationStartTime, \
    null AS reservationEndTime, \
    TO_CHAR(O.UPD_DATETIME, 'YYYY-MM-DD HH24:MI:SS') AS updDatetime \
FROM \
    ICROP_APM_REQ_APP O \
WHERE \
    O.APM_REQ_STATUS = '3' \
    AND O.SVCIN_ID = 0 \
    AND O.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND O.IS_DEL = 0 \
    AND O.INUSE_FLG = '1' \
UNION \
SELECT \
    M.APM_REQ_ID_APP AS apmReqId, \
    M.APM_REQ_STATUS AS apmReqStatus, \
    '2' AS reqResult, \
    null AS reservationStartTime, \
    null AS reservationEndTime, \
    TO_CHAR(GREATEST ( M.UPD_DATETIME, N.UPD_DATETIME ), 'YYYY-MM-DD HH24:MI:SS') AS updDatetime \
FROM \
    ICROP_APM_REQ_APP M \
    INNER JOIN ICROP_SERVICEIN N ON M.SVCIN_ID = N.SVCIN_ID \
WHERE \
    M.APM_REQ_STATUS <> '0' \
    AND M.INUSE_FLG = '1' \
    AND N.SVC_STATUS = '02' \
    AND (N.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') OR M.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')) \
    AND M.IS_DEL = 0 \
    AND N.IS_DEL = 0 \
UNION \
SELECT \
    A.APM_REQ_ID_APP AS apmReqId, \
    A.APM_REQ_STATUS AS apmReqStatus, \
    '1' AS reqResult, \
    TO_CHAR(D.SCHE_START_DATETIME, 'YYYY-MM-DD HH24:MI:SS') AS reservationStartTime, \
    TO_CHAR(D.SCHE_END_DATETIME, 'YYYY-MM-DD HH24:MI:SS') AS reservationEndTime, \
    TO_CHAR(GREATEST ( A.UPD_DATETIME, B.UPD_DATETIME, C.UPD_DATETIME, D.UPD_DATETIME ), 'YYYY-MM-DD HH24:MI:SS') AS updDatetime \
FROM \
    ICROP_APM_REQ_APP A \
    INNER JOIN ICROP_SERVICEIN B ON A.SVCIN_ID = B.SVCIN_ID \
    INNER JOIN ICROP_JOB_DETAIL C ON A.SVCIN_ID = C.SVCIN_ID AND C.CANCEL_FLG = '0' AND C.IS_DEL = 0 \
    INNER JOIN ICROP_STALL_USE D ON C.JOB_DTL_ID = D.JOB_DTL_ID AND D.IS_DEL = 0 \
WHERE \
    A.APM_REQ_STATUS IN ('1', '3') \
    AND A.INUSE_FLG = '1' \
    AND B.SVC_STATUS <> '02' \
    AND (A.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') OR B.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') OR C.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') OR D.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')) \
    AND A.IS_DEL = 0 \
    AND B.IS_DEL = 0 \
) \
ORDER BY \
    updDatetime
# Modify for:\u7ef4\u4fee\u8ba2\u5355\u5c65\u5386\u4fe1\u606f\u8fd4\u56de\u503c\u76f8\u5173\u4fee\u6539  xing_lili 20151214 start
# IF0014 \u7ef4\u4fee\u8ba2\u5355\u5c65\u5386\u4fe1\u606f (VIN\u548c\u65f6\u95f4\u6233\u90fd\u6709\u503c)
sql.MaintenanceOrderInfo.001 = \
SELECT \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    B.SRVTYPENAME AS maintenanceWorkOrderType, \
    A.SRVMEMO AS maintenanceContentSummary, \
    A.DEALERCODE AS dealerCode, \
    A.VINNO AS vin, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD HH24:MI:SS') AS completionDate, \
    A.SACODE AS saCode, \
    C.USERNAME AS saName, \
    C.MOBILE AS saMobile, \
    A.SALESTOTAL AS cost, \
    A.CUSTCHARGEAMOUNT AS disCount, \
    A.ORDERDATE AS entryTime, \
    A.MILEAGE AS mileage, \
    A.TWCRESULT AS twcresult, \
    A.DELETEFLAG AS deleteflag, \
    A.TWCUSER AS twcUserName, \
    A.TWCTEL1 AS twcTel1, \
    A.TWCTEL2 AS twcTel2 \
FROM \
    KPI_SRV_ORDER_HISTORY A \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE \
    LEFT JOIN IDM_EMPLOYEE_USERS C ON TRIM(A.SACODE) = C."ACCOUNT" AND A.DEALERCODE = TRIM(C.DLRCODE) AND C.ACCOUNTTYPE='tact' \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON A.VINNO= D.FRAMENO AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.VINNO = TRIM(?) \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN ('D','7') OR A.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')
     
# IF0014 \u7ef4\u4fee\u8ba2\u5355\u5c65\u5386\u4fe1\u606f (VIN\u6709\u503c)
sql.MaintenanceOrderInfo.002 = \
SELECT \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    B.SRVTYPENAME AS maintenanceWorkOrderType, \
    A.SRVMEMO AS maintenanceContentSummary, \
    A.DEALERCODE AS dealerCode, \
    A.VINNO AS vin, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD HH24:MI:SS') AS completionDate, \
    A.SACODE AS saCode, \
    C.USERNAME AS saName, \
    C.MOBILE AS saMobile, \
    A.SALESTOTAL AS cost, \
    A.CUSTCHARGEAMOUNT AS disCount, \
    A.ORDERDATE AS entryTime, \
    A.MILEAGE AS mileage, \
    A.TWCRESULT AS twcresult, \
    A.DELETEFLAG AS deleteflag, \
    A.TWCUSER AS twcUserName, \
    A.TWCTEL1 AS twcTel1, \
    A.TWCTEL2 AS twcTel2 \
FROM \
    KPI_SRV_ORDER_HISTORY A \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE \
    LEFT JOIN IDM_EMPLOYEE_USERS C ON TRIM(A.SACODE) = C."ACCOUNT" AND A.DEALERCODE = TRIM(C.DLRCODE) AND C.ACCOUNTTYPE='tact' \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON A.VINNO= D.FRAMENO AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.VINNO = TRIM(?) \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN ('D','7') OR A.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE

# IF0014 \u7ef4\u4fee\u8ba2\u5355\u5c65\u5386\u4fe1\u606f (\u65f6\u95f4\u6233\u6709\u503c)
sql.MaintenanceOrderInfo.003 = \
SELECT \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    B.SRVTYPENAME AS maintenanceWorkOrderType, \
    A.SRVMEMO AS maintenanceContentSummary, \
    A.DEALERCODE AS dealerCode, \
    A.VINNO AS vin, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD HH24:MI:SS') AS completionDate, \
    A.SACODE AS saCode, \
    C.USERNAME AS saName, \
    C.MOBILE AS saMobile, \
    A.SALESTOTAL AS cost, \
    A.CUSTCHARGEAMOUNT AS disCount, \
    A.ORDERDATE AS entryTime, \
    A.MILEAGE AS mileage, \
    A.TWCRESULT AS twcresult, \
    A.DELETEFLAG AS deleteflag, \
    A.TWCUSER AS twcUserName, \
    A.TWCTEL1 AS twcTel1, \
    A.TWCTEL2 AS twcTel2 \
FROM \
    KPI_SRV_ORDER_HISTORY A \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE \
    LEFT JOIN IDM_EMPLOYEE_USERS C ON TRIM(A.SACODE) = C."ACCOUNT" AND A.DEALERCODE = TRIM(C.DLRCODE) AND C.ACCOUNTTYPE='tact' \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON A.VINNO= D.FRAMENO AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.UPDATETIME <= SYSDATE \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN ('D','7')  OR A.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')

# Modify for:\u7ef4\u4fee\u8ba2\u5355\u5c65\u5386\u4fe1\u606f\u8fd4\u56de\u503c\u76f8\u5173\u4fee\u6539  xing_lili 20151214 end

# IF0044 \u7ef4\u4fee\u9879\u76ee\u5c65\u5386\u4fe1\u606f (VIN\u548c\u65f6\u95f4\u6233\u90fd\u6709\u503c)
sql.MaintenanceProjectInfo.001 = \
SELECT \
    A.SRVCODE AS mainMaintenanceProjectCode, \
    A.SRVNAME AS mainMaintenanceProjectName, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.SRVTYPE AS mainMaintenanceProjectType, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_DETAIL_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7')  OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')
    
# IF0044 \u7ef4\u4fee\u9879\u76ee\u5c65\u5386\u4fe1\u606f (VIN\u6709\u503c)
sql.MaintenanceProjectInfo.002 = \
SELECT \
    A.SRVCODE AS mainMaintenanceProjectCode, \
    A.SRVNAME AS mainMaintenanceProjectName, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.SRVTYPE AS mainMaintenanceProjectType, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_DETAIL_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7')  OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE
    
# IF0044 \u7ef4\u4fee\u9879\u76ee\u5c65\u5386\u4fe1\u606f (\u65f6\u95f4\u6233\u6709\u503c)
sql.MaintenanceProjectInfo.003 = \
SELECT \
    A.SRVCODE AS mainMaintenanceProjectCode, \
    A.SRVNAME AS mainMaintenanceProjectName, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.SRVTYPE AS mainMaintenanceProjectType, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_DETAIL_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.UPDATETIME <= SYSDATE \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')
    
# IF0046 \u7ef4\u4fee\u96f6\u4ef6\u5c65\u5386\u4fe1\u606f (VIN\u548c\u65f6\u95f4\u6233\u90fd\u6709\u503c)
sql.MaintenancePartsInfo.001 = \
SELECT \
    A.PARTSITEMSEQ AS partsCode, \
    A.PARTSNAME AS partsName, \
    A.QUANTITY AS partsQuantity, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_PARTS_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')
    
# IF0046 \u7ef4\u4fee\u96f6\u4ef6\u5c65\u5386\u4fe1\u606f (VIN\u6709\u503c)
sql.MaintenancePartsInfo.002 = \
SELECT \
    A.PARTSITEMSEQ AS partsCode, \
    A.PARTSNAME AS partsName, \
    A.QUANTITY AS partsQuantity, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_PARTS_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE
    
# IF0046 \u7ef4\u4fee\u96f6\u4ef6\u5c65\u5386\u4fe1\u606f (\u65f6\u95f4\u6233\u6709\u503c)
sql.MaintenancePartsInfo.003 = \
SELECT \
    A.PARTSITEMSEQ AS partsCode, \
    A.PARTSNAME AS partsName, \
    A.QUANTITY AS partsQuantity, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_PARTS_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.UPDATETIME <= SYSDATE \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')

##Modify for:\u4fee\u6539\u53d1\u52a8\u673a\u53f7\u7684\u53d6\u5f97   xing_lili 20151229 start
## IF0024 \u83b7\u53d6\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f,\u6839\u636eVIN\u53f7\u540e6\u4f4d\u548c\u53d1\u52a8\u673a\u540e4\u4f4d\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f
sql.VhcInfo.001 = \
SELECT \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS salesDealerCode, \
    A.MODEL AS model, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCode, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD') AS vhcSalesDate, \
    TO_CHAR(MAX(B.USEDCARDELIVERENDDATE), 'YYYY-MM-DD') AS nextSrvDate, \
    C.ENGINENO AS engine, \
    MAX(B.REGISTERNO) AS registerNo, \
    A.BRANCHINSURECOM AS insurecomCode, \
    TO_CHAR(A.EFFECTIVEDATESTART, 'YYYY-MM-DD') AS effectiveDateStart, \
    TO_CHAR(A.EFFECTIVEDATEEND, 'YYYY-MM-DD') AS effectiveDateEnd, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2 \
FROM \
    TACT_ORDER_VEHICLE_BK A \
    LEFT JOIN TACT_CUSTOMER_VEHICLE B ON A.FRAMENO = B.VINNO AND B.DELETEFLAG = '0' \
    LEFT JOIN LCMS_VOITUREINFO C ON A.FRAMENO = C.VIN \
WHERE \
    A.FRAMENOD6 = TRIM(?) \
    AND A.DELETEFLAG = '0' \
    AND A.DELIVERYENDDATE IS NOT NULL \
GROUP BY \
    A.FRAMENO, \
    A.DEALERCODE, \
    A.MODEL, \
    A.SFX, \
    A.COLORCD, \
    A.SALESDATE, \
    C.ENGINENO, \
    A.REGISTNO, \
    A.BRANCHINSURECOM, \
    A.EFFECTIVEDATESTART, \
    A.EFFECTIVEDATEEND, \
    A.BUYERTEL1, \
    A.BUYERTEL2, \
    A.BUYERMOBIL1, \
    A.BUYERMOBIL2, \
    A.NOMINEETEL1, \
    A.NOMINEETEL2, \
    A.NOMINEEMOBIL1, \
    A.NOMINEEMOBIL2
 
## IF0024 \u83b7\u53d6\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f \u6839\u636e\u8d2d\u8f66\u624b\u673a\u53f7\uff0cVIN\u53f7\u540e6\u4f4d\u548c\u53d1\u52a8\u673a\u540e4\u4f4d\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f 
sql.VhcInfo.002 = \
SELECT \
    A.FRAMENO  AS vinNo, \
    A.DEALERCODE AS salesDealerCode, \
    A.MODEL AS model, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCode, \
    TO_CHAR(A.SALESDATE,'YYYY-MM-DD') AS vhcSalesDate, \
    TO_CHAR(MAX(B.USEDCARDELIVERENDDATE),'YYYY-MM-DD') AS nextSrvDate, \
    C.ENGINENO AS engine, \
    MAX(B.REGISTERNO) AS registerNo, \
    A.BRANCHINSURECOM AS insurecomCode, \
    TO_CHAR(A.EFFECTIVEDATESTART,'YYYY-MM-DD') AS effectiveDateStart, \
    TO_CHAR(A.EFFECTIVEDATEEND,'YYYY-MM-DD') AS effectiveDateEnd, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2 \
FROM \
    TACT_ORDER_VEHICLE_BK A \
    LEFT JOIN  TACT_CUSTOMER_VEHICLE B ON A.FRAMENO = B.VINNO AND B.DELETEFLAG = '0' \
    LEFT JOIN LCMS_VOITUREINFO C ON A.FRAMENO = C.VIN \
WHERE \
    A.FRAMENOD6 = TRIM(?) \
    AND A.DELETEFLAG = '0' \
    AND A.DELIVERYENDDATE IS NOT NULL \
    AND TRIM(?) IN ( \
                        A.BUYERTEL1, \
                        A.BUYERTEL2, \
                        A.BUYERMOBIL1, \
                        A.BUYERMOBIL2, \
                        A.NOMINEETEL1, \
                        A.NOMINEETEL2, \
                        A.NOMINEEMOBIL1, \
                        A.NOMINEEMOBIL2, \
                        B.BUYERMOBIL1, \
                        B.BUYERMOBIL2, \
                        B.FBUYERTEL1, \
                        B.FBUYERTEL2, \
                        B.BUYERTEL1, \
                        B.BUYERTEL2, \
                        B.NOMINEEMOBIL1, \
                        B.NOMINEEMOBIL2 \
                    ) \
GROUP BY \
    A.FRAMENO, \
    A.DEALERCODE, \
    A.MODEL, \
    A.SFX, \
    A.COLORCD, \
    A.SALESDATE, \
    C.ENGINENO, \
    A.REGISTNO, \
    A.BRANCHINSURECOM, \
    A.EFFECTIVEDATESTART, \
    A.EFFECTIVEDATEEND, \
    A.BUYERTEL1, \
    A.BUYERTEL2, \
    A.BUYERMOBIL1, \
    A.BUYERMOBIL2, \
    A.NOMINEETEL1, \
    A.NOMINEETEL2, \
    A.NOMINEEMOBIL1, \
    A.NOMINEEMOBIL2

## IF0024 \u83b7\u53d6\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f \u6839\u636eVIN\u53f7\u540e6\u4f4d\u548c\u53d1\u52a8\u673a\u540e4\u4f4d\uff0c\u8eab\u4efd\u8bc1\u53f7\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f 
sql.VhcInfo.003 = \
SELECT \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS salesDealerCode, \
    A.MODEL AS model, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCode, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD') AS vhcSalesDate, \
    TO_CHAR(MAX(B.USEDCARDELIVERENDDATE), 'YYYY-MM-DD') AS nextSrvDate, \
    C.ENGINENO AS engine, \
    MAX(B.REGISTERNO) AS registerNo, \
    A.BRANCHINSURECOM AS insurecomCode, \
    TO_CHAR(A.EFFECTIVEDATESTART, 'YYYY-MM-DD') AS effectiveDateStart, \
    TO_CHAR(A.EFFECTIVEDATEEND, 'YYYY-MM-DD') AS effectiveDateEnd, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2 \
FROM  \
    TACT_ORDER_VEHICLE_BK A \
    LEFT JOIN TACT_CUSTOMER_VEHICLE B ON A.FRAMENO = B.VINNO AND B.DELETEFLAG = '0' \
    LEFT JOIN LCMS_VOITUREINFO C ON A.FRAMENO = C.VIN \
WHERE \
    A.FRAMENOD6 = TRIM(?) AND \
    A.DELETEFLAG = '0' \
    AND A.DELIVERYENDDATE IS NOT NULL \
    AND TRIM(A.BUYERID) = TRIM(?) \
GROUP BY \
    A.FRAMENO, \
    A.DEALERCODE, \
    A.MODEL, \
    A.SFX, \
    A.COLORCD, \
    A.SALESDATE, \
    C.ENGINENO, \
    A.REGISTNO, \
    A.BRANCHINSURECOM, \
    A.EFFECTIVEDATESTART, \
    A.EFFECTIVEDATEEND, \
    A.BUYERTEL1, \
    A.BUYERTEL2, \
    A.BUYERMOBIL1, \
    A.BUYERMOBIL2, \
    A.NOMINEETEL1, \
    A.NOMINEETEL2, \
    A.NOMINEEMOBIL1, \
    A.NOMINEEMOBIL2
 
## IF0024 \u83b7\u53d6\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f \u6839\u636e\u8d2d\u8f66\u624b\u673a\u53f7\uff0cVIN\u53f7\u540e6\u4f4d\u548c\u53d1\u52a8\u673a\u540e4\u4f4d\uff0c\u8eab\u4efd\u8bc1\u53f7\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f 
sql.VhcInfo.004 = \
SELECT \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS salesDealerCode, \
    A.MODEL AS model, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCode, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD') AS vhcSalesDate, \
    TO_CHAR(MAX(B.USEDCARDELIVERENDDATE), 'YYYY-MM-DD') AS nextSrvDate, \
    C.ENGINENO AS engine, \
    MAX(B.REGISTERNO) AS registerNo, \
    A.BRANCHINSURECOM AS insurecomCode, \
    TO_CHAR(A.EFFECTIVEDATESTART, 'YYYY-MM-DD') AS effectiveDateStart, \
    TO_CHAR(A.EFFECTIVEDATEEND, 'YYYY-MM-DD') AS effectiveDateEnd, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2 \
FROM \
    TACT_ORDER_VEHICLE_BK A \
    LEFT JOIN TACT_CUSTOMER_VEHICLE B ON A.FRAMENO = B.VINNO AND B.DELETEFLAG = '0' \
    LEFT JOIN LCMS_VOITUREINFO C ON A.FRAMENO = C.VIN \
WHERE \
    A.FRAMENOD6 = TRIM(?) AND \
    A.DELETEFLAG = '0' \
    AND TRIM(A.BUYERID) = TRIM(?) \
    AND A.DELIVERYENDDATE IS NOT NULL \
    AND TRIM(?) IN ( \
                        A.BUYERTEL1, \
                        A.BUYERTEL2, \
                        A.BUYERMOBIL1, \
                        A.BUYERMOBIL2, \
                        A.NOMINEETEL1, \
                        A.NOMINEETEL2, \
                        A.NOMINEEMOBIL1, \
                        A.NOMINEEMOBIL2, \
                        B.BUYERMOBIL1, \
                        B.BUYERMOBIL2, \
                        B.FBUYERTEL1, \
                        B.FBUYERTEL2, \
                        B.BUYERTEL1, \
                        B.BUYERTEL2, \
                        B.NOMINEEMOBIL1, \
                        B.NOMINEEMOBIL2 \
                    ) \
GROUP BY \
    A.FRAMENO, \
    A.DEALERCODE, \
    A.MODEL, \
    A.SFX, \
    A.COLORCD, \
    A.SALESDATE, \
    C.ENGINENO, \
    A.REGISTNO, \
    A.BRANCHINSURECOM, \
    A.EFFECTIVEDATESTART, \
    A.EFFECTIVEDATEEND, \
    A.BUYERTEL1, \
    A.BUYERTEL2, \
    A.BUYERMOBIL1, \
    A.BUYERMOBIL2, \
    A.NOMINEETEL1, \
    A.NOMINEETEL2, \
    A.NOMINEEMOBIL1, \
    A.NOMINEEMOBIL2

##Modify for:\u83b7\u53d6\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f \u6839\u636eVIN\u53f7\u540e6\u4f4d\u548c\u53d1\u52a8\u673a\u540e4\u4f4d\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f   xing_lili 20160315 start
## IF0024 \u83b7\u53d6\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f \u6839\u636eVIN\u53f7\u540e6\u4f4d\u548c\u53d1\u52a8\u673a\u540e4\u4f4d\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f 
sql.VhcInfo.005 = \
SELECT \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS salesDealerCode, \
    A.MODEL AS model, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCode, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD') AS vhcSalesDate, \
    TO_CHAR(MAX(B.USEDCARDELIVERENDDATE), 'YYYY-MM-DD') AS nextSrvDate, \
    C.ENGINENO AS engine, \
    MAX(B.REGISTERNO) AS registerNo, \
    A.BRANCHINSURECOM AS insurecomCode, \
    TO_CHAR(A.EFFECTIVEDATESTART, 'YYYY-MM-DD') AS effectiveDateStart, \
    TO_CHAR(A.EFFECTIVEDATEEND, 'YYYY-MM-DD') AS effectiveDateEnd, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2 \
FROM  \
    TACT_ORDER_VEHICLE_BK A \
    LEFT JOIN TACT_CUSTOMER_VEHICLE B ON A.FRAMENO = B.VINNO AND B.DELETEFLAG = '0' \
    LEFT JOIN LCMS_VOITUREINFO C ON A.FRAMENO = C.VIN \
WHERE \
    A.FRAMENOD6 = TRIM(?) AND \
    A.DELETEFLAG = '0' \
    AND A.DELIVERYENDDATE IS NOT NULL \
    AND C.ENGINENO4 = TRIM(?) \
GROUP BY \
    A.FRAMENO, \
    A.DEALERCODE, \
    A.MODEL, \
    A.SFX, \
    A.COLORCD, \
    A.SALESDATE, \
    C.ENGINENO, \
    A.REGISTNO, \
    A.BRANCHINSURECOM, \
    A.EFFECTIVEDATESTART, \
    A.EFFECTIVEDATEEND, \
    A.BUYERTEL1, \
    A.BUYERTEL2, \
    A.BUYERMOBIL1, \
    A.BUYERMOBIL2, \
    A.NOMINEETEL1, \
    A.NOMINEETEL2, \
    A.NOMINEEMOBIL1, \
    A.NOMINEEMOBIL2
    
##Modify for:\u83b7\u53d6\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f \u6839\u636eVIN\u53f7\u540e6\u4f4d\u548c\u53d1\u52a8\u673a\u540e4\u4f4d\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f   xing_lili 20160315 end
##Modify for:\u4fee\u6539\u53d1\u52a8\u673a\u53f7\u7684\u53d6\u5f97   xing_lili 20151229 end

#Modify for:\u65b0\u8f66\u8ba2\u5355\u8f66\u8f86\u7269\u6d41\u4fe1\u606f\u589e\u52a0\u7740\u5de5\u65e5\u4e0e\u51fa\u95e8\u65e5\u5b57\u6bb5 by shen_kang 20171102 start
## IF0045 \u65b0\u8f66\u8ba2\u5355\u8f66\u8f86\u7269\u6d41\u4fe1\u606f  \u6839\u636e\u65f6\u95f4\u6233\uff0c\u53d6\u5f97\u65f6\u95f4\u6233\u5230\u73b0\u5728\u4e3a\u6b62\u6240\u6709\u6709\u8f66\u8f86\u7269\u6d41\u53d8\u5316\u7684\u8ba2\u5355\u7684\u8f66\u8f86\u9884\u8ba1\u5230\u5e97\u65e5\u671f\u3001\u8f66\u8f86\u5b9e\u9645\u5230\u5e97\u65e5
sql.VhcLogiInfo.001 = \
SELECT \
    A.CONTRACT_NO AS contractNo, \
    TO_CHAR(A.RDNEWLYDELIVERY_DATE, 'YYYY-MM-DD') AS rdnewlyDeliveryDate, \
    TO_CHAR(A.DISTINEARRIVED_DATE, 'YYYY-MM-DD') AS distineArrivedDate, \
    TO_CHAR(A.STARTCONSTRUCT_DATE, 'YYYY-MM-DD') AS startConstructDate, \
    TO_CHAR(A.OUTDAY_DATE, 'YYYY-MM-DD') AS outDayDate, \
    A.IS_DEL AS isDel \
FROM \
    IMS_VEHICLE_LOGI A \
    INNER JOIN TACT_ORDER_VEHICLE B ON A.CONTRACT_NO = B.CONTRACTNO AND B.SUPPOSITIONID='F' \
WHERE \
    A.UPD_DATETIME <= SYSDATE AND \
    A.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND A.IS_DEL = '0'
 
## IF0045 \u65b0\u8f66\u8ba2\u5355\u8f66\u8f86\u7269\u6d41\u4fe1\u606f  \u6839\u636e\u65f6\u95f4\u6233\uff0c\u9884\u8d2d\u534f\u8bae\u53f7,\u53d6\u5f97\u65f6\u95f4\u6233\u5230\u73b0\u5728\u4e3a\u6b62\u6240\u6709\u6709\u8f66\u8f86\u7269\u6d41\u53d8\u5316\u7684\u8ba2\u5355\u7684\u8f66\u8f86\u9884\u8ba1\u5230\u5e97\u65e5\u671f\u3001\u8f66\u8f86\u5b9e\u9645\u5230\u5e97\u65e5 
sql.VhcLogiInfo.002 = \
SELECT \
    A.CONTRACT_NO AS contractNo, \
    TO_CHAR(A.RDNEWLYDELIVERY_DATE, 'YYYY-MM-DD') AS rdnewlyDeliveryDate, \
    TO_CHAR(A.DISTINEARRIVED_DATE, 'YYYY-MM-DD') AS distineArrivedDate, \
    TO_CHAR(A.STARTCONSTRUCT_DATE, 'YYYY-MM-DD') AS startConstructDate, \
    TO_CHAR(A.OUTDAY_DATE, 'YYYY-MM-DD') AS outDayDate, \
    A.IS_DEL AS ISDEL \
FROM \
    IMS_VEHICLE_LOGI A \
    INNER JOIN TACT_ORDER_VEHICLE B ON A.CONTRACT_NO = B.CONTRACTNO AND B.SUPPOSITIONID='F' \
WHERE \
    A.UPD_DATETIME <= SYSDATE \
    AND A.UPD_DATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND A.CONTRACT_NO = TRIM(?) \
    AND A.IS_DEL = '0'
#Modify for:\u65b0\u8f66\u8ba2\u5355\u8f66\u8f86\u7269\u6d41\u4fe1\u606f\u589e\u52a0\u7740\u5de5\u65e5\u4e0e\u51fa\u95e8\u65e5\u5b57\u6bb5 by shen_kang 20171102 end
## IF0026 \u65b0\u8f66\u8ba2\u5355\u4fe1\u606f \u6839\u636e\u624b\u673a\u53f7\u83b7\u53d6\u65b0\u8f66\u8ba2\u5355\u6700\u65b0\u4fe1\u606f
## modify for \u65b0\u8f66\u8ba2\u5355\u53d7\u7406\u65e5\u4e0d\u4e3a\u7a7a\u65f6\u8fd4\u56de\u7ed9APP by liangxiao at 20140712 start
sql.NewCarOrdeInfo.001 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM  (  \
        SELECT * \
        FROM TACT_ORDER_VEHICLE_NODELIVERY \
        WHERE \
             ? = BUYERTEL1 \
          AND CONTRACTDATE IS NOT NULL \
        ) A \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact'
    
sql.NewCarOrdeInfo.003 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM  (  \
        SELECT * \
        FROM TACT_ORDER_VEHICLE_NODELIVERY \
        WHERE \
             ? = BUYERTEL2 \
          AND CONTRACTDATE IS NOT NULL \
        ) A \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact' 
    
sql.NewCarOrdeInfo.004 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM  (  \
        SELECT * \
        FROM TACT_ORDER_VEHICLE_NODELIVERY \
        WHERE \
             ? = BUYERMOBIL1 \
          AND CONTRACTDATE IS NOT NULL \
        ) A  \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact' 
    
sql.NewCarOrdeInfo.005 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM  (  \
        SELECT * \
        FROM TACT_ORDER_VEHICLE_NODELIVERY \
        WHERE \
             ? = BUYERMOBIL2 \
          AND CONTRACTDATE IS NOT NULL \
        ) A  \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact' 
    
sql.NewCarOrdeInfo.006 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM  (  \
        SELECT * \
        FROM TACT_ORDER_VEHICLE_NODELIVERY \
        WHERE \
             ? = NOMINEETEL1 \
          AND CONTRACTDATE IS NOT NULL \
        ) A  \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact' 
sql.NewCarOrdeInfo.007 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM  (  \
        SELECT * \
        FROM TACT_ORDER_VEHICLE_NODELIVERY \
        WHERE \
             ? = NOMINEETEL2 \
          AND CONTRACTDATE IS NOT NULL \
        ) A  \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact' 
sql.NewCarOrdeInfo.008 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM  (  \
        SELECT * \
        FROM TACT_ORDER_VEHICLE_NODELIVERY \
        WHERE \
             ? = NOMINEEMOBIL1 \
          AND CONTRACTDATE IS NOT NULL \
        ) A  \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact'
    
sql.NewCarOrdeInfo.009 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM  (  \
        SELECT * \
        FROM TACT_ORDER_VEHICLE_NODELIVERY \
        WHERE \
             ? = NOMINEEMOBIL2 \
          AND CONTRACTDATE IS NOT NULL \
        ) A  \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact'    
## IF0026 \u65b0\u8f66\u8ba2\u5355\u4fe1\u606f \u6839\u636e\u65f6\u95f4\u6233\u83b7\u53d6\u65b0\u8f66\u8ba2\u5355\u6700\u65b0\u4fe1\u606f
sql.NewCarOrdeInfo.002 = \
SELECT \
    A.CONTRACTNO AS contractNo, \
    A.FRAMENO AS vinNo, \
    A.DEALERCODE AS dealerCode, \
    A.VEHICLENAMECODE AS vehicleNameCode, \
    A.VEHICLENAME AS vehicleName, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.COLORNAME AS colorName, \
    B.USERNAME AS salesName, \
    B.MOBILE AS salesPhone, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2, \
    A.SALESPART AS saleSpart, \
    A.DELETEFLAG AS deletleFlag \
FROM \
    TACT_ORDER_VEHICLE_NODELIVERY A \
    LEFT JOIN IDM_EMPLOYEE_USERS B ON TRIM(A.SALESCODE) = B.ACCOUNT AND A.DEALERCODE = B.DLRCODE AND B.ACCOUNTTYPE='tact' \
WHERE \
    (A.UPDATETIME <= SYSDATE AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')) \
  AND CONTRACTDATE IS NOT NULL 
## modify for \u65b0\u8f66\u8ba2\u5355\u53d7\u7406\u65e5\u4e0d\u4e3a\u7a7a\u65f6\u8fd4\u56de\u7ed9APP by liangxiao at 20140712 end
##Modify for:\u4fee\u6539\u53d1\u52a8\u673a\u53f7\u7684\u53d6\u5f97   xing_lili 20151229 start
## IF0028 \u8ba2\u5355\u8f66\u8f86\u4fe1\u606f \u6839\u636e\u65b0\u8f66\u9884\u8d2d\u534f\u8bae\u53f7\u83b7\u53d6\u4ea4\u8f66\u7684\u8f66\u8f86\u4fe1\u606f\uff0c\u7528\u4e8e\u4ea4\u8f66\u540e\u81ea\u52a8\u5c06\u8f66\u8f86\u7ed1\u5b9a\u5230\u8f66\u4e3b\u4e0a 
sql.OrdeCarInfo.001 = \
SELECT \
    A.FRAMENO AS frameNo, \
    A.MODEL AS model, \
    C.ENGINENO AS vhcEngine, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCD, \
    A.REGISTNO AS registNo, \
    A.BRANCHINSURECOM AS insurecomName, \
    TO_CHAR(A.EFFECTIVEDATESTART,'YYYY-MM-DD') AS effectiveDateStart, \
    TO_CHAR(A.EFFECTIVEDATEEND,'YYYY-MM-DD') AS effectiveDateEnd, \
    TO_CHAR(A.SALESDATE,'YYYY-MM-DD') AS salesDate \
FROM \
    TACT_ORDER_VEHICLE A \
    LEFT JOIN LCMS_VOITUREINFO C ON A.FRAMENO = C.VIN \
WHERE \
    A.CONTRACTNO = TRIM(?) \
    AND A.DELETEFLAG = '0'

##Modify for:\u4fee\u6539\u53d1\u52a8\u673a\u53f7\u7684\u53d6\u5f97   xing_lili 20151229 end

# IF0019 \u552e\u540e\u6d3b\u52a8\u7ec4\u4e3b\u6570\u636e(\u83b7\u53d6\u552e\u540e\u6d3b\u52a8\u7ec4\u4e3b\u6570\u636e\u6570\u636e)
sql.ActivityGroupInfo.001 = \
SELECT \
     DLRCODE  AS dlrCode, \
     ACTIVITYGROUPCODE  AS activityGroupCode , \
     ACTIVITYGROUPNAME  AS activityGroupName, \
     HOTORNOT  AS hotOrNot, \
     GROUPSTARTDATE  AS groupStartDate, \
     GROUPENDDATE  AS groupEndDate, \
     PUSHORNOT  AS pushOrNot, \
     PUSHTEXT  AS pushText, \
     GROUPPUBLISHDATE  AS groupPublishDate, \
     GROUPSTATUS  AS groupStatus, \
     DELFLAG  AS delFlag \
FROM \
    CVM_ACTIVITY_GROUP \
WHERE \
    UPDATETIME <= SYSDATE \
    AND UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND DELFLAG = '0'
 
# IF0017 \u552e\u540e\u6d3b\u52a8\u7ec4\u56fe\u7247(\u83b7\u53d6\u552e\u540e\u6d3b\u52a8\u7ec4\u56fe\u7247\u6570\u636e) 
sql.ActivityGroupPic.001 = \
SELECT \
    ID  AS id, \
    DLRCODE  AS dlrCode, \
    ACTIVITYGROUPCODE  AS activityGroupCode, \
    PHOTHFLAG  AS phothFlag, \
    PHOTHADDRESS  AS phothAddress, \
    PHOTHNO  AS phothNo, \
    DELFLAG  AS delFlag \
FROM \
    CVM_ACTIVITY_GROUP_PHOTO \
WHERE \
    UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND UPDATETIME <= SYSDATE \
    AND DELFLAG = '0'

# IF0018 \u552e\u540e\u6d3b\u52a8\u7ec4\u8303\u56f4(\u83b7\u53d6\u552e\u540e\u6d3b\u52a8\u7ec4\u8303\u56f4\u6570\u636e)
sql.ActivityGroupRange.001 = \
SELECT \
    ID  AS id, \
    ACTIVITYGROUPCODE  AS activityGroupCode, \
    ACTIVITYRANGEFLAG  AS activityRangeFlag, \
    REGION  AS region, \
    PROVINCE  AS province, \
    CITY  AS city, \
    COOPERATION  AS cooperation, \
    DLRCODE  AS dlrCode, \
    DELFLAG  AS delFlag \
FROM \
    CVM_ACTIVITY_GROUP_RANGE \
WHERE \
    UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND UPDATETIME <= SYSDATE \
    AND DELFLAG = '0'
   
# IF0016 \u552e\u540e\u6d3b\u52a8\u4e3b\u6570\u636e(\u83b7\u53d6\u552e\u540e\u6d3b\u52a8\u4e3b\u6570\u636e)  
sql.ActivityInfoForGet.001 = \
SELECT \
    DLRCODE AS dlrCode, \
    ACTIVITYCODE AS activityCode, \
    ACTIVITYNAME AS activityName, \
    MODEL AS standardModelCode, \
    DISCOUNTPART AS partDiscount, \
    DISCOUNTPROJECT AS prjDiscount, \
    SALEDLR AS saleDlr, \
    ONCECEDLR AS oncdCrdlr, \
    LASTCRDLR AS lAStCrdlr, \
    SALEDATE1 AS saleDate1, \
    SALEDATE2 AS saleDate2, \
    KILOMETER1 AS kiloMeter1, \
    KILOMETER2 AS kiloMeter2, \
    LICENSENUMBER AS licenseNumber, \
    ACTIVITYMEMO AS activityMemo, \
    DELFLAG AS delFlag \
FROM \
    CVM_ACTIVITY_INFO \
WHERE \
    UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND UPDATETIME <= SYSDATE \
    AND DELFLAG = '0'
 
# IF0020 \u552e\u540e\u6d3b\u52a8\u96f6\u4ef6\u5185\u5bb9 \uff08\u83b7\u53d6\u552e\u540e\u6d3b\u52a8\u96f6\u4ef6\u5185\u5bb9\u6570\u636e)
sql.ActivityContent.001 = \
SELECT \
    DLRCODE AS dlrCode, \
    ACTIVITYCODE AS activityCode, \
    CONTENTFLAG AS contentFlag, \
    CONTENTCODE AS contentCode, \
    CONTENTNAME AS contentName, \
    NUM AS num, \
    DELFLAG AS delFlag \
FROM \
    CVM_ACTIVITY_CONTENT \
WHERE \
    UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND UPDATETIME <= SYSDATE \
    AND DELFLAG = '0'

# IF0021 \u6d3b\u52a8\u7ec4\u548c\u6d3b\u52a8\u7684\u5173\u7cfb(\u83b7\u53d6\u6d3b\u52a8\u7ec4\u548c\u6d3b\u52a8\u7684\u5173\u7cfb\u6570\u636e)
sql.ActiGrouRelation.001 = \
SELECT \
    DLRCODE AS dlrCode, \
    ACTIVITYCODE AS activityCode, \
    ACTIVITYGROUPCODE AS activityGroupCode, \
    DELFLAG AS delFlag \
FROM \
    CVM_ACTIVITY_GROUP_RELA \
WHERE \
    UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
    AND UPDATETIME <= SYSDATE \
    AND DELFLAG = '0'
   
#IF0022 \u4fdd\u5b58\u5ba2\u6237\u9886\u53d6\u6d3b\u52a8\u4fe1\u606f   
sql.ActivityInfoForSend.001 = \
INSERT INTO \
    APP_CUSTOMER_ACTIVITY_RELA \
    ( \
        CRT_DATETIME, \
        CRT_USER, \
        UPD_DATETIME, \
        UPD_USER, \
        IS_DEL, \
        ACTIVITYNOSIGN, \
        PHONE, \
        ACTIVITYGROUPCODE, \
        ACTIVITYCODE, \
        STANDARDMODELCODE, \
        ACTIVITYNO, \
        ACTIVITYNOSTATUS \
    ) \
    VALUES \
    ( \
        SYSDATE, \
        'ibpp', \
        SYSDATE, \
        'ibpp', \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        0 \
    )

#IF0022 \u83b7\u53d6\u5ba2\u6237\u9886\u53d6\u6d3b\u52a8\u4fe1\u606f    
sql.ActivityInfoForSend.002 = \
SELECT \
    COUNT(1) AS count \
FROM \
    APP_CUSTOMER_ACTIVITY_RELA \
WHERE \
    activityNoSign = TRIM(?) \
    AND IS_DEL = '0'

#IF0022 \u66f4\u65b0\u5ba2\u6237\u9886\u53d6\u6d3b\u52a8\u4fe1\u606f
sql.ActivityInfoForSend.003 = \
UPDATE \
    APP_CUSTOMER_ACTIVITY_RELA \
SET \
    IS_DEL = ?, \
    PHONE = ?, \
    ACTIVITYGROUPCODE = ?, \
    ACTIVITYCODE = ?, \
    STANDARDMODELCODE = ?, \
    ACTIVITYNO = ?, \
    ACTIVITYNOSTATUS = 0, \
    UPD_USER = 'app', \
    UPD_DATETIME = SYSDATE \
WHERE \
    ACTIVITYNOSIGN = TRIM(?)    

# IF0013 \u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u4fe1\u606f\u83b7\u53d6
sql.CurrMainOrderInfo = \
SELECT \
    A.ORDERNO AS srvOrderNo, \
    TO_CHAR(A.ORDERDATE, 'YYYY-MM-DD') AS orderDate, \
    TO_CHAR(A.SALESDATE,'YYYY-MM-DD HH24:MI:SS') AS salesDate, \
    A.DEALERCODE AS dealerCode, \
    A.ORDERSTATUS AS orderStatus, \
    C.SVC_STATUS AS svcStatus, \
    TO_CHAR(A.UPDATETIME,'YYYY-MM-DD HH24:MI:SS') AS updateDate, \
    A.VINNO AS vin, \
    B.SRVTYPENAME AS srvTypeName, \
    A.CUSTCHARGEAMOUNT AS orderPrice, \
    A.TWCRESULT AS twcResult, \
    A.DELETEFLAG AS deleteflag \
FROM \
    TACT_SRV_ORDER A \
    LEFT JOIN ICROP_SERVICEIN C ON C.RO_NUM = TRIM(A.ORDERNO) AND C.DLR_CD = TRIM(A.DEALERCODE) AND DECODE(C.IS_DEL,NULL,0,C.IS_DEL) = 0 \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D \
    ON A.VINNO= D.FRAMENO \
    AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.VINNO = TRIM(?) \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN('D','7') OR A.TYPICALSRVTYPE IS NULL)

# IF0013 \u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u4fe1\u606f\u83b7\u53d6
sql.CurrMainOrderInfo_NoVin = \
SELECT \
    A.ORDERNO AS srvOrderNo, \
    TO_CHAR(A.ORDERDATE, 'YYYY-MM-DD') AS orderDate, \
    TO_CHAR(A.SALESDATE,'YYYY-MM-DD HH24:MI:SS') AS salesDate, \
    A.DEALERCODE AS dealerCode, \
    A.ORDERSTATUS AS orderStatus, \
    C.SVC_STATUS AS svcStatus, \
    TO_CHAR(A.UPDATETIME,'YYYY-MM-DD HH24:MI:SS') AS updateDate, \
    A.VINNO AS vin, \
    B.SRVTYPENAME AS srvTypeName, \
    A.CUSTCHARGEAMOUNT AS orderPrice, \
    A.TWCRESULT AS twcResult, \
    A.DELETEFLAG AS deleteflag \
FROM \
    TACT_SRV_ORDER A \
    LEFT JOIN ICROP_SERVICEIN C ON C.RO_NUM = TRIM(A.ORDERNO) AND C.DLR_CD = TRIM(A.DEALERCODE) AND DECODE(C.IS_DEL,NULL,0,C.IS_DEL) = 0 \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D \
    ON A.VINNO = D.FRAMENO \
    AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.UPDATETIME <= SYSDATE \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN('D','7') OR A.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
ORDER BY \
    A.VINNO

# IF0047 \u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u72b6\u6001\u83b7\u53d6
sql.CurrMainOrderStatus = \
SELECT \
    B.VINNO AS vinNo, \
    TO_CHAR(B.ORDERDATE,'YYYY-MM-DD') AS orderDate, \
    B.ORDERSTATUS AS orderStatus, \
    TO_CHAR(B.ORDERDATE,'YYYY-MM-DD HH24:MI:SS') AS entryDate, \
    B.SACODE AS saCode, \
    C.USERNAME AS saName, \
    B.DEALERCODE AS svcinCode, \
    D.DEALER_NAME AS svcinName, \
    TO_CHAR(B.DELIVERYHOPEDATE,'YYYY-MM-DD HH24:MI:SS') AS deliveryHopeDate, \
    A.SVC_STATUS AS svcStatus, \
    TO_CHAR(B.UPDATETIME,'YYYY-MM-DD HH24:MI:SS') AS updateDate \
FROM \
    TACT_SRV_ORDER B \
    LEFT JOIN ICROP_SERVICEIN A ON A.RO_NUM = TRIM(B.ORDERNO) AND A.DLR_CD = TRIM(B.DEALERCODE) AND DECODE(A.IS_DEL,NULL,0,A.IS_DEL) = 0 \
    LEFT JOIN IDM_EMPLOYEE_USERS C ON TRIM(B.SACODE) = C."ACCOUNT" AND TRIM(B.DEALERCODE) = TRIM(C.DLRCODE) AND C.ACCOUNTTYPE='tact' \
    INNER JOIN BASE_DEALER_INFO D ON TRIM(B.DEALERCODE) = TRIM(D.DEALER_CODE) \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) E \
    ON B.VINNO = E.FRAMENO \
    AND B.ORDERDATE > E.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND B.DELETEFLAG = '0' \
ORDER BY \
    B.VINNO
 
# IF0047 \u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u72b6\u6001\u83b7\u53d6(\u83b7\u53d6 \u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u72b6\u6001\u6570\u636e\uff0c\u6ca1\u6709vin\u53f7)
sql.CurrMainOrderStatus_NoVin = \
SELECT \
    B.VINNO AS vinNo, \
    TO_CHAR(B.ORDERDATE,'YYYY-MM-DD') AS orderDate, \
    B.ORDERSTATUS AS orderStatus, \
    TO_CHAR(B.ORDERDATE,'YYYY-MM-DD HH24:MI:SS') AS entryDate, \
    B.SACODE AS saCode, \
    C.USERNAME AS saName, \
    B.DEALERCODE AS svcinCode, \
    D.DEALER_NAME AS svcinName, \
    TO_CHAR(B.DELIVERYHOPEDATE,'YYYY-MM-DD HH24:MI:SS') AS deliveryHopeDate, \
    A.SVC_STATUS AS svcStatus, \
    TO_CHAR(B.UPDATETIME,'YYYY-MM-DD HH24:MI:SS') AS updateDate \
FROM \
    TACT_SRV_ORDER B \
    LEFT JOIN ICROP_SERVICEIN A ON A.RO_NUM = TRIM(B.ORDERNO) AND A.DLR_CD = TRIM(B.DEALERCODE) AND DECODE(A.IS_DEL,NULL,0,A.IS_DEL) = 0 \
    LEFT JOIN IDM_EMPLOYEE_USERS C ON TRIM(B.SACODE) = C."ACCOUNT" AND TRIM(B.DEALERCODE) = TRIM(C.DLRCODE) AND C.ACCOUNTTYPE='tact' \
    INNER JOIN BASE_DEALER_INFO D ON TRIM(B.DEALERCODE) = TRIM(D.DEALER_CODE) \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) E \
    ON B.VINNO = E.FRAMENO \
    AND B.ORDERDATE > E.DELIVERYENDDATE \
WHERE \
    B.VINNO IN ( \
                    SELECT \
                        DISTINCT X.VINNO \
                    FROM \
                        TACT_SRV_ORDER X \
                        INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) Y \
                        ON X.VINNO = Y.FRAMENO AND X.ORDERDATE > Y.DELIVERYENDDATE \
                    WHERE \
                        X.UPDATETIME >= TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') \
                        AND X.DELETEFLAG = '0' \
                    UNION \
                    SELECT \
                        DISTINCT BB.VINNO \
                    FROM \
                        TACT_SRV_ORDER BB \
                        INNER JOIN ICROP_SERVICEIN AA ON AA.RO_NUM = TRIM(BB.ORDERNO) AND AA.DLR_CD = TRIM(BB.DEALERCODE) AND DECODE(AA.IS_DEL,NULL,0,AA.IS_DEL) = 0 \
                        INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) CC \
                        ON BB.VINNO = CC.FRAMENO AND BB.ORDERDATE > CC.DELIVERYENDDATE \
                    WHERE \
                        AA.UPD_DATETIME >= TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') \
                        AND BB.DELETEFLAG = '0' \
                ) \
    AND B.DELETEFLAG = '0' \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
ORDER BY \
    B.VINNO

# IF0042 \u83b7\u53d6APP\u8f66\u4e3b\u4fe1\u606f
sql.AppUserInfoForSend.001 = \
SELECT \
    COUNT(1) AS count \
FROM \
    BASE_APP_USER_INFO \
WHERE \
    USERID = TRIM(?)

# IF0042 \u4fdd\u5b58APP\u8f66\u4e3b\u4fe1\u606f
sql.AppUserInfoForSend.002 = \
INSERT INTO \
    BASE_APP_USER_INFO \
    ( \
        CRT_USER , \
        CRT_DATETIME , \
        UPD_USER , \
        UPD_DATETIME , \
        IS_DEL , \
        PHONE_NO , \
        USER_NAME , \
        DRIVER_ARRIVERD_DATE , \
        ADDRESS , \
        USERID \
    ) \
VALUES\
    ( \
        ?, \
        SYSDATE, \
        ?, \
        SYSDATE, \
        ?, \
        ?, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
        ?, \
        ? \
    )
 
# IF0042 \u66f4\u65b0APP\u8f66\u4e3b\u4fe1\u606f
sql.AppUserInfoForSend.003 = \
UPDATE \
    BASE_APP_USER_INFO \
SET \
    UPD_USER  = ?, \
    UPD_DATETIME = SYSDATE, \
    IS_DEL = ?, \
    PHONE_NO = ?, \
    USER_NAME = ?, \
    DRIVER_ARRIVERD_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
    ADDRESS = ? \
WHERE \
    USERID = TRIM(?)

# IF0042 \u83b7\u53d6APP\u8f66\u8f86\u4fe1\u606f
sql.AppVehicleInfoForSend.001 = \
SELECT \
    COUNT(1) AS count \
FROM \
    BASE_APP_VEHICLE_INFO \
WHERE \
    USERID = TRIM(?) AND \
    VIN = TRIM(?)

# IF0042 \u4fdd\u5b58APP\u8f66\u8f86\u4fe1\u606f
sql.AppVehicleInfoForSend.002 = INSERT INTO  BASE_APP_VEHICLE_INFO  ( \
     CRT_USER, \
     CRT_DATETIME, \
     UPD_USER, \
     UPD_DATETIME, \
     IS_DEL, \
     VIN, \
     LICENSE_NO, \
     VEHICLE_VALIDATE_DATE, \
     MAINTAIN_NOTICE_SET, \
     INSURER_COMPANY, \
     INSURANCE_EFFECTIVE_DATE, \
     USERID \
) \
VALUES \
    (\
        ?, \
        SYSDATE, \
        ?, \
        SYSDATE , \
        ?, \
        ?, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
        ?, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
        ? \
    ) \
 
# IF0042 \u66f4\u65b0APP\u8f66\u8f86\u4fe1\u606f
sql.AppVehicleInfoForSend.003 = \
UPDATE \
    BASE_APP_VEHICLE_INFO \
SET \
    UPD_USER = ?, \
    UPD_DATETIME = SYSDATE , \
    IS_DEL = ?, \
    LICENSE_NO = ?, \
    VEHICLE_VALIDATE_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
    MAINTAIN_NOTICE_SET = ?, \
    INSURER_COMPANY = ?, \
    INSURANCE_EFFECTIVE_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END \
WHERE \
    USERID = TRIM(?) AND \
    VIN = TRIM(?)

# IF_TACT_0001 \u5ba2\u6237\u9886\u53d6\u6d3b\u52a8\u4fe1\u606f\u83b7\u53d6(\u6839\u636e\u9500\u552e\u5e97CODE\uff0c\u83b7\u53d6\u8be5\u5e97\u5bf9\u5e94\u7684\u6240\u5c5e\u5927\u533a\u3001\u6240\u5c5e\u7701\u4efd\u3001\u6240\u5c5e\u57ce\u5e02\u3001\u6240\u5c5e\u9500\u552e\u534f\u529b\u4f1a)
sql.ActivityInfo.001 = \
SELECT \
    REGION_CODE AS region_code, \
    PROVINCE AS province, \
    CITY AS city, \
    COOP_SERVICE_CODE AS coop_sales_code \
FROM \
    BASE_DEALER_INFO \
WHERE \
    DEALER_CODE = TRIM(?) \
    AND IS_DEL = 0

# IF_TACT_0001 \u5ba2\u6237\u9886\u53d6\u6d3b\u52a8\u4fe1\u606f\u83b7\u53d6(\u6839\u636e\u9500\u552e\u5e97\u7684\u533a\u57df\u5c5e\u6027\uff0c\u83b7\u53d6\u8be5\u5e97\u9002\u5408\u7684\u6d3b\u52a8\u7ec4\u53ca\u6d3b\u52a8\u5217\u8868)
sql.ActivityInfo.002 = SELECT \
    A.ACTIVITYGROUPCODE AS activityGroupCode, \
    B.ACTIVITYCODE AS activityCode \
FROM \
    CVM_ACTIVITY_GROUP_RANGE A \
INNER JOIN CVM_ACTIVITY_GROUP_RELA B ON A .ACTIVITYGROUPCODE = B.ACTIVITYGROUPCODE \
INNER JOIN CVM_ACTIVITY_GROUP C ON A.ACTIVITYGROUPCODE = C.ACTIVITYGROUPCODE AND C.DLRCODE = '00000' AND NVL(C.DELFLAG, '0') <> '1' \
AND C.GROUPSTARTDATE <= to_date(TO_CHAR(SYSDATE,'yyyy-mm-dd')||' 23:59:59','yyyy-mm-dd hh24:mi:ss') AND C.GROUPENDDATE >= to_date(TO_CHAR(SYSDATE,'yyyy-mm-dd'),'yyyy-mm-dd hh24:mi:ss') AND C.GROUPSTATUS IN ('2', '3') \
WHERE \
    NVL(A.DELFLAG, '0') <> '1' \
    AND NVL(B.DELFLAG, '0') <> '1' \
   AND( \
( A.ACTIVITYRANGEFLAG         = 1 \
AND A.DLRCODE=  'ALL' \
AND (A.PROVINCE = 'ALL' \
   OR (SUBSTR(A.PROVINCE,1,2) = SUBSTR(?,1,2) \
     AND (A.CITY = 'ALL' \
        OR SUBSTR(A.CITY,1,3) = SUBSTR(?,1,3)))) \
) \
OR ( A.ACTIVITYRANGEFLAG         = 2 \
AND TRIM(A.DLRCODE)= 'ALL' \
AND (A.REGION = 'ALL' \
   OR (SUBSTR(A.REGION,1,1) = SUBSTR(?,1,1) \
     AND (A.COOPERATION        = TRIM('ALL') \
        OR A.COOPERATION         = TRIM(?)))) \
) \
OR A.DLRCODE = ? \
) \
UNION \
SELECT \
    A.ACTIVITYGROUPCODE AS activityGroupCode, \
    B.ACTIVITYCODE AS activityCode \
FROM \
    CVM_ACTIVITY_GROUP A \
    INNER JOIN CVM_ACTIVITY_GROUP_RELA B ON A.ACTIVITYGROUPCODE = B.ACTIVITYGROUPCODE \
WHERE \
    A.DLRCODE = ? \
    AND A.GROUPSTARTDATE <= SYSDATE \
    AND A.GROUPENDDATE >= SYSDATE \
    AND A.GROUPSTATUS IN ('2', '3') \
    AND NVL(A.DELFLAG, '0') <> '1' \
    AND NVL(B.DELFLAG, '0') <> '1' 

# IF_TACT_0001 \u5ba2\u6237\u9886\u53d6\u6d3b\u52a8\u4fe1\u606f\u83b7\u53d6(\u6839\u636e\u5ba2\u6237\u624b\u673a\u53f7\u548csfx\u4ee3\u7801\uff0c\u83b7\u53d6\u8be5\u5ba2\u6237\u9886\u53d6\u7684\u6d3b\u52a8\u7ec4\u53ca\u6d3b\u52a8\u5217\u8868)
sql.ActivityInfo.003 = \
SELECT \
    DISTINCT \
    A.PHONE AS phone, \
    A.ACTIVITYGROUPCODE AS activityGroupCode, \
    A.ACTIVITYCODE AS activityCode, \
    A.ACTIVITYNO AS activityNo, \
    A.ACTIVITYNOSIGN AS activityNoSign, \
    A.STANDARDMODELCODE AS standardModelCode, \
    A.ACTIVITYNOSTATUS AS activityNoStatus \
FROM \
    APP_CUSTOMER_ACTIVITY_RELA A \
    INNER JOIN BASE_VEHICLE_MODEL B ON B.STANDARD_MODEL_CODE = A.STANDARDMODELCODE \
WHERE \
    A.IS_DEL = ? \
    AND TRIM(A.PHONE) = TRIM(?) \
    AND TRIM(B.SFX) = TRIM(?) \
    AND A.ACTIVITYNOSTATUS != 2

# IF0010 \u83b7\u53d6\u9884\u7ea6\u7533\u8bf7\u4fe1\u606f
sql.ApplyForSend.001 = \
SELECT \
    COUNT(1) AS count \
FROM \
    APP_APPLY \
WHERE \
    APPLY_NUMBER = TRIM(?) 

# IF0010 \u4fdd\u5b58\u9884\u7ea6\u7533\u8bf7\u4fe1\u606f
# add 20160119 for \u589e\u52a0\u9884\u7ea6\u7c7b\u578b   by zhang_huafang at start
sql.ApplyForSend.002 = \
INSERT INTO \
    APP_APPLY ( \
         APPLY_NUMBER, \
         DEALER_CODE, \
         USER_ID, \
         BRN_CODE, \
         RESE_APPL_START_TIME, \
         RESE_APPL_END_TIME, \
         CUST_TEL, \
         VIN, \
         RESERVATION_MAINTENANCE_KM, \
         REMARKS, \
         CRT_USER, \
         CRT_DATETIME, \
         UPD_USER, \
         UPD_DATETIME, \
         IS_DEL, \
         APPLY_TYPE \
    ) \
VALUES \
    ( \
        ?, \
        ?, \
        ?, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        SYSDATE, \
        ?, \
        SYSDATE, \
        ?, \
        ? \
    )

# add 20160119 for \u589e\u52a0\u9884\u7ea6\u7c7b\u578b   by zhang_huafang at end

# IF0010 \u66f4\u65b0\u9884\u7ea6\u7533\u8bf7\u4fe1\u606f
# add 20160119 for \u589e\u52a0\u9884\u7ea6\u7c7b\u578b   by zhang_huafang at start
sql.ApplyForSend.003 = \
UPDATE \
    APP_APPLY \
SET \
    DEALER_CODE = ?, \
    USER_ID = ?, \
    BRN_CODE = ?, \
    RESE_APPL_START_TIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    RESE_APPL_END_TIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    CUST_TEL = ?, \
    VIN = ?, \
    RESERVATION_MAINTENANCE_KM = ?, \
    REMARKS = ?, \
    UPD_USER = ?, \
    UPD_DATETIME = SYSDATE , \
    APPLY_TYPE = ?, \
    IS_DEL = ? \
WHERE \
    APPLY_NUMBER = TRIM(?)
# add 20160119 for \u589e\u52a0\u9884\u7ea6\u7c7b\u578b   by zhang_huafang at end

# IF0012 \u83b7\u53d6\u9884\u7ea6\u7533\u8bf7\u53d6\u6d88\u4fe1\u606f
sql.ApplyCancel.001 = \
SELECT \
    COUNT(1) AS count \
FROM \
    APP_APPLY \
WHERE \
    APPLY_NUMBER = TRIM(?) 
 
# IF0012 \u4fdd\u5b58\u9884\u7ea6\u7533\u8bf7\u53d6\u6d88\u4fe1\u606f
sql.ApplyCancel.002 = \
INSERT INTO \
    APP_APPLY ( \
        APPLY_NUMBER, \
        IS_DEL \
    ) \
VALUES \
    ( \
        ?, \
        ? \
    )

# IF0012 \u5220\u9664\u9884\u7ea6\u7533\u8bf7\u53d6\u6d88\u4fe1\u606f
sql.ApplyCancel.003 = \
DELETE \
    APP_APPLY \
WHERE \
    APPLY_NUMBER = TRIM(?)

# IF0012 \u9884\u7ea6\u7533\u8bf7\u53d6\u6d88 \u53d6\u5f97\u9884\u7ea6\u7533\u8bf7\u53d6\u6d88\u7684\u4fe1\u606f
sql.ApplyCancel.004 = \
SELECT \
    IS_DEL AS is_del \
FROM \
    APP_APPLY \
WHERE \
    APPLY_NUMBER = TRIM(?) 

# IF0023 \u6839\u636e\u6d3b\u52a8\u7801\u552f\u4e00\u6807\u8bc6\uff0c\u83b7\u53d6\u6d3b\u52a8\u7801\u72b6\u6001
sql.ActivityStatus.001 = \
SELECT \
    ACTIVITYNOSTATUS AS activityNoStatus \
FROM \
    APP_CUSTOMER_ACTIVITY_RELA \
WHERE \
    ACTIVITYNOSIGN = TRIM(?) \
    AND IS_DEL = '0'

# IF0023 \u6839\u636e\u6d3b\u52a8\u7801\u552f\u4e00\u6807\u8bc6\uff0c\u66f4\u65b0\u6d3b\u52a8\u7801\u72b6\u6001
sql.ActivityStatus.002 = \
UPDATE \
    APP_CUSTOMER_ACTIVITY_RELA \
SET \
    ACTIVITYNOSTATUS = ?, \
    UPD_USER = ?, \
    UPD_DATETIME = SYSDATE, \
    SRVORDERNO = ? \
WHERE \
    ACTIVITYNOSIGN = TRIM(?) \
    AND SRVORDERNO = ?
    
# IF0023 \u6839\u636e\u6d3b\u52a8\u7801\u552f\u4e00\u6807\u8bc6\uff0c\u66f4\u65b0\u6d3b\u52a8\u7801\u72b6\u6001(\u672a\u4f7f\u7528)
sql.ActivityStatus.003 = \
UPDATE \
    APP_CUSTOMER_ACTIVITY_RELA \
SET \
    ACTIVITYNOSTATUS = ?, \
    UPD_USER = ?, \
    UPD_DATETIME = SYSDATE, \
    SRVORDERNO = ? \
WHERE \
    ACTIVITYNOSIGN = TRIM(?)

# \u83b7\u53d6\u4f18\u60e0\u5238\u6d3b\u52a8\u4ee3\u7801
sql.CoupRule.001 = \
SELECT A.EVENT_ID,A.CARD_ID FROM WX_COUPON_CONTENT A \
WHERE A.COUPON_ID=TRIM(?)

# \u6d3b\u52a8\u89c4\u5219\u83b7\u53d6
sql.CoupRule.002 = \
SELECT A.RULE_CODE,A.RULE_VALUE FROM \
BASE_COUPON_RULE A \
WHERE A.EVENT_ID=TRIM(?)

# \u6d3b\u52a8\u89c4\u5219\u83b7\u53d6\u91d1\u4e5d\u94f6\u5341
sql.CoupRule.003 = \
SELECT A.RULE_CODE,A.RULE_VALUE FROM \
BASE_COUPON_RULE A \
WHERE A.EVENT_ID=TRIM(?) \
AND A.COUPON_ID=TRIM(?)

# \u534a\u4ef7\u673a\u6cb9\u6298\u6263\u91d1\u989d\u8ba1\u7b97
sql.CoupPrice.001 = \
SELECT SUM(SELLPRICE)/COUNT(1)/2 COUPPRICE FROM SRV_PARTSINSTOCK_MM \
WHERE TRIM(DEALERCODE) =? AND TRIM(PARTSCODE) IN (TRIM(?),TRIM(?),TRIM(?),TRIM(?),TRIM(?),TRIM(?)) 

# \u4f18\u60e0\u5238\u4fdd\u5b58
sql.WCoupInfoActual.001 =  \
INSERT INTO \
    WX_COUPON_CONTENT ( \
        COUPON_CONTENT_GUID, \
        CARD_ID, \
        COUPON_ID, \
        EVENT_ID, \
        OPEN_ID, \
        GZH_HASH, \
        DEALER_CODE, \
        COUPON_STATUS, \
        TYPE_ID, \
        COUPON_CONTENT, \
        COUPON_RULE, \
        COUPON_BEGIN, \
        COUPON_END, \
        SRV_ORDER_NO, \
        VIN_NO, \
        SFX_CODE, \
        CHECK_MODEL, \
        USE_STATUS, \
        CREATED_ON, \
        CREATED_BY, \
        MODIFY_ON, \
        MODIFY_BY, \
        UPDATE_COUNT, \
        DEL_FLAG, \
        USER_NAME, \
        USER_NUMBER, \
        UPDATE_ON \
   ) \
VALUES \
    ( \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        SYSDATE \
    )
    
sql.WCoupInfoActual.002 = DELETE FROM WX_COUPON_CONTENT WHERE COUPON_CONTENT_GUID=?


sql.ApplyForSend.004 = \
DELETE "APP_APPLY" \
WHERE \
    APPLY_NUMBER = TRIM(?)
    
sql.OrderInfo.001 = \
DELETE FROM TACT_SRV_ORDER WHERE \
DEALERCODE = TRIM(?) AND ORDERNO = TRIM(?)

sql.OrderInfo.002 = \
INSERT \
INTO TACT_SRV_ORDER \
  ( \
    DEALERCODE, \
    ORDERNO, \
    ORDERDATE, \
    SALESDATE, \
    ORDERCANCELDATE, \
    NEWORDERNO, \
    ORDERSTATUS, \
    CUSTOMERSTATUSTYPE, \
    CUSTOMERID, \
    CUSTOMERNAME, \
    CUSTOMERZIPCODE, \
    CUSTOMERADDR, \
    TEL1, \
    TEL2, \
    FAX, \
    EMAIL, \
    REGISTERNO, \
    VINNO, \
    MODEL, \
    SFX, \
    COLORCODE, \
    COLOR, \
    VHCTYPE, \
    VHCMAKERTYPE, \
    VHCCODE, \
    VHCNAME, \
    EXHAUST, \
    GRADE, \
    MISSION, \
    ENGINE, \
    SALESDEALERCODE, \
    CRDEALERCODE, \
    TYPICALSRVTYPE, \
    SRVGROUPNAME, \
    SRVGROUPCOUNT, \
    WORKHOURS, \
    MILEAGE, \
    NEXTSRVDATE, \
    ONEPOINTADVICE, \
    BOFLAG, \
    PARTSITEMSEQ, \
    PRERCVAMOUNT, \
    PRERCVDATE, \
    RCVITEMSEQ, \
    SALESTOTAL, \
    WORKHOURSTOTAL, \
    TAXRATE, \
    INNERTAXTOTAL, \
    LABORTAX, \
    PARTSTAX, \
    OUTLABORSELLPRICE, \
    OUTLABORPRICE, \
    OUTPARTSSELLPRICE, \
    OUTPARTSPRICE, \
    OUTOILSELLPRICE, \
    OUTOILPRICE, \
    OUTORDERSELLPRICE, \
    OUTORDERPRICE, \
    INLABORSELLPRICE, \
    INLABORPRICE, \
    INPARTSSELLPRICE, \
    INPARTSPRICE, \
    INOILSELLPRICE, \
    INOILPRICE, \
    INORDERSELLPRICE, \
    INORDERPRICE, \
    WALABORSELLPRICE, \
    WALABORPRICE, \
    WAPARTSSELLPRICE, \
    WAPARTSPRICE, \
    WAOILSELLPRICE, \
    WAOILPRICE, \
    WAORDERSELLPRICE, \
    WAORDERPRICE, \
    DISCOUNT, \
    LABORDISCOUNT, \
    PARTSDISCOUNT, \
    CUSTCHARGECODE, \
    CUSTCHARGENAME, \
    CUSTCHARGEAMOUNT, \
    WARRACHARGECODE, \
    WARRACHARGENAME, \
    WARRACHARGEAMOUNT, \
    CHARGECODE1, \
    CHARGENAME1, \
    CHARGEAMOUNT1, \
    CHARGECODE2, \
    CHARGENAME2, \
    CHARGEAMOUNT2, \
    CHARGECODE3, \
    CHARGENAME3, \
    CHARGEAMOUNT3, \
    FREESRVFLAG, \
    FREESRVREC, \
    SELFSRVFLAG, \
    SELFSRVREC, \
    PDSSRVFLAG, \
    PDSSRVREC, \
    LASTINVOICENO, \
    DELETEFLAG, \
    UPDATECOUNT, \
    CREDATE, \
    CREUSER, \
    UPDATETIME, \
    UPDATEUSER, \
    FINANCESALESDATE, \
    SRVMEMO, \
    NEXTSRVMILEAGE, \
    SACODE, \
    BSRVCHANGED, \
    SETMENUREPAIRDISCOUNT, \
    SETMENUPARTSDISCOUNT, \
    SETMENUREALPRICE, \
    SETMENUPRICE, \
    RECEIPTFLAG, \
    SETMENUCODE, \
    SUBSETMENUCODE, \
    REZID, \
    BASREZID, \
    BRNCD, \
    ORDERCANCELREASON, \
    DELIVERYHOPEDATE, \
    JDPFLAG, \
    TWCUSER, \
    TWCTEL1, \
    TWCTEL2, \
    TWCRESULT, \
    TWCDISCOUNTRATE, \
    CANCELTYPE, \
    REASONTYPE, \
    MONTHLYPAY, \
    CARACCEPTDATE, \
    SENDFLG, \
    COUPONID, \
    COUPONTYPE, \
    COUPONDISCOUNT, \
    TEL_NO \
  ) \
  VALUES \
  ( \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ? \
  )
  
 sql.Srvdetail.001=\
 DELETE FROM SRV_SRVDETAIL_F WHERE DEALERCODE=TRIM(?) AND \
 ORDERNO=TRIM(?) AND SRVTYPE=TRIM(?) AND SRVCODE=TRIM(?)
 
  sql.Srvdetail.002=\
  INSERT \
INTO SRV_SRVDETAIL_F \
  ( \
    DEALERCODE, \
    ORDERNO, \
    SRVTYPE, \
    SRVCODE, \
    ORDERDATE, \
    SALESDATE, \
    ORDERCANCELDATE, \
    ORDERSTATUS, \
    SRVNAME, \
    HRTYPE, \
    SELLHOURRATE, \
    HOURRATE, \
    WORKHOURS, \
    SELLWORKPRICE, \
    WORKPRICE, \
    TRANSDEPTCODE, \
    TRANSDEPTNAME, \
    TYPICALSRVTYPE, \
    DELETEFLAG, \
    UPDATECOUNT, \
    CREDATE, \
    CREUSER, \
    UPDATETIME, \
    UPDATEUSER, \
    FINANCESALESDATE, \
    WORKBYCODE, \
    SRVSEQUECE, \
    SETMENUFLAG, \
    TWCDISCOUNTRATE, \
    SRVADDSEQ, \
    SMBREZID, \
    SRVSETMENUFLAG, \
    SRVPARTSFLAG, \
    SRVSETMENUCODE, \
    ACTIVITYFLAG, \
    ACTIVITYCODE, \
    ACTIVITYNOSIGN \
  ) \
  VALUES \
  ( \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ? \
  )
  
sql.Partsdetail.001= \
DELETE FROM SRV_PARTSDETAIL_F WHERE DEALERCODE=TRIM(?) AND \
 ORDERNO=TRIM(?) AND PARTSITEMSEQ=?
 
sql.Partsdetail.002= \
INSERT \
INTO SRV_PARTSDETAIL_F \
  ( \
    DEALERCODE, \
    ORDERNO, \
    PARTSITEMSEQ, \
    ORDERDATE, \
    SALESDATE, \
    ORDERCANCELDATE, \
    ORDERSTATUS, \
    OUTWAREDATE, \
    PARTSCODE, \
    PARTSNAME, \
    MAKERTYPE, \
    INSTOCKTYPE, \
    PARTSTYPE, \
    SRVTYPE, \
    QUANTITY, \
    UNIT, \
    SELLPRICE, \
    PRICE, \
    UNITSELLPRICE, \
    TRANSDEPT, \
    TRANSDEPTNAME, \
    INCOMMARK, \
    STATUS, \
    BOFLAG, \
    DELETEFLAG, \
    UPDATECOUNT, \
    CREDATE, \
    CREUSER, \
    UPDATETIME, \
    UPDATEUSER, \
    FINANCESALESDATE, \
    SRVCODE, \
    SRVCODESEQ, \
    USAGE, \
    SPECIALCLASSCODE, \
    SUBSCRIBITIONNO, \
    SETMENUFLAG, \
    SRVADDSEQ, \
    ACTIVITYFLAG, \
    ACTIVITYCODE, \
    ACTIVITYNOSIGN \
  ) \
  VALUES \
  ( \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ? \
  )
  
 sql.Partsdetailtemp.001 = \
 DELETE FROM SRV_PARTSDETAILTEMP_F WHERE DEALERCODE=TRIM(?) AND \
 ORDERNO=TRIM(?) AND PARTSITEMSEQ=?
 
 sql.Partsdetailtemp.002 = \
INSERT \
INTO SRV_PARTSDETAILTEMP_F \
  ( \
    DEALERCODE, \
    ORDERNO, \
    PARTSITEMSEQ, \
    ORDERDATE, \
    SALESDATE, \
    ORDERCANCELDATE, \
    ORDERSTATUS, \
    OUTWAREDATE, \
    PARTSCODE, \
    PARTSNAME, \
    MAKERTYPE, \
    INSTOCKTYPE, \
    PARTSTYPE, \
    SRVTYPE, \
    QUANTITY, \
    UNIT, \
    SELLPRICE, \
    PRICE, \
    UNITSELLPRICE, \
    TRANSDEPT, \
    TRANSDEPTNAME, \
    INCOMMARK, \
    STATUS, \
    BOFLAG, \
    DELETEFLAG, \
    UPDATECOUNT, \
    CREDATE, \
    CREUSER, \
    UPDATETIME, \
    UPDATEUSER, \
    FINANCESALESDATE, \
    SRVCODE, \
    SRVCODESEQ, \
    USAGE, \
    SPECIALCLASSCODE, \
    SUBSCRIBITIONNO, \
    UPDATEFLAG, \
    SETMENUFLAG, \
    SRVADDSEQ, \
    ACTIVITYFLAG, \
    ACTIVITYCODE, \
    ACTIVITYNOSIGN \
  ) \
  VALUES \
  ( \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ? \
  )
  
#Modify for:\u8f66\u8f86\u8868\u5173\u8054\u4fee\u6539  xing_lili 20161012 start
#sql.AppVehicle.001 = \
#SELECT USERID FROM BASE_APP_VEHICLE_INFO WHERE VIN=TRIM(?)

sql.AppVehicle.001 = \
SELECT U.USER_ID AS USERID FROM USER_LOGIN U \
INNER JOIN USER_CAR C ON U.UID_GTMC=C.UID_GTMC AND U.SYS_CD='2' \
WHERE C.VINNO=TRIM(?)

#Modify for:\u8f66\u8f86\u8868\u5173\u8054\u4fee\u6539  xing_lili 20161012 end

#Modify for:\u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u4fe1\u606f\u8fd4\u56de\u503c\u76f8\u5173\u4fee\u6539  xing_lili 20151216 start
sql.OrderInfoAPP.001 = \
SELECT \
    A.ORDERNO AS srvOrderNo, \
    TO_CHAR(A.ORDERDATE, 'YYYY-MM-DD') AS orderDate, \
    TO_CHAR(A.ORDERDATE,'YYYY-MM-DD HH24:MI:SS') AS entryTime, \
    A.VINNO AS vin, \
    A.SACODE AS saCode, \
    E.USERNAME AS saName, \
    E.MOBILE AS saMobile, \
    A.DEALERCODE AS svcinCode, \
    F.DEALER_NAME AS svcinName, \
    A.DELIVERYHOPEDATE AS deliveryHopeDate, \
    B.SRVTYPENAME AS srvTypeName, \
    A.CUSTCHARGEAMOUNT AS orderPrice, \
    A.TWCRESULT AS twcResult, \
    A.DELETEFLAG AS deleteflag, \
    A.TWCUSER AS twcUserName, \
    A.TWCTEL1 AS twcTel1, \
    A.TWCTEL2 AS twcTel2 \
FROM \
    TACT_SRV_ORDER A \
    LEFT JOIN ICROP_SERVICEIN C ON C.RO_NUM = TRIM(A.ORDERNO) AND C.DLR_CD = TRIM(A.DEALERCODE) AND DECODE(C.IS_DEL,NULL,0,C.IS_DEL) = 0 \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE  \
    LEFT JOIN IDM_EMPLOYEE_USERS E ON TRIM(A.SACODE) = E."ACCOUNT" AND TRIM(A.DEALERCODE) = TRIM(E.DLRCODE) AND E.ACCOUNTTYPE='tact' \
    LEFT JOIN BASE_DEALER_INFO F ON TRIM(A.DEALERCODE) = TRIM(F.DEALER_CODE) \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D \
    ON A.VINNO= D.FRAMENO  \
    AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.VINNO = TRIM(?) AND A.ORDERNO = TRIM(?) \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN('D','7') OR A.TYPICALSRVTYPE IS NULL)
    
#Modify for:\u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u4fe1\u606f\u8fd4\u56de\u503c\u76f8\u5173\u4fee\u6539  xing_lili 20151216 end
sql.OrderStatusAPP.001 = \
SELECT \
    B.ORDERNO AS srvOrderNo, \
    B.ORDERSTATUS AS orderStatus, \
    A.SVC_STATUS AS svcStatus, \
    TO_CHAR(B.UPDATETIME,'YYYY-MM-DD HH24:MI:SS') AS updateDate, \
    TO_CHAR(B.SALESDATE,'YYYY-MM-DD HH24:MI:SS') AS deliveryActualDate \
FROM \
    TACT_SRV_ORDER B \
    LEFT JOIN ICROP_SERVICEIN A ON A.RO_NUM = TRIM(B.ORDERNO) AND A.DLR_CD = TRIM(B.DEALERCODE) AND DECODE(A.IS_DEL,NULL,0,A.IS_DEL) = 0 \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) E \
    ON B.VINNO = E.FRAMENO \
    AND B.ORDERDATE > E.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) AND B.ORDERNO = TRIM(?) \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND NVL(B.DELETEFLAG,'0') = '0' \
ORDER BY \
    B.VINNO
    
sql.OrderStatusAPP.003 = \
SELECT \
    B.ORDERNO AS srvOrderNo, \
    B.ORDERSTATUS AS orderStatus, \
    A.SVC_STATUS AS svcStatus, \
    TO_CHAR(B.UPDATETIME,'YYYY-MM-DD HH24:MI:SS') AS updateDate, \
    TO_CHAR(B.SALESDATE,'YYYY-MM-DD HH24:MI:SS') AS deliveryActualDate \
FROM \
    TACT_SRV_ORDER B \
    LEFT JOIN ICROP_SERVICEIN A ON A.RO_NUM = TRIM(B.ORDERNO) AND A.DLR_CD = TRIM(B.DEALERCODE) AND DECODE(A.IS_DEL,NULL,0,A.IS_DEL) = 0 \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) E \
    ON B.VINNO = E.FRAMENO \
    AND B.ORDERDATE > E.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND NVL(B.DELETEFLAG,'0') = '0' \
ORDER BY \
    B.VINNO
    
sql.OrderProjectAPP.001 = \
SELECT \
SRVCODE AS projectCode, \
SRVNAME AS projectName, \
SRVTYPE AS projectType, \
NVL(DELETEFLAG,0) deleteFlag \
FROM SRV_SRVDETAIL_F WHERE \
ORDERNO = TRIM(?)
 
sql.OrderPartsAPP.001 = \
SELECT \
PARTSITEMSEQ AS partsSeq, \
PARTSNAME AS partsName, \
QUANTITY AS partsQuantity, \
NVL(DELETEFLAG,0) AS deleteFlag \
FROM SRV_PARTSDETAIL_F WHERE \
ORDERNO = TRIM(?)

sql.OrderPartsAPP.002 = \
SELECT \
PARTSITEMSEQ AS partsSeq, \
PARTSNAME AS partsName, \
QUANTITY AS partsQuantity, \
NVL(DELETEFLAG,0) AS deleteFlag \
FROM SRV_PARTSDETAILTEMP_F WHERE \
ORDERNO = TRIM(?)

#\u83b7\u53d6SYSTEM_ID
sql.getEventNumber.001 = \
SELECT \
SYSTEM_ID \
FROM WX_COUPON_CONTENT WHERE \
COUPON_ID = TRIM(?) \
AND DEL_FLAG='0' 

#\u5224\u65adcouponId\u662f\u5426\u6751\u5b50\u554a
sql.getCount.001 = \
SELECT \
COUPON_ID \
FROM COUPON_USEINFO WHERE \
COUPON_ID = TRIM(?)

#\u5728COUPON_USEINFO\u8868\u5e94\u7528\u7684\u5b57\u6bb5\u63d2\u5165\u53c2\u6570
sql.save.001 = \
INSERT INTO COUPON_USEINFO( \
COUPON_ID, \
USE_SRVORDERNO, \
USE_VINNO, \
USE_SFXCODE, \
USE_DEALERCODE, \
USE_NOWDATE , \
CRT_DATETIME, \
CRT_USER, \
DEL_FLAG ) \
VALUES( \
TRIM(?), \
TRIM(?), \
TRIM(?), \
TRIM(?), \
TRIM(?), \
TRIM(?), \
TRIM(?), \
'ibpp', \
'0' )

#\u5728COUPON_USEINFO\u8868\u4e2d\u6838\u9500\u7684\u5b57\u6bb5\u63d2\u5165\u53c2\u6570
sql.save.002 = \
INSERT INTO COUPON_USEINFO( \
COUPON_ID, \
OFFSET_SRVORDERNO, \
OFFSET_VINNO, \
OFFSET_SFXCODE, \
OFFSET_DEALERCODE, \
OFFSET_NOWDATE, \
CRT_DATETIME, \
CRT_USER, \
DEL_FLAG ) \
VALUES( \
TRIM(?), \
TRIM(?), \
TRIM(?), \
TRIM(?), \
TRIM(?), \
TRIM(?), \
TRIM(?), \
'ibpp', \
'0' )

#\u4fee\u6539COUPON_USEINFO\u8868\u5e94\u7528\u5b57\u6bb5\u7684\u53c2\u6570
sql.update.001 = \
UPDATE COUPON_USEINFO \
SET \
USE_SRVORDERNO = ?, \
USE_VINNO = ?, \
USE_SFXCODE = ?, \
USE_DEALERCODE = ?, \
USE_NOWDATE = ?, \
UPD_DATETIME = ?, \
UPD_USER = 'ibpp' \
WHERE COUPON_ID = TRIM(?) \
AND DEL_FLAG = '0'

#\u4fee\u6539COUPON_USEINFO\u8868\u6838\u9500\u5b57\u6bb5\u7684\u53c2\u6570
sql.update.002 = \
UPDATE \
    COUPON_USEINFO \
SET \
    OFFSET_SRVORDERNO = ?, \
    OFFSET_VINNO = ?, \
    OFFSET_SFXCODE = ?, \
    OFFSET_DEALERCODE = ?, \
    OFFSET_NOWDATE = ?, \
    UPD_DATETIME = ?, \
    UPD_USER = 'ibpp' \
WHERE \
    COUPON_ID = TRIM(?) \
    AND DEL_FLAG = '0'


sql.CoupPriceByVin.001 = \
SELECT \
CASE WHEN F.KEY='07HLD' OR F.KEY='HLD-T' OR F.KEY='HLDER' THEN \
CASE WHEN E.EXHAUST ='2.7L' OR E.EXHAUST ='2.0T' THEN '331' WHEN E.EXHAUST ='3.5L' THEN '390' ELSE F.VALUE END \
ELSE  F.VALUE END VALUE \
FROM ( \
SELECT DISTINCT D.STANDARD_MODEL_CODE AS VEHICLENAMECODE ,D.EXHAUST FROM( \
SELECT A.MODEL FROM TACT_ORDER_VEHICLE_BK A WHERE A.FRAMENO = TRIM(?) \
UNION  \
SELECT B.MODEL FROM TACT_CUSTOMER_VEHICLE B WHERE B.VINNO = TRIM(?)) C \
INNER JOIN \
BASE_VEHICLE_MODEL D ON TRIM(C.MODEL) = TRIM(D.MODEL) \
WHERE C.MODEL IS NOT NULL) E \
LEFT JOIN BASE_DICTIONARY F \
ON E.VEHICLENAMECODE = F.KEY AND NVL(F.DEL_FLAG,'0')='0' 


#\u65b0\u8f66\u6ce8\u518c\u65f6\u5c06\u5de5\u5355\u4fe1\u606f\u83b7\u53d6
sql.OrderInfoAPP.002 = \
SELECT \
    A.ORDERNO AS srvOrderNo, \
    TO_CHAR(A.ORDERDATE, 'YYYY-MM-DD') AS orderDate, \
    TO_CHAR(A.ORDERDATE,'YYYY-MM-DD HH24:MI:SS') AS entryTime, \
    A.VINNO AS vin, \
    A.SACODE AS saCode, \
    E.USERNAME AS saName, \
    E.MOBILE AS saMobile, \
    A.DEALERCODE AS svcinCode, \
    F.DEALER_NAME AS svcinName, \
    A.DELIVERYHOPEDATE AS deliveryHopeDate, \
    B.SRVTYPENAME AS srvTypeName, \
    A.CUSTCHARGEAMOUNT AS orderPrice, \
    A.TWCRESULT AS twcResult, \
    A.DELETEFLAG AS deleteflag, \
    A.TWCUSER AS twcUserName, \
    A.TWCTEL1 AS twcTel1, \
    A.TWCTEL2 AS twcTel2 \
FROM \
    TACT_SRV_ORDER A \
    LEFT JOIN ICROP_SERVICEIN C ON C.RO_NUM = TRIM(A.ORDERNO) AND C.DLR_CD = TRIM(A.DEALERCODE) AND DECODE(C.IS_DEL,NULL,0,C.IS_DEL) = 0 \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE  \
    LEFT JOIN IDM_EMPLOYEE_USERS E ON TRIM(A.SACODE) = E."ACCOUNT" AND TRIM(A.DEALERCODE) = TRIM(E.DLRCODE) AND E.ACCOUNTTYPE='tact' \
    LEFT JOIN BASE_DEALER_INFO F ON TRIM(A.DEALERCODE) = TRIM(F.DEALER_CODE) \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D \
    ON A.VINNO= D.FRAMENO  \
    AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.VINNO = TRIM(?) \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN('D','7') OR A.TYPICALSRVTYPE IS NULL)

#\u65b0\u8f66\u6ce8\u518c\u65f6\u5c06\u5de5\u5355\u72b6\u6001\u4fe1\u606f\u83b7\u53d6
sql.OrderStatusAPP.002 = \
SELECT \
    B.ORDERNO AS srvOrderNo, \
    B.ORDERSTATUS AS orderStatus, \
    A.SVC_STATUS AS svcStatus, \
    TO_CHAR(B.UPDATETIME,'YYYY-MM-DD HH24:MI:SS') AS updateDate, \
    TO_CHAR(B.SALESDATE,'YYYY-MM-DD HH24:MI:SS') AS deliveryActualDate \
FROM \
    TACT_SRV_ORDER B \
    LEFT JOIN ICROP_SERVICEIN A ON A.RO_NUM = TRIM(B.ORDERNO) AND A.DLR_CD = TRIM(B.DEALERCODE) AND DECODE(A.IS_DEL,NULL,0,A.IS_DEL) = 0 \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) E \
    ON B.VINNO = E.FRAMENO \
    AND B.ORDERDATE > E.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND NVL(B.DELETEFLAG,'0') = '0' \
ORDER BY \
    B.VINNO

#\u67e5\u8be2\u5de5\u5355\u4fe1\u606fupdateTime
sql.SelOrderInfo.001 = \
SELECT UPDATETIME FROM TACT_SRV_ORDER WHERE \
DEALERCODE = TRIM(?) AND ORDERNO = TRIM(?)

#\u6839\u636e\u4e3b\u952e\u67e5\u627e\uff0c\u5982\u679c\u5b58\u5728\u5c31update
sql.UpdateOrderInfo.001 = \
UPDATE TACT_SRV_ORDER \
SET \
ORDERDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
SALESDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
ORDERCANCELDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
NEWORDERNO = ?,\
ORDERSTATUS = ?,\
CUSTOMERSTATUSTYPE = ?,\
CUSTOMERID = ?,\
CUSTOMERNAME = ?,\
CUSTOMERZIPCODE = ?,\
CUSTOMERADDR = ?,\
TEL1 = ?,\
TEL2 = ?,\
FAX = ?,\
EMAIL = ?,\
REGISTERNO = ?,\
VINNO = ?,\
MODEL = ?,\
SFX = ?,\
COLORCODE = ?,\
COLOR = ?,\
VHCTYPE = ?,\
VHCMAKERTYPE = ?,\
VHCCODE = ?,\
VHCNAME = ?,\
EXHAUST = ?,\
GRADE = ?,\
MISSION = ?,\
ENGINE = ?,\
SALESDEALERCODE = ?,\
CRDEALERCODE = ?,\
TYPICALSRVTYPE = ?,\
SRVGROUPNAME = ?,\
SRVGROUPCOUNT = ?,\
WORKHOURS = ?,\
MILEAGE = ?,\
NEXTSRVDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
ONEPOINTADVICE = ?,\
BOFLAG = ?,\
PARTSITEMSEQ = ?,\
PRERCVAMOUNT = ?,\
PRERCVDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
RCVITEMSEQ = ?,\
SALESTOTAL = ?,\
WORKHOURSTOTAL = ?,\
TAXRATE = ?,\
INNERTAXTOTAL = ?,\
LABORTAX = ?,\
PARTSTAX = ?,\
OUTLABORSELLPRICE = ?,\
OUTLABORPRICE = ?,\
OUTPARTSSELLPRICE = ?,\
OUTPARTSPRICE = ?,\
OUTOILSELLPRICE = ?,\
OUTOILPRICE = ?,\
OUTORDERSELLPRICE = ?,\
OUTORDERPRICE = ?,\
INLABORSELLPRICE = ?,\
INLABORPRICE = ?,\
INPARTSSELLPRICE = ?,\
INPARTSPRICE = ?,\
INOILSELLPRICE = ?,\
INOILPRICE = ?,\
INORDERSELLPRICE = ?,\
INORDERPRICE = ?,\
WALABORSELLPRICE = ?,\
WALABORPRICE = ?,\
WAPARTSSELLPRICE = ?,\
WAPARTSPRICE = ?,\
WAOILSELLPRICE = ?,\
WAOILPRICE = ?,\
WAORDERSELLPRICE = ?,\
WAORDERPRICE = ?,\
DISCOUNT = ?,\
LABORDISCOUNT = ?,\
PARTSDISCOUNT = ?,\
CUSTCHARGECODE = ?,\
CUSTCHARGENAME = ?,\
CUSTCHARGEAMOUNT = ?,\
WARRACHARGECODE = ?,\
WARRACHARGENAME = ?,\
WARRACHARGEAMOUNT = ?,\
CHARGECODE1 = ?,\
CHARGENAME1 = ?,\
CHARGEAMOUNT1 = ?,\
CHARGECODE2 = ?,\
CHARGENAME2 = ?,\
CHARGEAMOUNT2 = ?,\
CHARGECODE3 = ?,\
CHARGENAME3 = ?,\
CHARGEAMOUNT3 = ?,\
FREESRVFLAG = ?,\
FREESRVREC = ?,\
SELFSRVFLAG = ?,\
SELFSRVREC = ?,\
PDSSRVFLAG = ?,\
PDSSRVREC = ?,\
LASTINVOICENO = ?,\
DELETEFLAG = ?,\
UPDATECOUNT = ?,\
CREDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CREUSER = ?,\
UPDATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
UPDATEUSER = ?,\
FINANCESALESDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
SRVMEMO = ?,\
NEXTSRVMILEAGE = ?,\
SACODE = ?,\
BSRVCHANGED = ?,\
SETMENUREPAIRDISCOUNT = ?,\
SETMENUPARTSDISCOUNT = ?,\
SETMENUREALPRICE = ?,\
SETMENUPRICE = ?,\
RECEIPTFLAG = ?,\
SETMENUCODE = ?,\
SUBSETMENUCODE = ?,\
REZID = ?,\
BASREZID = ?,\
BRNCD = ?,\
ORDERCANCELREASON = ?,\
DELIVERYHOPEDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
JDPFLAG = ?,\
TWCUSER = ?,\
TWCTEL1 = ?,\
TWCTEL2 = ?,\
TWCRESULT = ?,\
TWCDISCOUNTRATE = ?,\
CANCELTYPE = ?,\
REASONTYPE = ?,\
MONTHLYPAY = ?,\
CARACCEPTDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
SENDFLG = ?,\
COUPONID = ?,\
COUPONTYPE = ?,\
COUPONDISCOUNT = ?,\
TEL_NO = ? \
WHERE \
DEALERCODE=? \
AND ORDERNO=?

##\u6839\u636e\u4e3b\u952e\u67e5\u8be2\u5de5\u5355\u660e\u7ec6\u4fe1\u606fupdateTime
sql.SelSrvdetail.001 = \
SELECT UPDATETIME FROM SRV_SRVDETAIL_F WHERE DEALERCODE=? AND \
ORDERNO=? AND SRVTYPE=? AND SRVCODE=? AND SRVSEQUECE=?

#\u6839\u636e\u4e3b\u952e\u67e5\u627e\uff0c\u5de5\u5355\u660e\u7ec6\u4fe1\u606f\u66f4\u65b0
sql.UpdateSrvdetail.001 = \
UPDATE SRV_SRVDETAIL_F \
SET \
ORDERDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
SALESDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
ORDERCANCELDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
ORDERSTATUS = ?, \
SRVNAME = ?, \
HRTYPE = ?, \
SELLHOURRATE = ?, \
HOURRATE = ?, \
WORKHOURS = ?, \
SELLWORKPRICE = ?, \
WORKPRICE = ?, \
TRANSDEPTCODE = ?, \
TRANSDEPTNAME = ?, \
TYPICALSRVTYPE = ?, \
DELETEFLAG = ?, \
UPDATECOUNT = ?, \
CREDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
CREUSER = ?, \
UPDATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
UPDATEUSER = ?, \
FINANCESALESDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
WORKBYCODE = ?, \
SRVSEQUECE = ?, \
SETMENUFLAG = ?, \
TWCDISCOUNTRATE = ?, \
SRVADDSEQ = ?, \
SMBREZID = ?, \
SRVSETMENUFLAG = ?, \
SRVPARTSFLAG = ?, \
SRVSETMENUCODE = ?, \
ACTIVITYFLAG = ?, \
ACTIVITYCODE = ?, \
ACTIVITYNOSIGN = ? \
WHERE DEALERCODE=? AND \
ORDERNO=? AND SRVTYPE=? AND SRVCODE=? AND SRVSEQUECE=?

#\u96f6\u4ef6\u660e\u7ec6\u4fe1\u606f\u66f4\u65b0 
sql.SelPartsdetail.001 = \
SELECT UPDATETIME FROM SRV_PARTSDETAIL_F WHERE DEALERCODE=TRIM(?) AND \
 ORDERNO=TRIM(?) AND PARTSITEMSEQ=?

#\u96f6\u4ef6\u660e\u7ec6\u4fe1\u606f\u66f4\u65b0
sql.UpdatePartsdetail.001 = \
UPDATE SRV_PARTSDETAIL_F \
SET \
ORDERDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
SALESDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
ORDERCANCELDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
ORDERSTATUS = ?, \
OUTWAREDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
PARTSCODE = ?, \
PARTSNAME = ?, \
MAKERTYPE = ?, \
INSTOCKTYPE = ?, \
PARTSTYPE = ?, \
SRVTYPE = ?, \
QUANTITY = ?, \
UNIT = ?, \
SELLPRICE = ?, \
PRICE = ?, \
UNITSELLPRICE = ?, \
TRANSDEPT = ?, \
TRANSDEPTNAME = ?, \
INCOMMARK = ?, \
STATUS = ?, \
BOFLAG = ?, \
DELETEFLAG = ?, \
UPDATECOUNT = ?, \
CREDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
CREUSER = ?, \
UPDATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
UPDATEUSER = ?, \
FINANCESALESDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
SRVCODE = ?, \
SRVCODESEQ = ?, \
USAGE = ?, \
SPECIALCLASSCODE = ?, \
SUBSCRIBITIONNO = ?, \
SETMENUFLAG = ?, \
SRVADDSEQ = ?, \
ACTIVITYFLAG = ?, \
ACTIVITYCODE = ?, \
ACTIVITYNOSIGN = ? \
WHERE DEALERCODE=TRIM(?) AND \
ORDERNO=TRIM(?) AND PARTSITEMSEQ=?

#
sql.SelPartsdetailtemp.001 = \
SELECT UPDATETIME FROM SRV_PARTSDETAILTEMP_F WHERE DEALERCODE=TRIM(?) AND \
ORDERNO=TRIM(?) AND PARTSITEMSEQ=?

#\u96f6\u4ef6\u660e\u7ec6\u4e34\u65f6\u8868\u4fe1\u606f\u66f4\u65b0
sql.UpdatePartsdetailtemp.001 = \
UPDATE SRV_PARTSDETAILTEMP_F \
SET \
ORDERDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
SALESDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
ORDERCANCELDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
ORDERSTATUS = ?, \
OUTWAREDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
PARTSCODE = ?, \
PARTSNAME = ?, \
MAKERTYPE = ?, \
INSTOCKTYPE = ?, \
PARTSTYPE = ?, \
SRVTYPE = ?, \
QUANTITY = ?, \
UNIT = ?, \
SELLPRICE = ?, \
PRICE = ?, \
UNITSELLPRICE = ?, \
TRANSDEPT = ?, \
TRANSDEPTNAME = ?, \
INCOMMARK = ?, \
STATUS = ?, \
BOFLAG = ?, \
DELETEFLAG = ?, \
UPDATECOUNT = ?, \
CREDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
CREUSER = ?, \
UPDATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
UPDATEUSER = ?, \
FINANCESALESDATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
SRVCODE = ?, \
SRVCODESEQ = ?, \
USAGE = ?, \
SPECIALCLASSCODE = ?, \
SUBSCRIBITIONNO = ?, \
UPDATEFLAG = ?, \
SETMENUFLAG = ?, \
SRVADDSEQ = ?, \
ACTIVITYFLAG = ?, \
ACTIVITYCODE = ?, \
ACTIVITYNOSIGN = ? \
WHERE DEALERCODE=TRIM(?) AND \
ORDERNO=TRIM(?) AND PARTSITEMSEQ=?

#Add for:\u4fdd\u517b\u5957\u9910\u63a8\u8350\u53ca\u9884\u7ea6\u4fe1\u606f(\u5b9e\u65f6)  xing_lili 20151223 start
sql.FindIcopServiceIn.001=SELECT \
ROW_UPDATE_DATETIME AS UPDDATETIME \
FROM \
   ICROP_SERVICEIN \
WHERE SVCIN_ID =TRIM(?)

sql.SaveIcopServiceIn.002 = INSERT INTO ICROP_SERVICEIN (\
SVCIN_ID,\
DLR_CD,\
BRN_CD,\
RO_NUM,\
CST_ID,\
VCL_ID,\
CST_VCL_TYPE,\
SVCIN_MILE,\
TLM_CONTRACT_FLG,\
ACCEPTANCE_TYPE,\
PICK_DELI_TYPE,\
CARWASH_NEED_FLG,\
SMS_TRANSMISSION_FLG,\
RESV_STATUS,\
SVC_STATUS,\
SCHE_SVCIN_DATETIME,\
SCHE_DELI_DATETIME,\
RSLT_SVCIN_DATETIME,\
RSLT_DELI_DATETIME,\
SVCIN_CREATE_TYPE,\
PIC_SA_STF_CD,\
NOSHOW_FLLW_FLG,\
CRT_DATETIME,\
CRT_USER,\
UPD_DATETIME,\
UPD_USER,\
IS_DEL,\
ROW_UPDATE_DATETIME \
)\
VALUES\
(\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
?,\
?,\
?,\
TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'),\
?,\
TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'),\
?,\
TO_NUMBER(?), \
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END \
)

sql.UpdateIcopServiceIn.003 = UPDATE ICROP_SERVICEIN SET \
DLR_CD = ?, \
BRN_CD = ?, \
RO_NUM = ?, \
CST_ID = ?, \
VCL_ID = ?, \
CST_VCL_TYPE = ?, \
SVCIN_MILE = ?, \
TLM_CONTRACT_FLG = ?, \
ACCEPTANCE_TYPE = ?, \
PICK_DELI_TYPE = ?, \
CARWASH_NEED_FLG = ?, \
SMS_TRANSMISSION_FLG = ?, \
RESV_STATUS = ?, \
SVC_STATUS = ?, \
SCHE_SVCIN_DATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
SCHE_DELI_DATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
RSLT_SVCIN_DATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
RSLT_DELI_DATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
SVCIN_CREATE_TYPE = ?, \
PIC_SA_STF_CD = ?, \
NOSHOW_FLLW_FLG = ?, \
CRT_DATETIME = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'),\
CRT_USER = ?, \
UPD_DATETIME = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'),\
UPD_USER = ?, \
IS_DEL = ?, \
ROW_UPDATE_DATETIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END \
WHERE SVCIN_ID =TRIM(?)

#Add for:\u4fdd\u517b\u5957\u9910\u63a8\u8350\u53ca\u9884\u7ea6\u4fe1\u606f(\u5b9e\u65f6)  xing_lili 20151223 end=======
#Modify for:Check\u4f18\u60e0\u5238\u4fe1\u606f   xing_lili 20151225 start

#Modify for:Check\u4f18\u60e0\u5238\u4fe1\u606f   xing_lili 20151225 start

sql.FindBindResult.001 = \
SELECT \
A.COUPON_ID AS couponId, \
B.ORDERNO AS srvOrderNo, \
A.COUPON_STATUS AS couponStatus \
FROM WX_COUPON_CONTENT A left join \
TACT_SRV_ORDER B on A.COUPON_ID = B.COUPONID  AND B.COUPONID IS NOT NULL \
WHERE  \
A.COUPON_ID = ? AND NVL(A.DEL_FLAG,0)='0' AND ROWNUM=1

sql.FindVeriResult.001 = \
SELECT \
A.COUPON_ID  AS couponId, \
A.COUPON_STATUS  AS couponStatus, \
B.USE_SRVORDERNO AS useSrvorderNo, \
B.OFFSET_SRVORDERNO AS offsetSrvorderNo \
FROM \
WX_COUPON_CONTENT A \
INNER JOIN COUPON_USEINFO B \
ON A.COUPON_ID=B.COUPON_ID \
AND B.DEL_FLAG=0 \
WHERE A.COUPON_ID=TRIM(?) AND NVL(A.DEL_FLAG,0)='0'  AND ROWNUM=1

#Modify for:Check\u4f18\u60e0\u5238\u4fe1\u606f   xing_lili 20151225 end

#Modify for:\u4fdd\u517b\u5957\u9910\u63a8\u8350\u53ca\u9884\u7ea6\u4fe1\u606f(\u5b9e\u65f6)(\u9884\u7ea6\u4fe1\u606f\u4fdd\u5b58\u53ca\u66f4\u65b0)   xing_lili 20160106 start
sql.FindApplyInfo.001= \
SELECT \
COUNT(*) AS totalCount \
FROM \
APP_INFO WHERE APMREQ_ID=TRIM(?)

sql.InsertApplyInfo.002= \
INSERT INTO APP_INFO(\
APMREQ_ID,\
APP_STATUS,\
SMB_ID,\
SMB_FROMTIME,\
SMB_TOTIME,\
CRT_DATETIME,\
CRT_USER, \
FLAG \
) \
VALUES \
( \
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
?, \
?, \
? \
)

sql.UpdateApplyInfo.003= UPDATE APP_INFO SET \
APP_STATUS = ?, \
SMB_ID = ?, \
SMB_FROMTIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
SMB_TOTIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(REPLACE(?, 'T', ' '), 'YYYY-MM-DD HH24:MI:SS') END, \
UPD_DATETIME = ?, \
UPD_USER = ?, \
FLAG = ? \
WHERE APMREQ_ID=TRIM(?)
#Modify for:\u4fdd\u517b\u5957\u9910\u63a8\u8350\u53ca\u9884\u7ea6\u4fe1\u606f(\u5b9e\u65f6)(\u9884\u7ea6\u4fe1\u606f\u4fdd\u5b58\u53ca\u66f4\u65b0 )  xing_lili 20160106 end

#\u5411\u5de5\u5355\u4fe1\u606f\u8868\u4e2d\u4fdd\u5b58\u6570\u636e
sql.SaveOrderStatusInfo.001 = \
INSERT INTO \
ORDER_STATUS_INFO( \
SRVORDER_NO, \
SVC_STATUS, \
UPDATE_DATE, \
DELIVERYACTUAL_DATE, \
CRT_DATETIME, \
CRT_USER \
)VALUES( \
?, \
?, \
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
?, \
'ibpp' \
)

#\u6839\u636e\u4e3b\u952e\u67e5\u8be2\u5de5\u5355\u4fe1\u606f\u8868\u4e2d\u6570\u636e\u662f\u5426\u5b58\u5728
sql.SaveOrderStatusInfo.002 = \
SELECT \
SRVORDER_NO \
FROM \
ORDER_STATUS_INFO \
WHERE \
SRVORDER_NO = ?

#\u4fee\u6539\u5de5\u5355\u4fe1\u606f\u8868\u7684\u6570\u636e
sql.SaveOrderStatusInfo.003 = \
UPDATE \
ORDER_STATUS_INFO \
SET SRVORDER_NO = ?, \
SVC_STATUS = ?, \
UPDATE_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
DELIVERYACTUAL_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
UPD_DATETIME = ?, \
UPD_USER = 'ibpp' \
WHERE SRVORDER_NO = ? 

#\u67e5\u8be2\u5de5\u5355\u4fe1\u606f\u8868\u4e2d\u6570\u636e\u662f\u5426\u5b58\u5728
sql.SaveOrderStatusInfo.004 = \
SELECT \
SRVORDER_NO \
FROM \
ORDER_STATUS_INFO \
WHERE \
SRVORDER_NO = ? \
AND SVC_STATUS = ? \
AND (UPDATE_DATE IS null OR UPDATE_DATE='' OR UPDATE_DATE = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS')) \
AND (DELIVERYACTUAL_DATE IS null OR DELIVERYACTUAL_DATE='' OR DELIVERYACTUAL_DATE = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'))


#Modify for:\u4fdd\u517b\u5957\u9910\u63a8\u8350\u53ca\u9884\u7ea6\u4fe1\u606f(\u5b9e\u65f6)(\u9884\u7ea6\u4fe1\u606f\u63a8\u9001 )  xing_lili 20160108 start
##\u67e5\u8be2\u9884\u7ea6\u4fe1\u606f\u8868\u4e2d\u4fe1\u606f\u662f\u5426\u5b58\u5728
sql.selAppointmentInfo.001 = \
SELECT \
FLAG \
FROM \
APP_INFO \
WHERE \
APMREQ_ID = ? \

#Modify for:\u4fdd\u517b\u5957\u9910\u63a8\u8350\u53ca\u9884\u7ea6\u4fe1\u606f(\u5b9e\u65f6)(\u9884\u7ea6\u4fe1\u606f\u63a8\u9001 )  xing_lili 20160108 end

#Modify for:tack\u4f20\u5165\u96f6\u4ef6\u4fe1\u606f\u5904\u7406\u540e\u63a8\u7ed9APP  xing_lili 20160113 start
##\u67e5\u8be2\u96f6\u4ef6\u8868
sql.OrderPartsDetail.001 = \
SELECT \
    DEALERCODE, \
    PARTSCODE, \
    PARTSNAME, \
    ORDERNO, \
    QUANTITY, \
    PARTSITEMSEQ \
FROM SRV_PARTSDETAIL_F WHERE \
ORDERNO = TRIM(?)
##\u67e5\u8be2\u96f6\u4ef6\u4e34\u65f6\u8868\u6570\u91cf
sql.OrderPartsTemp.001 = \
SELECT \
DEALERCODE, \
PARTSCODE, \
PARTSNAME, \
ORDERNO, \
SUM(QUANTITY) AS QUANTITY, \
MIN(PARTSITEMSEQ) AS PARTSITEMSEQ \
FROM SRV_PARTSDETAILTEMP_F \
WHERE ORDERNO= TRIM(?) GROUP BY PARTSCODE,PARTSNAME,ORDERNO,DEALERCODE

##\u67e5\u8be2\u96f6\u4ef6\u6570\u91cf
sql.selPartsdetailInfo.001= \
SELECT \
DEALERCODE, \
PARTSCODE, \
PARTSNAME, \
ORDERNO, \
SUM(QUANTITY) AS QUANTITY, \
MIN(PARTSITEMSEQ) AS PARTSITEMSEQ \
FROM SRV_PARTSDETAIL_F \
WHERE ORDERNO= TRIM(?) GROUP BY PARTSCODE,PARTSNAME,ORDERNO,DEALERCODE

##\u67e5\u8be2\u96f6\u4ef6\u6574\u5408\u8868
sql.selPartsWorkFlowInfo.001 = \
SELECT COUNT(1) AS TOTALCOUNT FROM SRV_PARTSWORKFLOW_F WHERE DEALERCODE=TRIM(?) AND \
 ORDERNO=TRIM(?) AND PARTSITEMSEQ=?

##\u63d2\u5165\u96f6\u4ef6\u6574\u5408\u8868
sql.insertPartsWorkFlowInfo.001 = INSERT \
INTO SRV_PARTSWORKFLOW_F \
  ( \
    DEALERCODE, \
    ORDERNO, \
    PARTSITEMSEQ, \
    PARTSCODE, \
    PARTSNAME, \
    QUANTITY, \
    DELETEFLAG, \
	CREDATE, \
    CREUSER \
  ) \
  VALUES \
  ( \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
    ? \
  )
  
##\u66f4\u65b0\u96f6\u4ef6\u6574\u5408\u8868
sql.updatePartsWorkFlowInfo.001 = UPDATE SRV_PARTSWORKFLOW_F \
SET DEALERCODE = ?, \
    ORDERNO = ?, \
    PARTSITEMSEQ = ?, \
    PARTSCODE = ?, \
    PARTSNAME = ?, \
    QUANTITY = ?, \
    DELETEFLAG = ?, \
    UPDATETIME = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
    UPDATEUSER = ? \
WHERE DEALERCODE=TRIM(?) AND \
ORDERNO=TRIM(?) AND PARTSITEMSEQ=?
##\u67e5\u8be2\u6574\u5408\u8868
sql.selPartsWordFlowInfo.001= \
SELECT \
PARTSITEMSEQ AS partsSeq, \
PARTSNAME AS partsName, \
QUANTITY AS partsQuantity, \
DELETEFLAG AS deleteFlag \
FROM SRV_PARTSWORKFLOW_F \
WHERE ORDERNO=TRIM(?)

#Modify for:tack\u4f20\u5165\u96f6\u4ef6\u4fe1\u606f\u5904\u7406\u540e\u63a8\u7ed9APP  xing_lili 20160113 end

# Add for:\u95ee\u5377\u8c03\u67e5  xing_lili 20160524 start
sql.insertQrCodeInfo.001 = \
INSERT INTO \
    NRP_QUESTIONNAIRE \
    ( \
        QR_CODE_SEQ, \
        QR_START_DATETIME, \
        QR_END_DATETIME, \
        DLR_CD, \
        BRN_CD, \
        CONTRACTNO, \
        SRVORDERNO, \
        CUSTOMERNAME, \
        PHONE, \
        VINNO, \
        MODEL_CD, \
        BUYCARTIME, \
        QUESTION_ANSWER_FLG, \
        QR_CRT_DATETIME, \
        QR_SCAN_FLG, \
        CRT_DATETIME, \
        CRT_USER, \
        UPD_DATETIME, \
        UPD_USER, \
        IS_DEL \
    ) \
    VALUES \
    ( \
        ?, \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        ?, \
        '01', \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
        '0', \
        SYSDATE, \
        '0', \
        SYSDATE, \
        'IBPP', \
        SYSDATE, \
        'IBPP', \
        0 \
    )
sql.selQrCodeInfo.001 = \
SELECT \
  TO_CHAR(SYSDATE,'YYYY-MM-DD HH24:MI:SS') AS CURDATETIME, \
  QR_SCAN_FLG AS QRSCANFLG, \
  TO_CHAR(QR_START_DATETIME,'YYYY-MM-DD HH24:MI:SS') AS QRSTARTDATETIME, \
  TO_CHAR(QR_END_DATETIME,'YYYY-MM-DD HH24:MI:SS') AS QRENDDATETIME \
FROM NRP_QUESTIONNAIRE \
WHERE QR_CODE_SEQ=?
sql.updateQrCodeInfo.001 = \
UPDATE NRP_QUESTIONNAIRE \
SET QR_SCAN_DATETIME = SYSDATE, \
    QR_SCAN_FLG = '1', \
    WECHAT_OPENID = ?, \
    UPD_DATETIME = SYSDATE, \
    UPD_USER = 'IBPP' \
WHERE QR_CODE_SEQ = ?
sql.selQrCodeInfo.002 = \
SELECT \
  WECHAT_OPENID AS WOPENID \
FROM NRP_QUESTIONNAIRE \
WHERE QR_CODE_SEQ=?
sql.selRedPacketInfo.001 = \
SELECT \
  COUNT(1) TOTALCOUNT \
FROM NRP_BRIBERY_MONEY \
WHERE QR_CODE_SEQ=?
sql.insertRedPacketInfo.001 = \
INSERT INTO \
    NRP_BRIBERY_MONEY \
    ( \
        QR_CODE_SEQ, \
        WECHAT_OPENID, \
        BRIBERY_MONEY_AMOUNT, \
        BRIBERY_MONEY_STATUS, \
        CRT_DATETIME, \
        CRT_USER, \
        UPD_DATETIME, \
        UPD_USER, \
        IS_DEL \
    ) \
    VALUES \
    ( \
        ?, \
        ?, \
        ?, \
        '0', \
        SYSDATE, \
        'IBPP', \
        SYSDATE, \
        'IBPP', \
        0 \
    )
sql.selRedPacketInfo.002 = \
SELECT \
  WECHAT_OPENID AS WSOPENID, \
  MCH_BILLNO AS MCHBILLNO, \
  BRIBERY_MONEY_STATUS AS BSTATUS, \
  BRIBERY_MONEY_AMOUNT AS BAMOUNT \
FROM NRP_BRIBERY_MONEY \
WHERE QR_CODE_SEQ=? AND BRIBERY_MONEY_STATUS=? FOR UPDATE NOWAIT
sql.updateRedPacketInfo.001 = \
UPDATE NRP_BRIBERY_MONEY \
SET BRIBERY_MONEY_STATUS = ?, \
    BRIBERY_MONEY_SEND_DATE = CASE WHEN ? IS NULL THEN NULL ELSE SYSDATE END, \
    UPD_DATETIME = SYSDATE, \
    UPD_USER = 'IBPP' \
WHERE QR_CODE_SEQ = ?
sql.updateRedPacketInfo.002 = \
UPDATE NRP_BRIBERY_MONEY \
SET MCH_BILLNO = ?, \
    UPD_DATETIME = SYSDATE, \
    UPD_USER = 'IBPP' \
WHERE QR_CODE_SEQ = ?
sql.updateQrCodeInfo.002 = \
UPDATE NRP_QUESTIONNAIRE \
SET QUESTION_ANSWER_FLG = '1', \
    UPD_DATETIME = SYSDATE, \
    UPD_USER = 'IBPP' \
WHERE QR_CODE_SEQ = ?
sql.updateQrCodeInfo.003 = \
UPDATE NRP_QUESTIONNAIRE \
SET QR_START_DATETIME = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
    QR_END_DATETIME = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
    DLR_CD = ?, \
    CONTRACTNO = ?, \
    SRVORDERNO = ?, \
    CUSTOMERNAME = ?, \
    PHONE = ?, \
    VINNO = ?, \
    MODEL_CD = ?, \
    BUYCARTIME = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    QR_CRT_DATETIME = CASE WHEN ? IS NULL THEN QR_CRT_DATETIME ELSE SYSDATE END, \
    UPD_DATETIME = SYSDATE, \
    UPD_USER = 'IBPP' \
WHERE QR_CODE_SEQ = ?
sql.selQrCodeInfo.003 = \
SELECT \
  QUESTION_ANSWER_FLG AS QUESTIONANSWERFLG, \
  QR_SCAN_FLG AS QRSCANFLG \
FROM NRP_QUESTIONNAIRE \
WHERE QR_CODE_SEQ=?
# Add for:\u95ee\u5377\u8c03\u67e5  xing_lili 20160524 end

# Add for:5\u6708\u4efd\u589e\u6539  xing_lili 20160621 start
sql.selDrivingAppInfo.001 = \
SELECT \
  COUNT(1) TOTALCOUNT \
FROM APP_DRIVINGAPPOINTMENT \
WHERE APPLY_ID=?
sql.insertDrivingAppInfo.001 = \
INSERT INTO \
    APP_DRIVINGAPPOINTMENT \
    ( \
        APPLY_ID, \
        APPLY_TYPE, \
        DEALER_CODE, \
        APPL_START_TIME, \
        CUST_TEL, \
        CUST_NAME, \
        CAR_NO, \
        ROUTE_CODE, \
        CRT_DATETIME, \
        CRT_USER, \
        UPD_DATETIME, \
        UPD_USER, \
        IS_DEL \
    ) \
    VALUES \
    ( \
        ?, \
        ?, \
        ?, \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        ?, \
        ?, \
        ?, \
        ?, \
        SYSDATE, \
        'IBPP', \
        SYSDATE, \
        'IBPP', \
        0 \
    )
sql.updateDrivingAppInfo.001 = \
UPDATE APP_DRIVINGAPPOINTMENT \
SET APPLY_TYPE = ?, \
    DEALER_CODE = ?, \
    APPL_START_TIME = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
    CUST_TEL = ?, \
    CUST_NAME = ?, \
    CAR_NO = ?, \
    ROUTE_CODE = ?, \
    UPD_DATETIME = SYSDATE, \
    UPD_USER = 'IBPP' \
WHERE APPLY_ID = ?
sql.updateDrivingAppInfo.002 = \
UPDATE APP_DRIVINGAPPOINTMENT \
SET APPLY_TYPE = ?, \
    UPD_DATETIME = SYSDATE, \
    UPD_USER = 'IBPP' \
WHERE APPLY_ID = ?
# Add for:5\u6708\u4efd\u589e\u6539  xing_lili 20160621 end

# Modify for:\u6b27\u6d32\u676f\u7ade\u731c\u9879\u76ee\u590f\u5b63\u6d3b\u52a8  xing_lili 20160706 start
# \u6d3b\u52a8\u89c4\u5219\u83b7\u53d6
sql.CoupRule.004 = \
SELECT A.RULE_CODE,A.RULE_VALUE FROM \
BASE_COUPON_RULE A \
WHERE A.EVENT_ID=TRIM(?)
# Modify for:\u6b27\u6d32\u676f\u7ade\u731c\u9879\u76ee\u590f\u5b63\u6d3b\u52a8  xing_lili 20160706 end

##\u83b7\u53d6\u65b0\u8f66\u8ba2\u5355\u8868\u4fe1\u606f
sql.SelTactOrderVehicleInfo.001 = \
SELECT \
MODEL \
,SFX \
,COLORCD \
,COLORNAME \
,VEHICLENAMECODE \
,VEHICLENAME \
,VHCENGINE \
,VHCGRADE \
,VHCMISSION \
,VHCEXHAUST \
FROM \
( \
SELECT \
MODEL \
,SFX \
,COLORCD \
,COLORNAME \
,VEHICLENAMECODE \
,VEHICLENAME \
,VHCENGINE \
,VHCGRADE \
,VHCMISSION \
,VHCEXHAUST \
FROM TACT_ORDER_VEHICLE_BK \
WHERE \
FRAMENO=? \
AND DELETEFLAG='0' \
ORDER BY CONTRACTDATE DESC \
) \
WHERE ROWNUM=1

#Add for:I_Club \u4f1a\u5458\u79ef\u5206\u7ba1\u7406   xing_lili 20160309 start
##\u6839\u636e\u4f1a\u5458\u53f7\u67e5\u8be2\u4f1a\u5458\u662f\u5426\u5b58\u5728
sql.selectUserCoreInfo.001= \
SELECT \
COUNT(*) AS totalCount \
FROM \
USER_CORE WHERE USER_ID=TRIM(?) AND DELETEFLAG='0' 
##\u63d2\u5165\u4f1a\u5458\u4fe1\u606f
sql.newUserCoreInfo.002= \
INSERT INTO USER_CORE(\
USER_ID,\
POINT,\
EXP,\
RANK,\
CREDATE,\
CREUSER,\
UPDATETIME, \
UPDATEUSER, \
DELETEFLAG \
) \
VALUES \
( \
?,\
?,\
?,\
?,\
SYSDATE, \
?, \
SYSDATE, \
?, \
? \
)
##\u66f4\u65b0\u4f1a\u5458\u4fe1\u606f
sql.updateUserCoreInfo.003= UPDATE USER_CORE SET \
POINT = ?, \
EXP = ?, \
RANK = ?, \
UPDATETIME = SYSDATE, \
UPDATEUSER = ?, \
DELETEFLAG = ? \
WHERE USER_ID=TRIM(?)

##\u66f4\u65b0\u4f1a\u5458\u4fe1\u606f
sql.updateUserCoreInfo.004= UPDATE USER_CORE SET \
POINT = ?, \
UPDATETIME = SYSDATE, \
UPDATEUSER = ?, \
DELETEFLAG = ? \
WHERE USER_ID=TRIM(?)
##\u6839\u636e\u4f1a\u5458\u53f7\u67e5\u8be2\u4f1a\u5458\u79ef\u5206\u5931\u6548\u8ba1\u7b97\u662f\u5426\u5b58\u5728
sql.selectUserPointCalInfo.001= \
SELECT \
COUNT(*) AS totalCount \
FROM \
USER_POINT_CAL WHERE USER_ID=TRIM(?) AND DELETEFLAG='0' 
##\u63d2\u5165\u4f1a\u5458\u79ef\u5206\u5931\u6548\u8ba1\u7b97\u4fe1\u606f
sql.newUserPointCalInfo.002= \
INSERT INTO USER_POINT_CAL(\
USER_ID,\
REGIST_YEAR,\
REGIST_MONTH,\
REGIST_DAY,\
RANK_UPDATE_YEAR,\
RANK_UPDATE_MONTH,\
RANK_UPDATE_DAY,\
POINT_LASTTIME,\
DATE_LASTTIME,\
CREDATE,\
CREUSER,\
UPDATETIME, \
UPDATEUSER, \
DELETEFLAG \
) \
VALUES \
( \
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
SYSDATE, \
?, \
SYSDATE, \
?, \
? \
)
##\u66f4\u65b0\u4f1a\u5458\u79ef\u5206\u5931\u6548\u8ba1\u7b97\u4fe1\u606f
sql.updateUserPointCalInfo.003= UPDATE USER_POINT_CAL SET \
REGIST_YEAR = ?, \
REGIST_MONTH = ?, \
REGIST_DAY = ?, \
RANK_UPDATE_YEAR = ?, \
RANK_UPDATE_MONTH = ?, \
RANK_UPDATE_DAY = ?, \
POINT_LASTTIME = ?, \
DATE_LASTTIME = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
UPDATETIME = SYSDATE, \
UPDATEUSER = ?, \
DELETEFLAG = ? \
WHERE USER_ID=TRIM(?)

##\u66f4\u65b0\u4f1a\u5458\u79ef\u5206\u5931\u6548\u8ba1\u7b97\u4fe1\u606f(\u7b49\u7ea7\u5347\u7ea7)
sql.updateUserPointCalInfo.004= UPDATE USER_POINT_CAL SET \
RANK_UPDATE_YEAR = ?, \
RANK_UPDATE_MONTH = ?, \
RANK_UPDATE_DAY = ?, \
UPDATETIME = SYSDATE, \
UPDATEUSER = ?, \
DELETEFLAG = ? \
WHERE USER_ID=TRIM(?)
##\u6839\u636e\u4f1a\u5458\u53f7\u67e5\u8be2\u4f1a\u5458\u4fe1\u606f\u540c\u65f6\u52a0\u9501
sql.selUserCoreInfo.001 = \
SELECT \
POINT AS point, \
EXP AS exp, \
RANK AS rank \
FROM USER_CORE \
WHERE USER_ID=TRIM(?) AND DELETEFLAG='0' FOR UPDATE WAIT 1
##\u83b7\u53d6\u4f1a\u5458\u7b49\u7ea7\u53d8\u66f4\u5c65\u5386
sql.selUserRankChgHisInfo.001 = \
SELECT \
COUNT(*) AS totalCount \
FROM \
USER_RANK_CHG_HIS WHERE USER_ID=TRIM(?) AND DELETEFLG = '0'
##\u63d2\u5165\u4f1a\u5458\u7b49\u7ea7\u53d8\u66f4\u5c65\u5386
sql.newUserRankChgHisInfo.002 = \
INSERT INTO USER_RANK_CHG_HIS(\
ID, \
USER_ID,\
RANK_BEFORE,\
RANK_AFTER,\
CREDATE, \
DELETEFLG \
) \
VALUES \
( \
USER_RANK_CHG_HIS_SEQ.nextval,\
?,\
?,\
?,\
SYSDATE, \
'0' \
)

##\u83b7\u53d6\u4f1a\u5458\u6838\u5fc3\u4fe1\u606f\u53d8\u66f4\u5c65\u5386\u662f\u5426\u5b58\u5728
sql.selUserCoreChgHisInfo.001 = \
SELECT \
COUNT(*) AS totalCount \
FROM \
USER_CORE_CHG_HIS WHERE USER_ID=TRIM(?)
##\u63d2\u5165\u4f1a\u5458\u6838\u5fc3\u4fe1\u606f\u53d8\u66f4\u5c65\u5386
sql.newUserCoreChgHisInfo.002= \
INSERT INTO USER_CORE_CHG_HIS(\
ID,\
USER_ID,\
POINT_CHG_ORG,\
POINT_CHG_ACT,\
POINT_BEFORE,\
EXP_CHG,\
EXP_BEFORE,\
CHG_SOURCE_SYS,\
CHG_SOURCE_MEMO,\
POINT_EXPIRED_COUNT_TARGET,\
POINT_EXPIRED_COUNT_STATE,\
POINT_CHG_RESULT,\
CREDATE,\
CREUSER, \
UPDATETIME, \
UPDATEUSER, \
CONTENT \
) \
VALUES \
( \
USER_CORE_CHG_HIS_SEQ.nextval,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
SYSDATE, \
?, \
SYSDATE, \
?, \
? \
)

##\u6839\u636e\u4f1a\u5458\u53f7\u67e5\u8be2\u4f1a\u5458\u4fe1\u606f
sql.selUserCoreInfo.002 = \
SELECT \
POINT AS point, \
EXP AS exp, \
RANK AS rank \
FROM USER_CORE \
WHERE USER_ID=TRIM(?) AND DELETEFLAG='0'

##\u6839\u636e\u4f1a\u5458\u53f7\u67e5\u8be2\u4f1a\u5458\u7b49\u7ea7\u53d8\u66f4\u5c65\u5386\u4fe1\u606f
sql.selUserRankChgHisInfo.002 = \
SELECT \
RANK_BEFORE AS expBefore, \
RANK_AFTER AS expChg, \
TO_CHAR(CREDATE,'YYYY-MM-DD HH24:MI:SS') AS creDate \
FROM USER_RANK_CHG_HIS \
WHERE USER_ID=TRIM(?) \
AND DELETEFLG = '0'



## (I-club)\u7ef4\u4fee\u8ba2\u5355\u5c65\u5386\u4fe1\u606f (VIN\u548c\u65f6\u95f4\u6233\u90fd\u6709\u503c)
sql.MaintenanceOrderUserInfo.001 = \
SELECT \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    B.SRVTYPENAME AS maintenanceWorkOrderType, \
    A.SRVMEMO AS maintenanceContentSummary, \
    A.DEALERCODE AS dealerCode, \
    A.VINNO AS vin, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD HH24:MI:SS') AS completionDate, \
    A.SACODE AS saCode, \
    C.USERNAME AS saName, \
    A.SALESTOTAL AS cost, \
    A.CUSTCHARGEAMOUNT AS disCount, \
    A.ORDERDATE AS entryTime, \
    A.MILEAGE AS mileage, \
    A.TWCRESULT AS twcresult, \
    A.DELETEFLAG AS deleteflag, \
    A.TWCUSER AS twcUserName, \
    A.TWCTEL1 AS twcTel1, \
    A.TWCTEL2 AS twcTel2, \
    A.TEL_NO AS telNo \
FROM \
    KPI_SRV_ORDER_HISTORY A \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE \
    LEFT JOIN IDM_EMPLOYEE_USERS C ON A.SACODE = C."ACCOUNT" AND A.DEALERCODE = TRIM(C.DLRCODE) AND C.ACCOUNTTYPE='tact' \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON A.VINNO= D.FRAMENO AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.VINNO = TRIM(?) \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN ('D','7') OR A.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')
     
## (I-club)\u7ef4\u4fee\u8ba2\u5355\u5c65\u5386\u4fe1\u606f (VIN\u6709\u503c)
sql.MaintenanceOrderUserInfo.002 = \
SELECT \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    B.SRVTYPENAME AS maintenanceWorkOrderType, \
    A.SRVMEMO AS maintenanceContentSummary, \
    A.DEALERCODE AS dealerCode, \
    A.VINNO AS vin, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD HH24:MI:SS') AS completionDate, \
    A.SACODE AS saCode, \
    C.USERNAME AS saName, \
    A.SALESTOTAL AS cost, \
    A.CUSTCHARGEAMOUNT AS disCount, \
    A.ORDERDATE AS entryTime, \
    A.MILEAGE AS mileage, \
    A.TWCRESULT AS twcresult, \
    A.DELETEFLAG AS deleteflag, \
    A.TWCUSER AS twcUserName, \
    A.TWCTEL1 AS twcTel1, \
    A.TWCTEL2 AS twcTel2, \
    A.TEL_NO AS telNo \
FROM \
    KPI_SRV_ORDER_HISTORY A \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE \
    LEFT JOIN IDM_EMPLOYEE_USERS C ON A.SACODE = C."ACCOUNT" AND A.DEALERCODE = TRIM(C.DLRCODE) AND C.ACCOUNTTYPE='tact' \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON A.VINNO= D.FRAMENO AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.VINNO = TRIM(?) \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN ('D','7') OR A.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE

## (I-club)\u7ef4\u4fee\u8ba2\u5355\u5c65\u5386\u4fe1\u606f (\u65f6\u95f4\u6233\u6709\u503c)
sql.MaintenanceOrderUserInfo.003 = \
SELECT \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    B.SRVTYPENAME AS maintenanceWorkOrderType, \
    A.SRVMEMO AS maintenanceContentSummary, \
    A.DEALERCODE AS dealerCode, \
    A.VINNO AS vin, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD HH24:MI:SS') AS completionDate, \
    A.SACODE AS saCode, \
    C.USERNAME AS saName, \
    A.SALESTOTAL AS cost, \
    A.CUSTCHARGEAMOUNT AS disCount, \
    A.ORDERDATE AS entryTime, \
    A.MILEAGE AS mileage, \
    A.TWCRESULT AS twcresult, \
    A.DELETEFLAG AS deleteflag, \
    A.TWCUSER AS twcUserName, \
    A.TWCTEL1 AS twcTel1, \
    A.TWCTEL2 AS twcTel2, \
    A.TEL_NO AS telNo \
FROM \
    KPI_SRV_ORDER_HISTORY A \
    LEFT JOIN KPI_SRV_SRVTYPE B ON A.TYPICALSRVTYPE = B.SRVTYPE \
    LEFT JOIN IDM_EMPLOYEE_USERS C ON A.SACODE = C."ACCOUNT" AND A.DEALERCODE = TRIM(C.DLRCODE) AND C.ACCOUNTTYPE='tact' \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON A.VINNO= D.FRAMENO AND A.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.UPDATETIME <= SYSDATE \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN ('D','7')  OR A.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')


# (I-club)\u7ef4\u4fee\u9879\u76ee\u5c65\u5386\u4fe1\u606f (VIN\u548c\u65f6\u95f4\u6233\u90fd\u6709\u503c)
sql.MaintenanceProjectUserInfo.001 = \
SELECT \
    A.SRVCODE AS mainMaintenanceProjectCode, \
    A.SRVNAME AS mainMaintenanceProjectName, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.SRVTYPE AS mainMaintenanceProjectType, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_DETAIL_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) AND A.TYPICALSRVTYPE = '1' \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7')  OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')
    
# (I-club)\u7ef4\u4fee\u9879\u76ee\u5c65\u5386\u4fe1\u606f (VIN\u6709\u503c)
sql.MaintenanceProjectUserInfo.002 = \
SELECT \
    A.SRVCODE AS mainMaintenanceProjectCode, \
    A.SRVNAME AS mainMaintenanceProjectName, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.SRVTYPE AS mainMaintenanceProjectType, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_DETAIL_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    B.VINNO = TRIM(?) AND A.TYPICALSRVTYPE = '1' \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7')  OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME <= SYSDATE
    
# (I-club) \u7ef4\u4fee\u9879\u76ee\u5c65\u5386\u4fe1\u606f (\u65f6\u95f4\u6233\u6709\u503c)
sql.MaintenanceProjectUserInfo.003 = \
SELECT \
    A.SRVCODE AS mainMaintenanceProjectCode, \
    A.SRVNAME AS mainMaintenanceProjectName, \
    A.ORDERNO AS maintenanceWorkOrderNum, \
    A.DEALERCODE AS dealerCode, \
    A.SRVTYPE AS mainMaintenanceProjectType, \
    A.DELETEFLAG AS deleteflag \
FROM \
    KPI_SRV_DETAIL_HISTORY A \
    INNER JOIN KPI_SRV_ORDER_HISTORY B ON A.DEALERCODE = B.DEALERCODE AND A.ORDERNO = B.ORDERNO \
    INNER JOIN  (SELECT T.FRAMENO, MAX(T.DELIVERYENDDATE) AS  DELIVERYENDDATE FROM TACT_ORDER_VEHICLE_BK T GROUP BY T.FRAMENO ) D ON B.VINNO= D.FRAMENO AND B.ORDERDATE>D.DELIVERYENDDATE \
WHERE \
    A.UPDATETIME <= SYSDATE AND A.TYPICALSRVTYPE = '1' \
    AND (TRIM(B.TYPICALSRVTYPE) NOT IN('D','7') OR B.TYPICALSRVTYPE IS NULL) \
    AND A.UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS')  
#Add for:I_Club \u4f1a\u5458\u79ef\u5206\u7ba1\u7406   xing_lili 20160309 end

## \u83b7\u53d6\u5f53\u5929\u751f\u65e5\u7684\u7528\u6237
sql.failurePointUser.001 = SELECT USER_ID,POINT_LASTTIME,REGIST_YEAR,REGIST_MONTH,REGIST_DAY \
FROM USER_POINT_CAL \
WHERE REGIST_YEAR < ? AND \
REGIST_MONTH = ? AND \
REGIST_DAY = ? AND \
DELETEFLAG = 0 
## \u67e5\u8be2\u7528\u6237\u79ef\u5206
sql.failurePointUser.002 = SELECT POINT \
FROM USER_CORE \
WHERE USER_ID = ?


#Add for:\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f\u4fdd\u5b58/\u4fee\u6539   xing_lili 20160927 start
#APP\u6839\u636e\u5ba2\u6237\u7f16\u53f7\u67e5\u627e\u7edf\u5408\u7ba1\u7406ID
sql.getUserRelation.001 = SELECT UID_GTMC, \
TEL_NO \
FROM USER_LOGIN \
WHERE USER_ID = ? \
AND SYS_CD = ?

#\u67e5\u8be2\u8f66\u8f86\u4fe1\u606f\u662f\u5426\u5b58\u5728
sql.getVehicleInfo.001 = \
SELECT \
    COUNT(1) AS count \
FROM \
    USER_CAR \
WHERE \
    UID_GTMC = TRIM(?) AND \
    VINNO = TRIM(?)

#\u67e5\u8be2\u5df2\u7ed1\u5b9a\u7684\u8f66\u8f86\u662f\u5426\u5b58\u5728
sql.getVehicleInfo.003 = \
SELECT \
    COUNT(1) AS count, \
    MAX(DELETEFLAG) AS DELETEFLAG \
FROM \
    USER_CAR \
WHERE \
    UID_GTMC = TRIM(?) AND \
    VINNO = TRIM(?)

#Modify sql\u4f18\u5316 \u53bb\u6389trim by shen_kang 20170809 start
#\u67e5\u8be2\u8f66\u8f86\u4fe1\u606f\u63a8\u7ed9ICROP
sql.getVehicleInfo.002 = \
SELECT \
    L.USER_ID AS userId, \
    VINNO AS vin, \
    REGISTERNO AS licenseNo, \
    VEHICLE_VALIDATE_DATE AS vehicleDate, \
    MAINTAIN_SET AS maintainSet, \
    INSURANCE_EFFECTIVE_DATE AS insuranceEffectiveDate, \
    INSURER AS insurer \
FROM \
    USER_CAR C \
    INNER JOIN USER_LOGIN L ON C.UID_GTMC= L.UID_GTMC AND C.DELETEFLAG='0' \
WHERE \
    C.UID_GTMC = ? AND \
    VINNO = ?
#Modify sql\u4f18\u5316 \u53bb\u6389trim by shen_kang 20170809 end
#\u4fdd\u5b58\u8f66\u8f86\u4fe1\u606f
#Mod for user_base_info update zhang_lei 20170114 start
sql.saveVehicleInfo.001 = INSERT INTO \
USER_CAR \
( \
    UID_GTMC, \
    VINNO, \
    REGISTERNO, \
    CAR_NICKNAME, \
    INSURER, \
    INSURANCE_START_DATE, \
    INSURANCE_END_DATE, \
    EXAMINE_DATE, \
    INSURANCE_EFFECTIVE_DATE, \
    VEHICLE_VALIDATE_DATE, \
    MAINTAIN_SET, \
    MILEAGE_USER_SET, \
    CREDATE, \
    UPDATETIME, \
    DELETEFLAG, \
    UPD_USER \
) \
VALUES \
( \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
    ?, \
    ?, \
    SYSDATE, \
    SYSDATE, \
    ?, \
    ? \
)
#Mod for user_base_info update zhang_lei 20170114 end
#\u66f4\u65b0\u8f66\u8f86\u4fe1\u606f
#Mod for user_base_info update zhang_lei 20170114 start
sql.updateVehicleInfo.002 = \
UPDATE \
    USER_CAR \
SET \
    BIND_SRC_SYS = ?, \
    UPDATETIME = SYSDATE , \
    UPD_USER = ? , \
    DELETEFLAG = ? \
WHERE \
    UID_GTMC = TRIM(?) AND \
    VINNO = TRIM(?)
#Mod for user_base_info update zhang_lei 20170114 end 
#\u7ed1\u5b9a\u8f66\u8f86\u4fe1\u606f
#Mod for user_base_info update zhang_lei 20170114 start
sql.saveVehicleInfo.002 = INSERT INTO \
USER_CAR \
( \
    UID_GTMC, \
    VINNO, \
    BIND_SRC_SYS, \
    CREDATE, \
    UPDATETIME, \
    DELETEFLAG, \
    UPD_USER \
) \
VALUES \
( \
    ?, \
    ?, \
    ?, \
    SYSDATE, \
    SYSDATE, \
    ?, \
    ? \
)
#Mod for user_base_info update zhang_lei 20170114 end
#\u6839\u636e\u624b\u673a\u53f7\u53ca\u7cfb\u7edf\u6240\u5c5eCD\u83b7\u53d6\u8d26\u53f7\u4fe1\u606f
sql.getUserInfo.001 = \
SELECT UID_GTMC,SYS_CD,USER_ID \
FROM USER_LOGIN \
WHERE TEL_NO = ?

#\u6839\u636e\u624b\u673a\u53f7\u7801\u67e5\u8be2\u7528\u6237\u4fe1\u606f
sql.getUserInfo.003 = \
SELECT UID_GTMC,SYS_CD,USER_ID,ACTIVATE_FLG \
FROM USER_LOGIN \
WHERE TEL_NO = ? \
ORDER BY SYS_CD

#\u6839\u636e\u6240\u5c5e\u7cfb\u7edfCD\u548c\u7528\u6237ID\u83b7\u53d6\u8d26\u53f7\u4fe1\u606f
sql.getUserInfo.002 = \
SELECT UID_GTMC,TEL_NO \
FROM USER_LOGIN \
WHERE USER_ID = ? AND SYS_CD = ? 

#\u6839\u636e\u624b\u673a\u53f7\u53ca\u7cfb\u7edf\u6240\u5c5eCD\u83b7\u53d6\u8d26\u53f7\u4fe1\u606f
sql.getUserInfo.004 = \
SELECT UID_GTMC,SYS_CD,USER_ID \
FROM USER_LOGIN \
WHERE TEL_NO = ? \
AND SYS_CD = ?

#\u83b7\u5f97\u5e8f\u5217
sql.getSeqValInfo.001 = \
SELECT USER_LOGIN_SEQ.nextval AS userseq \
FROM DUAL
#\u4fdd\u5b58\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f
sql.saveUserInfo.001 = INSERT INTO \
USER_LOGIN \
( \
   SYS_CD, \
   USER_ID, \
   UID_GTMC, \
   TEL_NO, \
   PWD, \
   ACTIVATE_FLG, \
   CREDATE, \
   UPDATETIME, \
   DELETEFLAG, \
   UPD_USER \
) \
VALUES \
( \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    SYSDATE, \
    SYSDATE, \
    ?, \
    ? \
)
#\u67e5\u8be2\u8f66\u4e3b\u4fe1\u606f\u662f\u5426\u5b58\u5728
sql.getUserBaseInfo.001 = \
SELECT \
    COUNT(1) AS count \
FROM \
    USER_BASE_INFO \
WHERE \
    UID_GTMC = ?
#\u67e5\u8be2\u8f66\u4e3b\u4fe1\u606f
sql.getUserBaseInfo.002 = \
SELECT \
    NAME AS userName, \
    DRIVING_LICENSE_EXPIRY_DATE AS driverDate, \
    ADDRESS_DETAIL AS address \
FROM \
    USER_BASE_INFO \
WHERE \
    UID_GTMC = ?
#\u4fdd\u5b58\u8f66\u4e3b\u4fe1\u606f
sql.saveUserBaseInfo.001 = INSERT INTO \
USER_BASE_INFO \
( \
    UID_GTMC, \
    NAME, \
    SEX, \
    BIRTHDAY_YEAR, \
    BIRTHDAY_MONTH, \
    BIRTHDAY_DAY, \
    AVATAR_IMG_GCLUB, \
    AVATAR_IMG_ICLUB, \
    ADDRESS_PROVINCE, \
    ADDRESS_CITY, \
    ADDRESS_DETAIL, \
    DEALER_CODE, \
    DRIVING_LICENSE_EXPIRY_DATE, \
    APIREGISTER, \
    REGIST_DATE_GCLUB, \
    REGIST_DATE_ICLUB, \
    WX_CODE, \
    NICKNAME, \
    USER_TYPE, \
    IDENTITY_CARD, \
    RECOMMENDED_NAME, \
    REGIST_FROM_TYPE, \
    REGIST_FROM_CD, \
    STATUS, \
    LOGIN_COUNT_ICLUB, \
    LAST_LOGIN_DATE_ICLUB, \
    LOGIN_FAIL_COUNT_ICLUB, \
    LOGIN_COUNT_GCLUB, \
    LAST_LOGIN_DATE_GCLUB, \
    LOGIN_FAIL_COUNT_GCLUB, \
    DEVICE_ID, \
    APP_VERSION, \
    APP_OS_TYPE, \
    CRT_DATETIME, \
    CRT_USER, \
    UPD_DATETIME, \
    UPD_USER \
) \
VALUES \
( \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    SYSDATE, \
    ?, \
    SYSDATE, \
    ? \
)
#Add for:\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f\u4fdd\u5b58/\u4fee\u6539   xing_lili 20160927 end

#Add for:\u83b7\u53d6\u4f1a\u5458\u6838\u5fc3\u5c65\u5386\u4fe1\u606f\uff082016-11-20\u4e0a\u7ebf\uff09   xing_lili 20161102 start
#\u83b7\u53d6\u4f1a\u5458\u6838\u5fc3\u4fe1\u606f
sql.UserCoreInfo.001 = \
SELECT \
USER_ID AS userId, \
POINT AS point, \
EXP AS exp, \
RANK AS rank, \
CREDATE AS creDate, \
CREUSER AS creUser, \
UPDATETIME AS updateTime, \
UPDATEUSER AS updateUser, \
DELETEFLAG AS deleteFlag \
FROM USER_CORE \
WHERE UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
ORDER BY UPDATETIME ASC
#\u83b7\u53d6\u4f1a\u5458\u79ef\u5206\u5931\u6548\u8ba1\u7b97\u4fe1\u606f
sql.UserPointCalInfo.001 = \
SELECT \
USER_ID AS userId, \
REGIST_YEAR AS registYear, \
REGIST_MONTH AS registMonth, \
REGIST_DAY AS registDay, \
RANK_UPDATE_YEAR AS rankUpdateYear, \
RANK_UPDATE_MONTH AS rankUpdateMonth, \
RANK_UPDATE_DAY AS rankUpdateDay, \
POINT_LASTTIME AS pointLasttime, \
DATE_LASTTIME AS dateLasttime, \
CREDATE AS creDate, \
CREUSER AS creUser, \
UPDATETIME AS updateTime, \
UPDATEUSER AS updateUser, \
DELETEFLAG AS deleteFlag \
FROM USER_POINT_CAL \
WHERE UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
ORDER BY UPDATETIME ASC
#\u83b7\u53d6\u4f1a\u5458\u6838\u5fc3\u4fe1\u606f\u53d8\u66f4\u5c65\u5386\u4fe1\u606f
sql.UserCoreChgHisInfo.001 = \
SELECT \
ID AS seqId, \
USER_ID AS userId, \
POINT_CHG_ORG AS pointChgOrg, \
POINT_CHG_ACT AS pointChgAct, \
POINT_BEFORE AS pointBefore, \
EXP_CHG AS expChg, \
EXP_BEFORE AS expBefore, \
CHG_SOURCE_SYS AS chgSourceSys, \
CHG_SOURCE_MEMO AS chgSourceMemo, \
POINT_EXPIRED_COUNT_TARGET AS pointExpiredCountTarget, \
POINT_EXPIRED_COUNT_STATE AS pointExpiredCountState, \
POINT_CHG_RESULT AS pointChgResult, \
CREDATE AS creDate, \
CREUSER AS creUser, \
UPDATETIME AS updateTime, \
UPDATEUSER AS updateUser, \
ORDER_NO AS orderNo, \
CONTENT AS content \
FROM USER_CORE_CHG_HIS \
WHERE UPDATETIME >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
ORDER BY UPDATETIME ASC
#\u83b7\u53d6\u4f1a\u5458\u7b49\u7ea7\u53d8\u66f4\u5c65\u5386\u4fe1\u606f
sql.UserRankChgHisInfo.001 = \
SELECT \
ID AS seqId, \
USER_ID AS userId, \
RANK_BEFORE AS expBefore, \
RANK_AFTER AS expChg, \
CREDATE AS creDate, \
DELETEFLG AS deleteFlg \
FROM USER_RANK_CHG_HIS \
WHERE CREDATE >= TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
ORDER BY CREDATE ASC
#AND DELETEFLG = '0'
#Add for:\u83b7\u53d6\u4f1a\u5458\u6838\u5fc3\u5c65\u5386\u4fe1\u606f\uff082016-11-20\u4e0a\u7ebf\uff09   xing_lili 20161102 end
#Add for:\u7535\u5546\u7cfb\u7edf\u8fde\u643a huang_yeguang 20161123 start
sql.EBUserRegister.001 = INSERT INTO \
USER_LOGIN \
( \
   SYS_CD, \
   USER_ID, \
   UID_GTMC, \
   TEL_NO, \
   PWD, \
   ACTIVATE_FLG, \
   CREDATE, \
   UPDATETIME, \
   DELETEFLAG, \
   UPD_USER \
) \
VALUES \
( \
    ?, \
    EB_USER_LOGIN_SEQ.nextval, \
    USER_LOGIN_SEQ.nextval, \
    ?, \
    ?, \
    ?, \
    SYSDATE, \
    SYSDATE, \
    ?, \
    ? \
)
sql.EBUserRegister.003 = INSERT INTO \
USER_LOGIN \
( \
   SYS_CD, \
   USER_ID, \
   UID_GTMC, \
   TEL_NO, \
   PWD, \
   ACTIVATE_FLG, \
   CREDATE, \
   UPDATETIME, \
   DELETEFLAG, \
   UPD_USER \
) \
VALUES \
( \
    ?, \
    EB_USER_LOGIN_SEQ.nextval, \
    ?, \
    ?, \
    ?, \
    ?, \
    SYSDATE, \
    SYSDATE, \
    ?, \
    ? \
)
sql.EBUserRegister.002 = INSERT INTO \
USER_BASE_INFO \
( \
    UID_GTMC, \
    RECOMMENDED_NAME, \
    REGIST_FROM_TYPE, \
    REGIST_FROM_CD, \
    CRT_DATETIME, \
    CRT_USER, \
    UPD_USER \
) \
VALUES \
( \
    ?, \
    ?, \
    ?, \
    ?, \
    SYSDATE, \
    ?, \
    ? \
)
sql.EBUserLogin.001 = SELECT USER_ID \
,ACTIVATE_FLG \
FROM USER_LOGIN \
WHERE TEL_NO = ? \
AND UPPER(PWD) = UPPER(?) \
FOR UPDATE NOWAIT
#\u4fee\u6539\u5bc6\u7801\u9501\u5b9a\u6570\u636e
sql.EBUserForUpdate.001 = SELECT USER_ID \
,ACTIVATE_FLG \
FROM USER_LOGIN \
WHERE TEL_NO = ? \
FOR UPDATE NOWAIT
#\u4fee\u6539\u5bc6\u7801
sql.EBUserForUpdate.002 = UPDATE \
    USER_LOGIN \
SET \
    PWD = ?, \
    UPDATETIME = SYSDATE, \
    UPD_USER = ? \
WHERE \
    TEL_NO = ?

sql.EBUserLogin.002 =  \
SELECT \
    UA.UID_GTMC, \
    UB.LOGIN_FAIL_COUNT_ICLUB, \
    UB.UPD_DATETIME \
FROM \
    USER_LOGIN UA \
    LEFT JOIN USER_BASE_INFO UB \
ON \
    UA.UID_GTMC = UB.UID_GTMC \
WHERE \
    UA.TEL_NO = ?  \
ORDER BY UB.LOGIN_FAIL_COUNT_ICLUB DESC
    
sql.EBUserLogin.003 = \
UPDATE \
    USER_BASE_INFO \
SET \
    LOGIN_FAIL_COUNT_ICLUB = ? \
    ,UPD_DATETIME = SYSDATE \
    ,UPD_USER = ? \
WHERE \
    UID_GTMC = ?
    
sql.EBUserLogin.004 = \
SELECT \
    LOGIN_FAIL_COUNT_ICLUB \
    FROM USER_BASE_INFO \
WHERE \
    UID_GTMC = ? FOR UPDATE NOWAIT
    
sql.EBUserLogin.005 = \
SELECT \
    COUPON_CONTENT_GUID, \
    CARD_ID, \
    EVENT_ID, \
    OPEN_ID, \
    GZH_HASH, \
    DEALER_CODE, \
    COUPON_STATUS, \
    TYPE_ID, \
    COUPON_CONTENT, \
    COUPON_RULE, \
    COUPON_BEGIN, \
    COUPON_END, \
    SRV_ORDER_NO, \
    VIN_NO, \
    SFX_CODE, \
    CHECK_MODEL, \
    USE_STATUS, \
    CREATED_ON, \
    CREATED_BY, \
    MODIFY_ON, \
    MODIFY_BY, \
    UPDATE_COUNT, \
    DEL_FLAG, \
    USER_NAME, \
    USER_NUMBER, \
    COUPON_KBN \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    TRIM(EVENT_ID) = TRIM(?) \
    AND TRIM(COUPON_STATUS) = TRIM(?) \
    AND OPEN_ID IS NULL \
    AND COUPON_KBN = ?
  
sql.UpdateActivateFlg.001 = \
UPDATE \
	USER_LOGIN \
SET \
	ACTIVATE_FLG = ?, \
	UPDATETIME = SYSDATE, \
	UPD_USER = ? \
WHERE \
	SYS_CD = ? \
	AND USER_ID = ?		  
    
#modify \u62c9\u53d6\u8f66\u8f86\u4fe1\u606f\u65f6\u52a0\u4e0adeleteflag\u5224\u65ad by shen_kang start
sql.EBUserInfo.001 = \
SELECT \
    UA.TEL_NO AS TEL_NO, \
    UPPER(UA.PWD) AS PWD, \
    UB.NAME AS NAME, \
    UB.SEX AS SEX, \
    UB.BIRTHDAY_YEAR AS BIRTHDAY_YEAR, \
    UB.BIRTHDAY_MONTH AS BIRTHDAY_MONTH, \
    UB.BIRTHDAY_DAY AS BIRTHDAY_DAY, \
    UB.AVATAR_IMG_ICLUB AS AVATAR_IMG_ICLUB, \
    UB.ADDRESS_PROVINCE AS ADDRESS_PROVINCE, \
    UB.ADDRESS_CITY AS ADDRESS_CITY, \
    UB.ADDRESS_DETAIL AS ADDRESS_DETAIL, \
    TO_CHAR(UB.DRIVING_LICENSE_EXPIRY_DATE, 'yyyy-mm-dd') AS DRIVING_LICENSE_EXPIRY_DATE, \
    UB.NICKNAME AS NICKNAME, \
    UC.VINNO AS VINNO, \
    UC.REGISTERNO AS REGISTERNO, \
    TO_CHAR(UC.INSURANCE_EFFECTIVE_DATE, 'yyyy-mm-dd') AS INSURANCE_EFFECTIVE_DATE, \
    TO_CHAR(UC.VEHICLE_VALIDATE_DATE, 'yyyy-mm-dd') AS VEHICLE_VALIDATE_DATE, \
    UD.POINT AS POINT \
FROM \
    USER_LOGIN UA LEFT JOIN USER_CAR UC ON UA.UID_GTMC = UC.UID_GTMC AND UC.DELETEFLAG = 0 \
    LEFT JOIN USER_BASE_INFO UB ON UA.UID_GTMC = UB.UID_GTMC \
    LEFT JOIN USER_CORE UD \
       ON UD.USER_ID = UA.USER_ID \
       AND UD.DELETEFLAG = 0 \
WHERE \
    UA.UID_GTMC = ? 
#modify \u62c9\u53d6\u8f66\u8f86\u4fe1\u606f\u65f6\u52a0\u4e0adeleteflag\u5224\u65ad by shen_kang end
    
sql.newEBUserCoreChgHisInfo.002= \
INSERT INTO USER_CORE_CHG_HIS(\
ID,\
USER_ID,\
POINT_CHG_ORG,\
POINT_CHG_ACT,\
POINT_BEFORE,\
EXP_CHG,\
EXP_BEFORE,\
CHG_SOURCE_SYS,\
CHG_SOURCE_MEMO,\
POINT_EXPIRED_COUNT_TARGET,\
POINT_EXPIRED_COUNT_STATE,\
POINT_CHG_RESULT,\
CREDATE,\
CREUSER, \
UPDATETIME, \
UPDATEUSER, \
DEPARTMENT, \
SUB_DEPARTMENT \
) \
VALUES \
( \
USER_CORE_CHG_HIS_SEQ.nextval,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
SYSDATE, \
?, \
SYSDATE, \
?, \
?, \
? \
)

#Add for:\u7535\u5546\u7cfb\u7edf\u8fde\u643a huang_yeguang 20161123 end==============
#Add for:\u7535\u5546TACT\u4f18\u60e0\u5238\u672a\u9886\u53d6\u6570\u91cf   yuan_yumei 20161124 start
sql.LeftEBCoupon.001 =  \
SELECT \
    Count(*) COUNT \
FROM \
    WX_COUPON_CONTENT WC \
WHERE \
    TRIM(WC.EVENT_ID) = TRIM(?) \
AND WC.OPEN_ID = ? \
AND WC.COUPON_KBN = ?

sql.LeftEBCoupon.002 =  \
SELECT \
    Count(*) COUNT \
FROM \
    WX_COUPON_CONTENT WC \
WHERE \
    TRIM(WC.EVENT_ID) = TRIM(?) \
AND WC.OPEN_ID IS NULL \
AND WC.COUPON_KBN = ?

sql.LeftEBCoupon.003 =  \
SELECT \
    Count(*) COUNT \
FROM \
    TACT_SALES_COUPON_CONTENT WC \
WHERE \
    WC.EVENT_ID = TRIM(?) \
AND WC.OPEN_ID = ? 

sql.LeftEBCoupon.004 =  \
SELECT \
    Count(*) COUNT \
FROM \
    TACT_SALES_COUPON_CONTENT WC \
WHERE \
    WC.EVENT_ID = TRIM(?) \
AND WC.OPEN_ID IS NULL

sql.LeftEBCoupon.005 =  \
SELECT \
    Count(*) COUNT \
FROM \
    TACT_SALES_COUPON_CONTENT WC \
WHERE \
    WC.EVENT_ID IS NULL \
AND WC.OPEN_ID = ? 

sql.LeftEBCoupon.006 =  \
SELECT \
    Count(*) COUNT \
FROM \
    TACT_SALES_COUPON_CONTENT WC \
WHERE \
    WC.EVENT_ID IS NULL \
AND WC.OPEN_ID IS NULL 

sql.LeftEBCoupon.007 =  \
SELECT \
    Count(*) COUNT \
FROM \
    WX_COUPON_CONTENT WC \
WHERE \
    WC.EVENT_ID IS NULL \
AND WC.OPEN_ID = ? \
AND WC.COUPON_KBN = ?

sql.LeftEBCoupon.008 =  \
SELECT \
    Count(*) COUNT \
FROM \
    WX_COUPON_CONTENT WC \
WHERE \
    WC.EVENT_ID IS NULL \
AND WC.OPEN_ID IS NULL \
AND WC.COUPON_KBN = ?
#Add for:\u7535\u5546TACT\u4f18\u60e0\u5238\u672a\u9886\u53d6\u6570\u91cf   yuan_yumei 20161124 end
#Add for:\u7535\u5546\u4f1a\u5458\u79ef\u5206\u5c65\u5386\u67e5\u8be2   yuan_yumei 20161124 start
sql.selUIDByGTMC.001 = \
SELECT \
    USER_ID \
FROM \
    USER_LOGIN \
WHERE \
    UID_GTMC = ?

sql.EBUserPointHisInfo.001 =  \
SELECT \
    POINT_CHG_ACT, \
    POINT_BEFORE, \
    EXP_CHG, \
    EXP_BEFORE, \
    CHG_SOURCE_SYS, \
    CHG_SOURCE_MEMO, \
    TO_CHAR(CREDATE , 'yyyy-mm-dd hh24:mi:ss')  CREDATE \
FROM \
    USER_CORE_CHG_HIS  \
WHERE  \
    USER_ID = ?  \
AND POINT_EXPIRED_COUNT_TARGET = ?  \
AND POINT_EXPIRED_COUNT_STATE = ?  \
AND POINT_CHG_RESULT = ?  \
AND CREDATE >= TO_DATE (?, 'YYYY-MM-DD')  \
AND CREDATE <= TO_DATE (?, 'YYYY-MM-DD') 
#Add for:\u7535\u5546\u4f1a\u5458\u79ef\u5206\u5c65\u5386\u67e5\u8be2   yuan_yumei 20161124 end
#Add for:\u7535\u5546\u4f1a\u5458\u4fe1\u606f\u66f4\u65b0 jiao_jianying 20161125 start
sql.SelectEBUserInfo.001 = \
SELECT \
	SYS_CD, \
	USER_ID \
FROM \
	USER_LOGIN \
WHERE \
	UID_GTMC = ? \
FOR UPDATE NOWAIT
	
sql.UpdateEBUserInfo.001 = \
UPDATE \
	USER_LOGIN \
SET \
	TEL_NO = ?,\
	PWD = ?, \
	UPDATETIME = SYSDATE, \
	UPD_USER = ? \
WHERE \
	UID_GTMC = ?
 	
sql.UpdateEBUserInfo.002 = \
UPDATE \
	USER_BASE_INFO \
SET \
	NAME= ?, \
	SEX= ?, \
	BIRTHDAY_YEAR = ?, \
	BIRTHDAY_MONTH = ?, \
	BIRTHDAY_DAY = ?, \
	AVATAR_IMG_ICLUB= ?, \
	ADDRESS_PROVINCE= ?, \
	ADDRESS_CITY= ?, \
	ADDRESS_DETAIL = ?, \
	DRIVING_LICENSE_EXPIRY_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END,\
	NICKNAME = ?, \
	UPD_USER = '\u7535\u5546', \
	UPD_DATETIME = SYSDATE \
WHERE \
	UID_GTMC = ?	

sql.UpdateEBUserInfo.003 = \
UPDATE \
	USER_CAR \
SET \
	REGISTERNO = ?, \
	INSURANCE_EFFECTIVE_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
	VEHICLE_VALIDATE_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
	UPDATETIME = SYSDATE, \
	UPD_USER = ? \
WHERE \
	UID_GTMC = ? \
	AND VINNO = ?	
	
sql.SelectCarInfo.001 = \
SELECT \
	UID_GTMC, \
	VINNO \
FROM \
	USER_CAR \
WHERE \
	UID_GTMC = ? \
	AND VINNO = ? 
	
sql.InsertEBUserCarInfo.001 = \
INSERT INTO \
    USER_CAR \
    ( \
        UID_GTMC, \
        VINNO, \
        REGISTERNO, \
        INSURANCE_START_DATE, \
        VEHICLE_VALIDATE_DATE, \
        CREDATE, \
        DELETEFLAG, \
        UPD_USER, \
        UPDATETIME \
    ) \
    VALUES \
    ( \
        ?, \
        ?, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
        SYSDATE, \
        0, \
        ?, \
        SYSDATE \
    )	
#Add for:\u7535\u5546\u4f1a\u5458\u4fe1\u606f\u66f4\u65b0 jiao_jianying 20161125 end

#Add for APP\u8f66\u4e3b\u4fe1\u606f\u540c\u6b65\u81f3EIP jiao_jianying 20161228 start
#Mod for user_base_info update pengnj 20170117 start
sql.updateActiveFlag.001 = \
UPDATE \
    USER_LOGIN \
SET \
    ACTIVATE_FLG = ?, \
    UPDATETIME=SYSDATE, \
    UPD_USER = ? \
WHERE \
    TEL_NO = ? 
#Mod for user_base_info update pengnj 20170117 end
    
#Mod for user_base_info update zhang_lei 20170114 start
sql.updatePassword.001 = \
UPDATE \
    USER_LOGIN \
SET \
    PWD = ?, \
    UPD_USER = ?, \
    UPDATETIME=SYSDATE \
WHERE \
    TEL_NO = ? 
#Mod for user_base_info update zhang_lei 20170114 end
#Add for APP\u8f66\u4e3b\u4fe1\u606f\u540c\u6b65\u81f3EIP jiao_jianying 20161228 end
#Add for App\u4f1a\u5458\u79ef\u5206\u83b7\u53d6\u63a5\u53e3 20170102 jiao_jianying start
#\u6839\u636e\u6240\u5c5e\u7cfb\u7edfCD\u548c\u624b\u673a\u53f7\u7801\u67e5\u8be2APP\u7528\u6237\u7684\u8d26\u53f7\u4fe1\u606f
sql.selAppUserInfo.001 = \
SELECT \
    USER_ID \
    ,UID_GTMC \
    ,ACTIVATE_FLG \
FROM \
    USER_LOGIN \
WHERE \
    SYS_CD = ? \
    AND TEL_NO = ? \
    AND DELETEFLAG = '0'
#\u4f1a\u5458\u79ef\u5206\u4fe1\u606f\u63a8\u9001
sql.selAppUserPointInfo.001 = \
SELECT \
    UC.POINT AS POINT, \
    UC.EXP AS EXP, \
    UC.RANK AS RANK \
FROM \
    USER_CORE UC \
WHERE \
    UC.USER_ID = ? \
    AND UC.DELETEFLAG ='0'
#Add for App\u4f1a\u5458\u79ef\u5206\u83b7\u53d6\u63a5\u53e3 20170102 jiao_jianying end
#Add for:\u7535\u5546\u6d3b\u52a8\u4f18\u60e0\u5238\u9886\u53d6\u63a5\u53e3 YQ 20161206 Start
#\u7535\u5546\u5e73\u53f0\u9886\u53d6\u6307\u5b9a\u6d3b\u52a8ID\u7684\u7b2c\u4e09\u65b9\u4f18\u60e0\u5238
sql.SelectEBEventCouponInfo.001 = \
SELECT \
  COUPON_CONTENT_GUID \
  , CARD_ID \
  , COUPON_ID \
  , TRIM(EVENT_ID) AS EVENT_ID \
  , OPEN_ID \
  , GZH_HASH \
  , DEALER_CODE \
  , TRIM(COUPON_STATUS) AS COUPON_STATUS \
  , TRIM(TYPE_ID) AS TYPE_ID \
  , COUPON_CONTENT \
  , COUPON_RULE \
  , COUPON_BEGIN \
  , COUPON_END \
  , SRV_ORDER_NO \
  , VIN_NO \
  , TRIM(SFX_CODE) AS SFX_CODE \
  , TRIM(CHECK_MODEL) AS CHECK_MODEL \
  , TRIM(USE_STATUS) AS USE_STATUS \
  , CREATED_ON \
  , CREATED_BY \
  , MODIFY_ON \
  , MODIFY_BY \
  , UPDATE_COUNT \
  , DEL_FLAG \
  , USER_NAME \
  , USER_NUMBER \
  , UPDATE_ON \
  , SYSTEM_ID \
  , COUPON_KBN \
FROM \
  WX_COUPON_CONTENT \
WHERE \
  TRIM(EVENT_ID) = ? \
AND TRIM(COUPON_STATUS) = ? \
AND COUPON_KBN = ? \
ORDER BY \
  COUPON_CONTENT_GUID ASC \
FOR UPDATE NOWAIT

#\u7535\u5546\u5e73\u53f0\u9886\u53d6\u6307\u5b9a\u6d3b\u52a8ID\u7684TACT\u4f18\u60e0\u5238
sql.SelectEBEventCouponInfo.002 = \
SELECT * FROM ( \
SELECT \
  COUPON_CONTENT_GUID \
  , CARD_ID \
  , COUPON_ID \
  , TRIM(EVENT_ID) AS EVENT_ID \
  , OPEN_ID \
  , GZH_HASH \
  , DEALER_CODE \
  , TRIM(COUPON_STATUS) AS COUPON_STATUS \
  , TRIM(TYPE_ID) AS TYPE_ID \
  , COUPON_CONTENT \
  , COUPON_RULE \
  , COUPON_BEGIN \
  , COUPON_END \
  , SRV_ORDER_NO \
  , VIN_NO \
  , TRIM(SFX_CODE) AS SFX_CODE \
  , TRIM(CHECK_MODEL) AS CHECK_MODEL \
  , TRIM(USE_STATUS) AS USE_STATUS \
  , CREATED_ON \
  , CREATED_BY \
  , MODIFY_ON \
  , MODIFY_BY \
  , UPDATE_COUNT \
  , DEL_FLAG \
  , USER_NAME \
  , USER_NUMBER \
  , UPDATE_ON \
  , SYSTEM_ID \
  , COUPON_KBN \
FROM \
  WX_COUPON_CONTENT \
WHERE \
  TRIM(EVENT_ID) = ? \
AND TRIM(COUPON_STATUS) = ? \
AND COUPON_KBN = ? \
AND OPEN_ID IS NULL \
ORDER BY \
  COUPON_CONTENT_GUID ASC \
) \
WHERE \
  ROWNUM BETWEEN 0 AND ?

#\u5f53\u7535\u5546\u5e73\u53f0\u4e0d\u6307\u5b9a\u6d3b\u52a8ID\u7684\u573a\u5408\uff0c\u67e5\u8be2\u6307\u5b9a\u7528\u6237\u6240\u5c5eTACT\u4f18\u60e0\u5238\u72b6\u6001
sql.SelectEBEventCouponInfo.003 = \
SELECT \
  COUPON_CONTENT_GUID \
  , CARD_ID \
  , COUPON_ID \
  , TRIM(EVENT_ID) AS EVENT_ID \
  , OPEN_ID \
  , GZH_HASH \
  , DEALER_CODE \
  , TRIM(COUPON_STATUS) AS COUPON_STATUS \
  , TRIM(TYPE_ID) AS TYPE_ID \
  , COUPON_CONTENT \
  , COUPON_RULE \
  , COUPON_BEGIN \
  , COUPON_END \
  , SRV_ORDER_NO \
  , VIN_NO \
  , TRIM(SFX_CODE) AS SFX_CODE \
  , TRIM(CHECK_MODEL) AS CHECK_MODEL \
  , TRIM(USE_STATUS) AS USE_STATUS \
  , CREATED_ON \
  , CREATED_BY \
  , MODIFY_ON \
  , MODIFY_BY \
  , UPDATE_COUNT \
  , DEL_FLAG \
  , USER_NAME \
  , USER_NUMBER \
  , UPDATE_ON \
  , SYSTEM_ID \
  , COUPON_KBN \
FROM \
  WX_COUPON_CONTENT \
WHERE \
  OPEN_ID = ? \
AND COUPON_KBN = ? \
ORDER BY \
  COUPON_CONTENT_GUID ASC

#\u9886\u53d6\u6210\u529f\u540e\uff0c\u5c06\u8be5\u5f20\u88ab\u9886\u53d6\u4f18\u60e0\u5238\u7684OPEN_ID\u66f4\u65b0\u9501\u8868\u7528
sql.SelectEBEventCouponInfoForUp.004 = \
SELECT \
  1 \
FROM \
  WX_COUPON_CONTENT \
WHERE \
  COUPON_CONTENT_GUID = ? \
FOR UPDATE NOWAIT

#\u7b2c\u4e09\u65b9\u4f18\u60e0\u5238\u88ab\u7535\u5546\u5e73\u53f0\u4e00\u6b21\u6027\u5168\u90e8\u9886\u53d6\u5b8c\u6bd5\u540e\uff0c\u88ab\u9886\u53d6\u7b2c\u4e09\u65b9\u4f18\u60e0\u5238\u7684\u5361\u5238\u72b6\u6001(\u4f18\u60e0\u5238\u72b6\u6001)\u66f4\u65b0
sql.UpdateEBEventCouponInfo.001 = \
UPDATE \
  WX_COUPON_CONTENT \
SET \
    COUPON_STATUS = ? \
  , MODIFY_ON = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') \
  , MODIFY_BY =  ?  \
WHERE \
  TRIM(EVENT_ID) = ? \
AND TRIM(COUPON_STATUS) = ? \
AND COUPON_KBN = ?

#\u9886\u53d6\u6210\u529f\u540e\uff0c\u5c06\u8be5\u5f20\u88ab\u9886\u53d6\u4f18\u60e0\u5238\u7684OPEN_ID\u66f4\u65b0
sql.UpdateEBEventCouponInfo.002 = \
UPDATE \
  WX_COUPON_CONTENT \
SET \
    OPEN_ID = ? \
  , MODIFY_ON = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') \
  , MODIFY_BY =  ?  \
WHERE \
  COUPON_CONTENT_GUID = ?

#\u7535\u5546\u5e73\u53f0\u9886\u53d6\u6307\u5b9a\u6d3b\u52a8ID\u7684TACT\u4f18\u60e0\u5238(\u9500\u552e\u4f18\u60e0\u5238\u6d3b\u52a8)
sql.SelectEBEventCouponInfo.006 = \
SELECT * FROM ( \
SELECT \
    COUPON_ID \
  , DEALER_CODE \
  , TRIM(COUPON_STATUS) AS COUPON_STATUS \
  , COUPON_KBN \
  , COUPON_CONTENT \
  , COUPON_SUM \
  , COUPON_ENTITY_CONTENT \
  , TO_CHAR(COUPON_BEGIN,'YYYY-MM-DD') AS COUPON_BEGIN\
  , TO_CHAR(COUPON_END,'YYYY-MM-DD') AS COUPON_END \
  , CONTRACT_NO \
  , VIN_NO \
  , TRIM(SFX_CODE) AS SFX_CODE \
  , TRIM(CHECK_MODEL) AS CHECK_MODEL \
  , TRIM(USE_STATUS) AS USE_STATUS \
  , TRIM(SMS_VERIFICATION_CODE) AS SMS_VERIFICATION_CODE \
  , CREATED_ON \
  , CREATED_BY \
  , MODIFY_ON \
  , MODIFY_BY \
  , UPDATE_COUNT \
  , DEL_FLAG \
  , USER_NAME \
  , USER_PHONE \
  , EVENT_ID \
  , OPEN_ID \
  , CARD_NAME \
  , COUPON_RULE \
  , DEALER_CODE_FROM \
FROM \
  TACT_SALES_COUPON_CONTENT \
WHERE \
  TRIM(EVENT_ID) = ? \
AND TRIM(COUPON_STATUS) = ? \
AND OPEN_ID IS NULL \
ORDER BY \
  COUPON_ID ASC \
) \
WHERE \
  ROWNUM BETWEEN 0 AND ?

#\u5f53\u7535\u5546\u5e73\u53f0\u4e0d\u6307\u5b9a\u6d3b\u52a8ID\u7684\u573a\u5408\uff0c\u67e5\u8be2\u6307\u5b9a\u7528\u6237\u6240\u5c5eTACT\u4f18\u60e0\u5238\u72b6\u6001(\u9500\u552e\u4f18\u60e0\u5238\u6d3b\u52a8)
sql.SelectEBEventCouponInfo.007 = \
SELECT \
    COUPON_ID \
  , DEALER_CODE \
  , TRIM(COUPON_STATUS) AS COUPON_STATUS \
  , COUPON_KBN \
  , COUPON_CONTENT \
  , COUPON_SUM \
  , COUPON_ENTITY_CONTENT \
  , TO_CHAR(COUPON_BEGIN,'YYYY-MM-DD') AS COUPON_BEGIN\
  , TO_CHAR(COUPON_END,'YYYY-MM-DD') AS COUPON_END \
  , CONTRACT_NO \
  , VIN_NO \
  , TRIM(SFX_CODE) AS SFX_CODE \
  , TRIM(CHECK_MODEL) AS CHECK_MODEL \
  , TRIM(USE_STATUS) AS USE_STATUS \
  , TRIM(SMS_VERIFICATION_CODE) AS SMS_VERIFICATION_CODE \
  , CREATED_ON \
  , CREATED_BY \
  , MODIFY_ON \
  , MODIFY_BY \
  , UPDATE_COUNT \
  , DEL_FLAG \
  , USER_NAME \
  , USER_PHONE \
  , EVENT_ID \
  , OPEN_ID \
  , CARD_NAME \
  , COUPON_RULE \
FROM \
  TACT_SALES_COUPON_CONTENT \
WHERE \
  OPEN_ID = ? \
ORDER BY \
  COUPON_ID ASC

#\u9886\u53d6\u6210\u529f\u540e\uff0c\u5c06\u8be5\u5f20\u88ab\u9886\u53d6\u4f18\u60e0\u5238\u7684OPEN_ID\u66f4\u65b0\u9501\u8868\u7528(\u9500\u552e\u4f18\u60e0\u5238\u6d3b\u52a8)
sql.SelectEBEventCouponInfoForUp.008 = \
SELECT \
  1 \
FROM \
  TACT_SALES_COUPON_CONTENT \
WHERE \
  COUPON_ID = ? \
FOR UPDATE NOWAIT

#\u9886\u53d6\u6210\u529f\u540e\uff0c\u5c06\u8be5\u5f20\u88ab\u9886\u53d6\u4f18\u60e0\u5238\u7684OPEN_ID\u66f4\u65b0(\u9500\u552e\u4f18\u60e0\u5238\u6d3b\u52a8)
sql.UpdateEBEventCouponInfo.004 = \
UPDATE \
  TACT_SALES_COUPON_CONTENT \
SET \
    OPEN_ID = ? \
  , MODIFY_ON = SYSDATE \
  , MODIFY_BY =  ?  \
WHERE \
  COUPON_ID = ?

#Add for:\u7535\u5546\u6d3b\u52a8\u4f18\u60e0\u5238\u9886\u53d6\u63a5\u53e3 YQ 20161206 End

#Add for:\u7535\u5546\u6d3b\u52a8\u4f18\u60e0\u5238\u9886\u53d6\u63a5\u53e3 jiao_jianying 20161216 Start
sql.SelectSalesCouponInfo.001 = \
SELECT \
  COUPON_ID, \
  DEALER_CODE, \
  COUPON_STATUS, \
  COUPON_KBN, \
  COUPON_CONTENT, \
  COUPON_SUM, \
  COUPON_ENTITY_CONTENT, \
  TO_CHAR(COUPON_BEGIN,'YYYY-MM-DD') AS COUPON_BEGIN, \
  TO_CHAR(COUPON_END,'YYYY-MM-DD') AS COUPON_END, \
  CONTRACT_NO, \
  VIN_NO, \
  SFX_CODE, \
  CHECK_MODEL, \
  USE_STATUS, \
  SMS_VERIFICATION_CODE, \
  USER_NAME, \
  USER_PHONE, \
  EVENT_ID, \
  CREATED_ON, \
  CREATED_BY, \
  MODIFY_ON, \
  MODIFY_BY, \
  UPDATE_COUNT, \
  DEL_FLAG, \
  CARD_NAME, \
  COUPON_RULE, \
  DEALER_CODE_FROM, \
  OPEN_ID \
FROM \
  TACT_SALES_COUPON_CONTENT \
WHERE \
  EVENT_ID = ? \
  AND COUPON_STATUS = RPAD(?, 5, ' ') \
  AND DEL_FLAG = 0
#  AND COUPON_KBN = ? \
#  TRIM(EVENT_ID) = ? \
#  AND TRIM(COUPON_STATUS) = ? \

#Add for:\u7535\u5546\u6d3b\u52a8\u4f18\u60e0\u5238\u9886\u53d6\u63a5\u53e3 jiao_jianying 20161216 End

#add for \u6d3b\u52a8id\uff08String -- > List<String> \uff09 by liangxiao at 20170522 start
sql.SelectSalesCouponInfo.005 = \
SELECT \
  COUPON_ID, \
  DEALER_CODE, \
  COUPON_STATUS, \
  COUPON_KBN, \
  COUPON_CONTENT, \
  COUPON_SUM, \
  COUPON_ENTITY_CONTENT, \
  TO_CHAR(COUPON_BEGIN,'YYYY-MM-DD') AS COUPON_BEGIN, \
  TO_CHAR(COUPON_END,'YYYY-MM-DD') AS COUPON_END, \
  CONTRACT_NO, \
  VIN_NO, \
  SFX_CODE, \
  CHECK_MODEL, \
  USE_STATUS, \
  SMS_VERIFICATION_CODE, \
  USER_NAME, \
  USER_PHONE, \
  EVENT_ID, \
  CREATED_ON, \
  CREATED_BY, \
  MODIFY_ON, \
  MODIFY_BY, \
  UPDATE_COUNT, \
  DEL_FLAG, \
  CARD_NAME, \
  COUPON_RULE, \
  DEALER_CODE_FROM, \
  OPEN_ID \
FROM \
  TACT_SALES_COUPON_CONTENT \
WHERE \
  COUPON_STATUS = RPAD(?, 5, ' ') \
  AND DEL_FLAG = 0
#  AND COUPON_KBN = ? \
#add for \u6d3b\u52a8id\uff08String -- > List<String> \uff09 by liangxiao at 20170522 end

#Add for:\u9500\u552e_\u4f18\u60e0\u5238\u9a8c\u8bc1 wang_chengcai 20161206 start
sql.tactSalesCouponContent.001 = \
SELECT \
  COUPON_KBN \
  , COUPON_SUM \
  , COUPON_ENTITY_CONTENT \
FROM \
  TACT_SALES_COUPON_CONTENT CONTENT \
WHERE \
  CONTENT.COUPON_ID = ? \
  AND CONTENT.DEL_FLAG = 0
sql.tactSalesCouponContent.002 = \
SELECT \
  CONTENT.COUPON_ID AS COUPON_ID \
  , CONTENT.COUPON_KBN AS COUPON_KBN \
  , RULE.RULE_CODE AS RULE_CODE \
  , RULE.RULE_CLASS_FIRST AS RULE_CLASS_FIRST \
  , RULE.RULE_CLASS_SECOND AS RULE_CLASS_SECOND \
  , RULE.ITEMNAME AS ITEMNAME \
  , RULE.RULE_VALUE AS RULE_VALUE \
FROM \
  TACT_SALES_COUPON_CONTENT CONTENT \
  INNER JOIN SALES_COUPON_RULE_MAPPING MAPPING \
    ON CONTENT.COUPON_ID = MAPPING.COUPON_ID \
    AND MAPPING.DEL_FLAG = 0 \
  INNER JOIN TACT_SALES_COUPON_RULE RULE \
    ON MAPPING.RULE_CODE = RULE.RULE_CODE \
    AND MAPPING.EVENT_ID = RULE.EVENT_ID \
    AND RULE.IS_DEL = 0 \
WHERE \
  CONTENT.COUPON_ID = ? \
  AND CONTENT.DEL_FLAG = 0 \
ORDER BY RULE.RULE_CODE
sql.insertSalesCouponCheckHistory.001 = \
INSERT INTO \
SALES_COUPON_CHECK_HISTORY \
(SEQ_NO \
,COUPON_ID \
,CONTRACTNO \
,SFX \
,COUPON_KBN \
,VIN_NO \
,DEALERCODE \
,CHECK_DATETIME \
,BINDING_RESULT \
,SUCCESS_DETAIL \
,FAIL_DETAIL \
,CREATED_ON \
,CREATED_BY \
,MODIFY_ON \
,MODIFY_BY \
) \
VALUES( \
SALES_COUPON_CHECK_HISTORY_SEQ.NEXTVAL, \
?, \
?, \
?, \
?, \
?, \
?, \
TO_DATE(?, 'yyyy-MM-DD HH24:MI:SS'), \
?, \
?, \
?, \
SYSDATE, \
'\u9500\u552e\u4f18\u60e0\u5238\u9a8c\u8bc1', \
SYSDATE, \
'\u9500\u552e\u4f18\u60e0\u5238\u9a8c\u8bc1')
sql.selectTempTactOrderVehicle.001 = \
SELECT \
    MODEL, \
    SFX \
FROM \
    TEMP_TACT_ORDER_VEHICLE \
WHERE \
    TRIM(DEALERCODE) = TRIM(?) \
    AND TRIM(CONTRACTNO) = TRIM(?) \
    AND DELETEFLAG = '0' 
sql.selectCvmActivityGroup.001 = \
SELECT \
    TO_CHAR(EVENT.EVENT_START_DATE, 'YYYY/MM/DD') AS EVENT_START_DATE, \
    TO_CHAR(EVENT.EVENT_END_DATE, 'YYYY/MM/DD') AS EVENT_END_DATE \
FROM \
    TACT_SALES_COUPON_CONTENT TACT \
INNER JOIN \
    TACT_SALES_EVENT EVENT \
ON \
    TACT.EVENT_ID = EVENT.EVENT_ID \
    AND EVENT.DELFLAG = '0' \
WHERE \
    TACT.COUPON_ID = ? \
    AND TACT.DEL_FLAG = '0'
#Add for:\u9500\u552e_\u4f18\u60e0\u5238\u9a8c\u8bc1 wang_chengcai 20161206 end

#Add for:\u9500\u552e\u4f18\u60e0\u5238\u7ed1\u5b9ayuan_yumei 20161207 start
sql.UpdateSalesCoupBind.001 = \
UPDATE \
  TACT_SALES_COUPON_CONTENT \
SET \
  CONTRACT_NO = ? \
  ,SFX_CODE = ? \
  ,USE_STATUS = ? \
  ,DEALER_CODE = ? \
  ,SMS_Verification_CODE = NULL \
  ,COUPON_STATUS = ? \
  ,MODIFY_ON = SYSDATE \
  ,MODIFY_BY =  ?  \
WHERE \
  COUPON_ID = ?
  
sql.UpdateSalesCoupBind.002 = \
UPDATE \
  TACT_SALES_COUPON_CONTENT \
SET \
  CONTRACT_NO = ? \
  ,SFX_CODE = ? \
  ,USE_STATUS = ? \
  ,DEALER_CODE = ? \
  ,SMS_Verification_CODE = ? \
  ,COUPON_STATUS = ? \
  ,MODIFY_ON = SYSDATE \
  ,MODIFY_BY =  ?  \
WHERE \
  COUPON_ID = ?
  
sql.SelectSalesCoupBind.001 = \
SELECT \
   COUPON_ID \
  ,COUPON_STATUS \
  ,CONTRACT_NO \
FROM \
  TACT_SALES_COUPON_CONTENT  \
WHERE \
  COUPON_ID = ?  \
  FOR UPDATE NOWAIT
#Add for:\u9500\u552e\u4f18\u60e0\u5238\u7ed1\u5b9ayuan_yumei 20161207 end
#Add for:\u9500\u552e\u4f18\u60e0\u5238\u6838\u9500 xie_dandan 20161207 start
sql.UpdateTactSaleCouponContent.001 = \
UPDATE \
  TACT_SALES_COUPON_CONTENT \
SET \
   CONTRACT_NO = ? \
  ,SFX_CODE = ? \
  ,DEALER_CODE = ? \
  ,COUPON_STATUS = ? \
  ,MODIFY_ON = SYSDATE \
  ,MODIFY_BY =  ?  \
WHERE \
  COUPON_ID = ?
#Add for:\u9500\u552e\u4f18\u60e0\u5238\u6838\u9500 xie_dandan 20161207 end

#add for \u5165\u5e93\u671f\u95f4\u4e30\u4e91\u884cApp\u9080\u7ea6\u77ed\u4fe1\u63a8\u9001 jiao_jianying 20161207 start
#\u7ef4\u4fee\u5de5\u5355\u4fe1\u606fTEL\u662f\u5426\u5b58\u5728\u68c0\u67e5
sql.selUserRegistInfo.001 = \
SELECT \
USER_ID \
FROM USER_LOGIN \
WHERE \
TEL_NO IN (PHONELIST)

#\u53d1\u9001\u4fe1\u606f\u5c65\u5386\u65b0\u89c4
sql.insertMessageHistory.001 = \
INSERT INTO \
SEND_MESSAGE_HISTORY \
(SEQ_NO, \
USER_NAME, \
TEL_NO, \
SEND_MESSAGE, \
DAY_COUNT, \
DEALERCODE, \
ORDERNO, \
CREDATE, \
CREUSER, \
UPDATETIME, \
UPDATEUSER) \
VALUES( \
SEND_MESSAGE_HISTORY_SEQ.NEXTVAL, \
?, \
?, \
?, \
0, \
?, \
?, \
SYSDATE, \
'\u7535\u5546', \
SYSDATE, \
'\u7535\u5546')

#\u624b\u673a\u53f7\u53d1\u9001\u4fe1\u606f\u5c65\u5386\u4ef6\u6570\u67e5\u8be2
sql.selMessageHistory.001 = \
SELECT \
TEL_NO \
FROM \
SEND_MESSAGE_HISTORY \
WHERE \
TEL_NO = ? \
AND SEND_STATUS = '1' \
AND TO_CHAR(SEND_TIME, 'YYYYMMDD') >= ? \
AND TO_CHAR(SEND_TIME, 'YYYYMMDD') <= ?

#\u67e5\u8be2\u5f53\u65e5\u662f\u5426\u53d1\u9001\u77ed\u4fe1
sql.selMessageHistory.002 = \
SELECT \
TEL_NO, \
DAY_COUNT, \
SEND_TIME \
FROM \
SEND_MESSAGE_HISTORY \
WHERE \
TEL_NO = ? \
AND SEND_STATUS = '1' \
AND TO_CHAR(SEND_TIME, 'YYYYMMDD') = ?

#\u53d1\u9001\u5bf9\u8c61\u4fe1\u606f\u53d6\u5f97
sql.selectSendMessageHistory.001 = \
SELECT \
 SEQ_NO, \
 TEL_NO, \
 DAY_COUNT, \
 SEND_MESSAGE \
FROM \
  SEND_MESSAGE_HISTORY \
WHERE \
  SEND_TIME IS NULL \
AND TO_CHAR(CREDATE, 'YYYYMMDD') = ? \
AND SEND_STATUS IS NULL \
AND (TEL_NO = ? OR TEL_NO = ? ) \
AND TRIM(DEALERCODE) = ? \
AND TRIM(ORDERNO) = ? \
FOR UPDATE

#\u53d1\u4fe1\u6210\u529f\u540e\u5bf9\u8c61\u4fe1\u606f\u66f4\u65b0
sql.updateSendMessageHistory.001 = \
UPDATE \
  SEND_MESSAGE_HISTORY \
SET \
  SEND_TIME = TO_DATE(?, 'yyyy-MM-DD HH24:MI:SS'), \
  DAY_COUNT = ?, \
  SEND_STATUS = '1', \
  UPDATETIME = SYSDATE \
WHERE \
  SEQ_NO = ?

#\u53d1\u4fe1\u5931\u8d25\u65f6\u5bf9\u8c61\u4fe1\u606f\u66f4\u65b0
sql.updateSendMessageHistory.002 = \
UPDATE \
  SEND_MESSAGE_HISTORY \
SET \
  ERROR_MESSAGE = ?, \
  SEND_STATUS = '0', \
  UPDATETIME = SYSDATE \
WHERE \
  SEQ_NO = ?

#add for \u5165\u5e93\u671f\u95f4\u4e30\u4e91\u884cApp\u9080\u7ea6\u77ed\u4fe1\u63a8\u9001 jiao_jianying 20161207 end
## \u83b7\u53d6\u8d26\u6237\u8f66\u8f86\u4fe1\u606f,\u6839\u636e\u8bf4\u8bf4\u7cfb\u7edfCD\u548cUSER_ID\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f start
sql.selectEBUserCarInfo.001 = \
SELECT \
    car.VINNO AS vinNo, \
    A.DEALERCODE AS salesDealerCode, \
    A.MODEL AS model, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCode, \
    A.Colorname AS Colorname, \
    A.Vehiclenamecode AS Vehiclenamecode, \
    A.Vehiclename AS Vehiclename, \
    A.Vhcengine AS Vhcengine, \
    A.Vhcgrade AS Vhcgrade, \
    A.Vhcmission AS Vhcmission, \
    A.Vhcexhaust AS vhcexhaust, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD') AS vhcSalesDate, \
    C.ENGINENO AS engine, \
    car.REGISTERNO AS registerNo, \
    car.INSURER AS insurecomCode, \
    TO_CHAR(car.INSURANCE_START_DATE, 'YYYY-MM-DD') AS effectiveDateStart, \
    TO_CHAR(car.INSURANCE_END_DATE, 'YYYY-MM-DD') AS effectiveDateEnd, \
    A.BUYERTEL1 AS buyerTel \
FROM \
    USER_CAR car \
    INNER JOIN TACT_ORDER_VEHICLE_BK A ON CAR.VINNO = A.FRAMENO AND A.DELETEFLAG = '0' AND A.DELIVERYENDDATE IS NOT NULL \
    LEFT JOIN LCMS_VOITUREINFO C ON A.FRAMENO = C.VIN \
WHERE \
    car.UID_GTMC = ? \
    AND car.DELETEFLAG = '0' 
## \u83b7\u53d6\u8d26\u6237\u8f66\u8f86\u4fe1\u606f,\u6839\u636e\u8bf4\u8bf4\u7cfb\u7edfCD\u548cUSER_ID\u5339\u914d\u8f66\u4e3b\u8f66\u8f86\u4fe1\u606f end
#add for \u4f18\u60e0\u5238\u53d6\u5f97 yuan_yumei 20161215 Start
#Modify for \u67e5\u8be2\u5b57\u6bb5\u589e\u52a0\u7ed1\u5b9a\u65f6\u95f4\uff0c\u67e5\u8be2\u6761\u4ef6\u53bb\u6389trim shen_kang 20170427 start
sql.selectWxCouponContent.001 = \
SELECT \
    CARD_ID, \
    COUPON_ID, \
    EVENT_ID, \
    OPEN_ID, \
    GZH_HASH, \
    DEALER_CODE, \
    COUPON_STATUS, \
    TYPE_ID, \
    COUPON_CONTENT, \
    COUPON_RULE, \
    COUPON_BEGIN, \
    COUPON_END, \
    SRV_ORDER_NO, \
    VIN_NO, \
    SFX_CODE, \
    CHECK_MODEL, \
    USE_STATUS, \
    CREATED_ON, \
    CREATED_BY, \
    MODIFY_ON, \
    MODIFY_BY, \
    UPDATE_COUNT, \
    DEL_FLAG, \
    USER_NAME, \
    USER_NUMBER, \
    UPDATE_ON, \
    DEALER_CODE_FROM, \
    BIND_DATE, \
    IS_PARALLEL, \
    COUPON_DETAIL \
FROM WX_COUPON_CONTENT \
WHERE  COUPON_ID = ?
#Modify for \u67e5\u8be2\u5b57\u6bb5\u589e\u52a0\u7ed1\u5b9a\u65f6\u95f4\uff0c\u67e5\u8be2\u6761\u4ef6\u53bb\u6389trim shen_kang 20170427 end


#Modify for \u4f18\u60e0\u5238\u7ed1\u5b9a\u8ba2\u5355\u65f6\u7ed1\u5b9a\u65e5\u4e3aSYSDATE by shen_kang 20170427 start
sql.UpdateWxCouponContent.001 = \
UPDATE \
  WX_COUPON_CONTENT \
SET \
  DEALER_CODE = ? \
  ,SRV_ORDER_NO = ? \
  ,VIN_NO = ? \
  ,SFX_CODE = ? \
  ,COUPON_STATUS = ? \
  ,MODIFY_ON = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') \
  ,MODIFY_BY =  ?  \
  ,BIND_DATE= CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END \
WHERE \
  COUPON_ID = ?
#Modify for \u4f18\u60e0\u5238\u7ed1\u5b9a\u8ba2\u5355\u65f6\u7ed1\u5b9a\u65e5\u4e3aSYSDATE by shen_kang 20170427 end


#add for \u4f18\u60e0\u5238\u53d6\u5f97 yuan_yumei 20161215 End
#add for \u4f18\u60e0\u5238\u6838\u9500 xie_dandan 20161215 start
#modify for sql\u4f18\u5316 \u53bb\u6389trim by shen_kang 20170809 start
sql.selectWxCouponContent.002 = \
SELECT \
    CARD_ID, \
    COUPON_ID, \
    EVENT_ID, \
    OPEN_ID, \
    GZH_HASH, \
    DEALER_CODE, \
    COUPON_STATUS, \
    TYPE_ID, \
    COUPON_CONTENT, \
    COUPON_RULE, \
    COUPON_BEGIN, \
    COUPON_END, \
    SRV_ORDER_NO, \
    VIN_NO, \
    SFX_CODE, \
    CHECK_MODEL, \
    USE_STATUS, \
    CREATED_ON, \
    CREATED_BY, \
    MODIFY_ON, \
    MODIFY_BY, \
    UPDATE_COUNT, \
    DEL_FLAG, \
    USER_NAME, \
    USER_NUMBER, \
    UPDATE_ON \
FROM WX_COUPON_CONTENT \
WHERE  COUPON_ID = ?  \
    FOR UPDATE NOWAIT
#modify for sql\u4f18\u5316 \u53bb\u6389trim by shen_kang 20170809 end
#Modify for \u66f4\u65b0\u4f18\u60e0\u5238\u4fe1\u606f\u662f\u589e\u52a0\u6838\u9500\u65e5\u671f by shen_kang 20170509 start
sql.UpdateWxCouponContent.002 = \
UPDATE \
  WX_COUPON_CONTENT \
SET \
   DEALER_CODE = ? \
  ,SRV_ORDER_NO = ? \
  ,VIN_NO = ? \
  ,SFX_CODE = ? \
  ,COUPON_STATUS = ? \
  ,MODIFY_ON = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') \
  ,MODIFY_BY =  ?  \
  ,WRITEOFFS_DATE=SYSDATE \
WHERE \
  COUPON_ID = ?
#Modify for \u66f4\u65b0\u4f18\u60e0\u5238\u4fe1\u606f\u662f\u589e\u52a0\u7ed1\u5b9a\u65e5\u671f by shen_kang 20170509 end


#add for \u4f18\u60e0\u5238\u6838\u9500xie_dandan 20161215 end

## \u8ba2\u5355\u8f66\u8f86\u4fe1\u606f wang_chengcai start
sql.getTactOrderVehicle.001=SELECT \
    DEALERCODE, \
    CONTRACTNO \
FROM \
    TEMP_TACT_ORDER_VEHICLE \
WHERE \
    TRIM(DEALERCODE) = TRIM(?) \
    AND TRIM(CONTRACTNO) = TRIM(?) \
    FOR UPDATE NOWAIT

sql.insertTactOrderVehicle.001=INSERT INTO TEMP_TACT_ORDER_VEHICLE (\
DEALERCODE,\
CONTRACTNO,\
INPUTDATE,\
CONTRACTDATE,\
CANCELDATE,\
SALESPART,\
BUYERPART,\
BUYERNAME,\
BUYERID,\
BUYERZIP,\
BUYERADDRESS,\
BUYERTEL1,\
BUYERTEL2,\
BUYERFAX,\
BUYEREMAIL,\
NOMINEEPART,\
NOMINEE,\
NOMINEEID,\
NOMINEEZIP,\
NOMINEEADDRESS,\
NOMINEETEL1,\
NOMINEETEL2,\
NOMINEEFAX,\
NOMINEEEMAIL,\
SALESCODE,\
SALES,\
DELIVERYHOPEDATE,\
DELIVERYPLACE,\
MODEL,\
SFX,\
COLORCD,\
COLORNAME,\
VHCPART,\
VEHICLENAMECODE,\
VEHICLENAME,\
VHCENGINE,\
VHCGRADE,\
VHCMISSION,\
VHCEXHAUST,\
VHCBODYPRICE,\
VHCBODYCUT,\
VHCBODYPAY,\
TAXRATE,\
TAX,\
NEEDPROCEDURE,\
URGENCY,\
MODELCONSULTFLG,\
BUYPRICE,\
BUYDATE,\
VHCMEMO,\
REVISIONNO,\
ITEM1,\
RESULT1,\
ITEM2,\
RESULT2,\
ITEM3,\
RESULT3,\
ITEM4,\
RESULT4,\
ITEM5,\
RESULT5,\
ITEM6,\
RESULT6,\
ITEM7,\
RESULT7,\
ITEM8,\
RESULT8,\
ITEM9,\
RESULT9,\
ITEM10,\
RESULT10,\
ITEM11,\
RESULT11,\
ITEM12,\
RESULT12,\
ITEM13,\
RESULT13,\
ITEM14,\
RESULT14,\
ITEM15,\
RESULT15,\
ITEM16,\
RESULT16,\
ITEM17,\
RESULT17,\
ITEM18,\
RESULT18,\
ITEM19,\
RESULT19,\
ITEM20,\
RESULT20,\
SUPPOSITIONID,\
SUPPOSITIONDATE,\
DISTRIBUTEDATE,\
ORDERNO,\
FRAMENO,\
INVOICENO,\
PAYMENTSEQ,\
PAYMENTENDDATE,\
SALESDATE,\
SALESCANCELDATE,\
PDSSETTLEDATE,\
DELIVERYENDDATE,\
REGISTNO,\
DELETEFLAG,\
UPDATECOUNT,\
CREDATE,\
CREUSER,\
UPDATETIME,\
UPDATEUSER,\
CANCEL,\
PAYMENTSTYLE,\
INSURANCE,\
BANKCODE,\
BRANCHBANKNAME,\
EARNEST,\
FIXYEAR,\
SURETYSTYLE,\
INSURECOMCODE,\
BRANCHINSURECOM,\
INSURANCEPOLICYNO,\
EFFECTIVEDATESTART,\
EFFECTIVEDATEEND,\
PLATENOHANDCHARGE,\
ACCECHARGE,\
INSURECHARGE,\
RESTCHARGE,\
PREDELIVERYDATE,\
SIGNDATE,\
ADVANCEPAY,\
BUYERDLRCODE,\
BUYERCODE,\
BUYERPROVCODE,\
BUYERPROVNAME,\
BUYERCITYCODE,\
BUYERCITYNAME,\
BUYERAREACODE,\
BUYERAREANAME,\
BUYERSTREET,\
BUYERCERTITYPE,\
BUYERSEX,\
BUYERAGES,\
BUYERMOBIL1,\
BUYERMOBIL2,\
BUYEREMAIL2,\
NOMINEECODE,\
NOMINEEPROVCODE,\
NOMINEEPROVNAME,\
NOMINEECITYCODE,\
NOMINEECITYNAME,\
NOMINEEAREACODE,\
NOMINEEAREANAME,\
NOMINEESTREET,\
NOMINEECERTITYPE,\
NOMINEESEX,\
NOMINEEAGES,\
NOMINEEMOBIL1,\
NOMINEEMOBIL2,\
NOMINEEEMAIL2,\
TOTALPAY,\
ORDERSTATE,\
ORDERSTATECHANGEDATE\
)\
VALUES\
(\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
?,\
CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END\
)

sql.updateTactOrderVehicle.001=UPDATE TEMP_TACT_ORDER_VEHICLE \
SET INPUTDATE = CASE WHEN ? IS NULL THEN INPUTDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 CONTRACTDATE = CASE WHEN ? IS NULL THEN CONTRACTDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 CANCELDATE = CASE WHEN ? IS NULL THEN CANCELDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 SALESPART = CASE WHEN ? IS NULL THEN SALESPART ELSE ? END,\
 BUYERPART = CASE WHEN ? IS NULL THEN BUYERPART ELSE ? END,\
 BUYERNAME = CASE WHEN ? IS NULL THEN BUYERNAME ELSE ? END,\
 BUYERID = CASE WHEN ? IS NULL THEN BUYERID ELSE ? END,\
 BUYERZIP = CASE WHEN ? IS NULL THEN BUYERZIP ELSE ? END,\
 BUYERADDRESS = CASE WHEN ? IS NULL THEN BUYERADDRESS ELSE ? END,\
 BUYERTEL1 = CASE WHEN ? IS NULL THEN BUYERTEL1 ELSE ? END,\
 BUYERTEL2 = CASE WHEN ? IS NULL THEN BUYERTEL2 ELSE ? END,\
 BUYERFAX = CASE WHEN ? IS NULL THEN BUYERFAX ELSE ? END,\
 BUYEREMAIL = CASE WHEN ? IS NULL THEN BUYEREMAIL ELSE ? END,\
 NOMINEEPART = CASE WHEN ? IS NULL THEN NOMINEEPART ELSE ? END,\
 NOMINEE = CASE WHEN ? IS NULL THEN NOMINEE ELSE ? END,\
 NOMINEEID = CASE WHEN ? IS NULL THEN NOMINEEID ELSE ? END,\
 NOMINEEZIP = CASE WHEN ? IS NULL THEN NOMINEEZIP ELSE ? END,\
 NOMINEEADDRESS = CASE WHEN ? IS NULL THEN NOMINEEADDRESS ELSE ? END,\
 NOMINEETEL1 = CASE WHEN ? IS NULL THEN NOMINEETEL1 ELSE ? END,\
 NOMINEETEL2 = CASE WHEN ? IS NULL THEN NOMINEETEL2 ELSE ? END,\
 NOMINEEFAX = CASE WHEN ? IS NULL THEN NOMINEEFAX ELSE ? END,\
 NOMINEEEMAIL = CASE WHEN ? IS NULL THEN NOMINEEEMAIL ELSE ? END,\
 SALESCODE = CASE WHEN ? IS NULL THEN SALESCODE ELSE ? END,\
 SALES = CASE WHEN ? IS NULL THEN SALES ELSE ? END,\
 DELIVERYHOPEDATE = CASE WHEN ? IS NULL THEN DELIVERYHOPEDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 DELIVERYPLACE = CASE WHEN ? IS NULL THEN DELIVERYPLACE ELSE ? END,\
 MODEL = CASE WHEN ? IS NULL THEN MODEL ELSE ? END,\
 SFX = CASE WHEN ? IS NULL THEN SFX ELSE ? END,\
 COLORCD = CASE WHEN ? IS NULL THEN COLORCD ELSE ? END,\
 COLORNAME = CASE WHEN ? IS NULL THEN COLORNAME ELSE ? END,\
 VHCPART = CASE WHEN ? IS NULL THEN VHCPART ELSE ? END,\
 VEHICLENAMECODE = CASE WHEN ? IS NULL THEN VEHICLENAMECODE ELSE ? END,\
 VEHICLENAME = CASE WHEN ? IS NULL THEN VEHICLENAME ELSE ? END,\
 VHCENGINE = CASE WHEN ? IS NULL THEN VHCENGINE ELSE ? END,\
 VHCGRADE = CASE WHEN ? IS NULL THEN VHCGRADE ELSE ? END,\
 VHCMISSION = CASE WHEN ? IS NULL THEN VHCMISSION ELSE ? END,\
 VHCEXHAUST = CASE WHEN ? IS NULL THEN VHCEXHAUST ELSE ? END,\
 VHCBODYPRICE = CASE WHEN ? IS NULL THEN VHCBODYPRICE ELSE TO_NUMBER(?) END,\
 VHCBODYCUT = CASE WHEN ? IS NULL THEN VHCBODYCUT ELSE TO_NUMBER(?) END,\
 VHCBODYPAY = CASE WHEN ? IS NULL THEN VHCBODYPAY ELSE TO_NUMBER(?) END,\
 TAXRATE = CASE WHEN ? IS NULL THEN TAXRATE ELSE TO_NUMBER(?) END,\
 TAX = CASE WHEN ? IS NULL THEN TAX ELSE TO_NUMBER(?) END,\
 NEEDPROCEDURE = CASE WHEN ? IS NULL THEN NEEDPROCEDURE ELSE ? END,\
 URGENCY = CASE WHEN ? IS NULL THEN URGENCY ELSE ? END,\
 MODELCONSULTFLG = CASE WHEN ? IS NULL THEN MODELCONSULTFLG ELSE ? END,\
 BUYPRICE = CASE WHEN ? IS NULL THEN BUYPRICE ELSE TO_NUMBER(?) END,\
 BUYDATE = CASE WHEN ? IS NULL THEN BUYDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 VHCMEMO = CASE WHEN ? IS NULL THEN VHCMEMO ELSE ? END,\
 REVISIONNO = CASE WHEN ? IS NULL THEN REVISIONNO ELSE TO_NUMBER(?) END,\
 ITEM1 = CASE WHEN ? IS NULL THEN ITEM1 ELSE ? END,\
 RESULT1 = CASE WHEN ? IS NULL THEN RESULT1 ELSE ? END,\
 ITEM2 = CASE WHEN ? IS NULL THEN ITEM2 ELSE ? END,\
 RESULT2 = CASE WHEN ? IS NULL THEN RESULT2 ELSE ? END,\
 ITEM3 = CASE WHEN ? IS NULL THEN ITEM3 ELSE ? END,\
 RESULT3 = CASE WHEN ? IS NULL THEN RESULT3 ELSE ? END,\
 ITEM4 = CASE WHEN ? IS NULL THEN ITEM4 ELSE ? END,\
 RESULT4 = CASE WHEN ? IS NULL THEN RESULT4 ELSE ? END,\
 ITEM5 = CASE WHEN ? IS NULL THEN ITEM5 ELSE ? END,\
 RESULT5 = CASE WHEN ? IS NULL THEN RESULT5 ELSE ? END,\
 ITEM6 = CASE WHEN ? IS NULL THEN ITEM6 ELSE ? END,\
 RESULT6 = CASE WHEN ? IS NULL THEN RESULT6 ELSE ? END,\
 ITEM7 = CASE WHEN ? IS NULL THEN ITEM7 ELSE ? END,\
 RESULT7 = CASE WHEN ? IS NULL THEN RESULT7 ELSE ? END,\
 ITEM8 = CASE WHEN ? IS NULL THEN ITEM8 ELSE ? END,\
 RESULT8 = CASE WHEN ? IS NULL THEN RESULT8 ELSE ? END,\
 ITEM9 = CASE WHEN ? IS NULL THEN ITEM9 ELSE ? END,\
 RESULT9 = CASE WHEN ? IS NULL THEN RESULT9 ELSE ? END,\
 ITEM10 = CASE WHEN ? IS NULL THEN ITEM10 ELSE ? END,\
 RESULT10 = CASE WHEN ? IS NULL THEN RESULT10 ELSE ? END,\
 ITEM11 = CASE WHEN ? IS NULL THEN ITEM11 ELSE ? END,\
 RESULT11 = CASE WHEN ? IS NULL THEN RESULT11 ELSE ? END,\
 ITEM12 = CASE WHEN ? IS NULL THEN ITEM12 ELSE ? END,\
 RESULT12 = CASE WHEN ? IS NULL THEN RESULT12 ELSE ? END,\
 ITEM13 = CASE WHEN ? IS NULL THEN ITEM13 ELSE ? END,\
 RESULT13 = CASE WHEN ? IS NULL THEN RESULT13 ELSE ? END,\
 ITEM14 = CASE WHEN ? IS NULL THEN ITEM14 ELSE ? END,\
 RESULT14 = CASE WHEN ? IS NULL THEN RESULT14 ELSE ? END,\
 ITEM15 = CASE WHEN ? IS NULL THEN ITEM15 ELSE ? END,\
 RESULT15 = CASE WHEN ? IS NULL THEN RESULT15 ELSE ? END,\
 ITEM16 = CASE WHEN ? IS NULL THEN ITEM16 ELSE ? END,\
 RESULT16 = CASE WHEN ? IS NULL THEN RESULT16 ELSE ? END,\
 ITEM17 = CASE WHEN ? IS NULL THEN ITEM17 ELSE ? END,\
 RESULT17 = CASE WHEN ? IS NULL THEN RESULT17 ELSE ? END,\
 ITEM18 = CASE WHEN ? IS NULL THEN ITEM18 ELSE ? END,\
 RESULT18 = CASE WHEN ? IS NULL THEN RESULT18 ELSE ? END,\
 ITEM19 = CASE WHEN ? IS NULL THEN ITEM19 ELSE ? END,\
 RESULT19 = CASE WHEN ? IS NULL THEN RESULT19 ELSE ? END,\
 ITEM20 = CASE WHEN ? IS NULL THEN ITEM20 ELSE ? END,\
 RESULT20 = CASE WHEN ? IS NULL THEN RESULT20 ELSE ? END,\
 SUPPOSITIONID = CASE WHEN ? IS NULL THEN SUPPOSITIONID ELSE ? END,\
 SUPPOSITIONDATE = CASE WHEN ? IS NULL THEN SUPPOSITIONDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 DISTRIBUTEDATE = CASE WHEN ? IS NULL THEN DISTRIBUTEDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 ORDERNO = CASE WHEN ? IS NULL THEN ORDERNO ELSE ? END,\
 FRAMENO = CASE WHEN ? IS NULL THEN FRAMENO ELSE ? END,\
 INVOICENO = CASE WHEN ? IS NULL THEN INVOICENO ELSE ? END,\
 PAYMENTSEQ = CASE WHEN ? IS NULL THEN PAYMENTSEQ ELSE TO_NUMBER(?) END,\
 PAYMENTENDDATE = CASE WHEN ? IS NULL THEN PAYMENTENDDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 SALESDATE = CASE WHEN ? IS NULL THEN SALESDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 SALESCANCELDATE = CASE WHEN ? IS NULL THEN SALESCANCELDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 PDSSETTLEDATE = CASE WHEN ? IS NULL THEN PDSSETTLEDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 DELIVERYENDDATE = CASE WHEN ? IS NULL THEN DELIVERYENDDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 REGISTNO = CASE WHEN ? IS NULL THEN REGISTNO ELSE ? END,\
 DELETEFLAG = CASE WHEN ? IS NULL THEN DELETEFLAG ELSE ? END,\
 UPDATECOUNT = CASE WHEN ? IS NULL THEN UPDATECOUNT ELSE TO_NUMBER(?) END,\
 CREDATE = CASE WHEN ? IS NULL THEN CREDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 CREUSER = CASE WHEN ? IS NULL THEN CREUSER ELSE ? END,\
 UPDATETIME = CASE WHEN ? IS NULL THEN UPDATETIME ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 UPDATEUSER = CASE WHEN ? IS NULL THEN UPDATEUSER ELSE ? END,\
 CANCEL = CASE WHEN ? IS NULL THEN CANCEL ELSE ? END,\
 PAYMENTSTYLE = CASE WHEN ? IS NULL THEN PAYMENTSTYLE ELSE ? END,\
 INSURANCE = CASE WHEN ? IS NULL THEN INSURANCE ELSE ? END,\
 BANKCODE = CASE WHEN ? IS NULL THEN BANKCODE ELSE ? END,\
 BRANCHBANKNAME = CASE WHEN ? IS NULL THEN BRANCHBANKNAME ELSE ? END,\
 EARNEST = CASE WHEN ? IS NULL THEN EARNEST ELSE TO_NUMBER(?) END,\
 FIXYEAR = CASE WHEN ? IS NULL THEN FIXYEAR ELSE ? END,\
 SURETYSTYLE = CASE WHEN ? IS NULL THEN SURETYSTYLE ELSE ? END,\
 INSURECOMCODE = CASE WHEN ? IS NULL THEN INSURECOMCODE ELSE ? END,\
 BRANCHINSURECOM = CASE WHEN ? IS NULL THEN BRANCHINSURECOM ELSE ? END,\
 INSURANCEPOLICYNO = CASE WHEN ? IS NULL THEN INSURANCEPOLICYNO ELSE ? END,\
 EFFECTIVEDATESTART = CASE WHEN ? IS NULL THEN EFFECTIVEDATESTART ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 EFFECTIVEDATEEND = CASE WHEN ? IS NULL THEN EFFECTIVEDATEEND ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 PLATENOHANDCHARGE = CASE WHEN ? IS NULL THEN PLATENOHANDCHARGE ELSE TO_NUMBER(?) END,\
 ACCECHARGE = CASE WHEN ? IS NULL THEN ACCECHARGE ELSE TO_NUMBER(?) END,\
 INSURECHARGE = CASE WHEN ? IS NULL THEN INSURECHARGE ELSE TO_NUMBER(?) END,\
 RESTCHARGE = CASE WHEN ? IS NULL THEN RESTCHARGE ELSE TO_NUMBER(?) END,\
 PREDELIVERYDATE = CASE WHEN ? IS NULL THEN PREDELIVERYDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END,\
 SIGNDATE = CASE WHEN ? IS NULL THEN SIGNDATE ELSE ? END,\
 ADVANCEPAY = CASE WHEN ? IS NULL THEN ADVANCEPAY ELSE TO_NUMBER(?) END,\
 BUYERDLRCODE = CASE WHEN ? IS NULL THEN BUYERDLRCODE ELSE ? END,\
 BUYERCODE = CASE WHEN ? IS NULL THEN BUYERCODE ELSE ? END,\
 BUYERPROVCODE = CASE WHEN ? IS NULL THEN BUYERPROVCODE ELSE ? END,\
 BUYERPROVNAME = CASE WHEN ? IS NULL THEN BUYERPROVNAME ELSE ? END,\
 BUYERCITYCODE = CASE WHEN ? IS NULL THEN BUYERCITYCODE ELSE ? END,\
 BUYERCITYNAME = CASE WHEN ? IS NULL THEN BUYERCITYNAME ELSE ? END,\
 BUYERAREACODE = CASE WHEN ? IS NULL THEN BUYERAREACODE ELSE ? END,\
 BUYERAREANAME = CASE WHEN ? IS NULL THEN BUYERAREANAME ELSE ? END,\
 BUYERSTREET = CASE WHEN ? IS NULL THEN BUYERSTREET ELSE ? END,\
 BUYERCERTITYPE = CASE WHEN ? IS NULL THEN BUYERCERTITYPE ELSE ? END,\
 BUYERSEX = CASE WHEN ? IS NULL THEN BUYERSEX ELSE ? END,\
 BUYERAGES = CASE WHEN ? IS NULL THEN BUYERAGES ELSE ? END,\
 BUYERMOBIL1 = CASE WHEN ? IS NULL THEN BUYERMOBIL1 ELSE ? END,\
 BUYERMOBIL2 = CASE WHEN ? IS NULL THEN BUYERMOBIL2 ELSE ? END,\
 BUYEREMAIL2 = CASE WHEN ? IS NULL THEN BUYEREMAIL2 ELSE ? END,\
 NOMINEECODE = CASE WHEN ? IS NULL THEN NOMINEECODE ELSE ? END,\
 NOMINEEPROVCODE = CASE WHEN ? IS NULL THEN NOMINEEPROVCODE ELSE ? END,\
 NOMINEEPROVNAME = CASE WHEN ? IS NULL THEN NOMINEEPROVNAME ELSE ? END,\
 NOMINEECITYCODE = CASE WHEN ? IS NULL THEN NOMINEECITYCODE ELSE ? END,\
 NOMINEECITYNAME = CASE WHEN ? IS NULL THEN NOMINEECITYNAME ELSE ? END,\
 NOMINEEAREACODE = CASE WHEN ? IS NULL THEN NOMINEEAREACODE ELSE ? END,\
 NOMINEEAREANAME = CASE WHEN ? IS NULL THEN NOMINEEAREANAME ELSE ? END,\
 NOMINEESTREET = CASE WHEN ? IS NULL THEN NOMINEESTREET ELSE ? END,\
 NOMINEECERTITYPE = CASE WHEN ? IS NULL THEN NOMINEECERTITYPE ELSE ? END,\
 NOMINEESEX = CASE WHEN ? IS NULL THEN NOMINEESEX ELSE ? END,\
 NOMINEEAGES = CASE WHEN ? IS NULL THEN NOMINEEAGES ELSE ? END,\
 NOMINEEMOBIL1 = CASE WHEN ? IS NULL THEN NOMINEEMOBIL1 ELSE ? END,\
 NOMINEEMOBIL2 = CASE WHEN ? IS NULL THEN NOMINEEMOBIL2 ELSE ? END,\
 NOMINEEEMAIL2 = CASE WHEN ? IS NULL THEN NOMINEEEMAIL2 ELSE ? END,\
 TOTALPAY = CASE WHEN ? IS NULL THEN TOTALPAY ELSE TO_NUMBER(?) END,\
 ORDERSTATE = CASE WHEN ? IS NULL THEN ORDERSTATE ELSE ? END,\
 ORDERSTATECHANGEDATE = CASE WHEN ? IS NULL THEN ORDERSTATECHANGEDATE ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END \
WHERE TRIM(DEALERCODE)=TRIM(?) \
AND TRIM(CONTRACTNO)=TRIM(?)
## \u8ba2\u5355\u8f66\u8f86\u4fe1\u606f wang_chengcai end
## \u8f66\u67b6\u53f7\u7ed1\u5b9a\u8d26\u53f7\u9650\u5236 ZhangYu 20161219 start
sql.getVehicleInfo.004 = \
SELECT \
    COUNT(1) AS count \
FROM \
    USER_CAR \
WHERE \
    VINNO = TRIM(?) AND \
    DELETEFLAG = '0'
## \u8f66\u67b6\u53f7\u7ed1\u5b9a\u8d26\u53f7\u9650\u5236 ZhangYu 20161219 end

## \u8f66\u578b\u540d\u79f0\u53d6\u5f97
sql.getVhcName.001 = \
SELECT \
    DISTINCT TRIM(VHCNAME) AS VHCNAME \
FROM \
    BASE_VEHICLE_MODEL \
WHERE \
    TRIM(SFX) IN (IN_SFX)
## \u6839\u636e\u7edf\u5408\u7ba1\u7406ID\u83b7\u53d6\u4f1a\u5458ID
sql.selectUID.001 = \
SELECT \
    USER_ID \
FROM \
    USER_LOGIN \
WHERE \
    UID_GTMC = ? 
## \u9500\u552e\u4f18\u60e0\u5238\u4f7f\u7528\u6570\u91cf\u3010\u6d3b\u52a8\u5185\u53e0\u52a0\u3011
sql.selectSalesCouponUsedCnt.001 = \
SELECT COUNT(1) AS CNT \
FROM ( \
    SELECT COUPON_ID,EVENT_ID \
    FROM TACT_SALES_COUPON_CONTENT \
    WHERE CONTRACT_NO = ? \
    AND COUPON_STATUS IN ('2','3') \
    AND DEL_FLAG = 0 \
    UNION \
    SELECT COUPON_ID,EVENT_ID \
    FROM TACT_SALES_COUPON_CONTENT \
    WHERE COUPON_ID IN (REPLACE_COUPONID) \
    AND DEL_FLAG = 0 \
    ) A \
WHERE \
    EVENT_ID IN (SELECT EVENT_ID FROM TACT_SALES_COUPON_CONTENT WHERE COUPON_ID = ?)
## \u9500\u552e\u4f18\u60e0\u5238\u4f7f\u7528\u6570\u91cf \u3010\u6d3b\u52a8\u5916\u53e0\u52a0\u3011   
sql.selectSalesCouponUsedCnt.002 = \
SELECT COUNT(1) AS CNT \
FROM ( \
    SELECT COUPON_ID,EVENT_ID \
    FROM TACT_SALES_COUPON_CONTENT \
    WHERE CONTRACT_NO = ? \
    AND COUPON_STATUS IN ('2','3') \
    AND DEL_FLAG = 0 \
    UNION \
    SELECT COUPON_ID,EVENT_ID \
    FROM TACT_SALES_COUPON_CONTENT \
    WHERE COUPON_ID IN (REPLACE_COUPONID) \
    AND DEL_FLAG = 0 \
) A 
# Add for \u667a\u80fd\u4ea4\u8f66\u65b0\u8f66\u8ba2\u5355\u4ee5\u53ca\u65b0\u8f66\u751f\u4ea7\u7269\u6d41\u72b6\u6001 YQ 20161222 Start
# MOD for \u53d7\u7406\u65e5\u4e0d\u4e3a\u7a7a\u6761\u4ef6\u8ffd\u52a0 zhanglei 20170605 Start
#\u65b0\u8f66\u8ba2\u5355\u4fe1\u606f\u67e5\u8be2
sql.selectNewCarOrderInfo.001 = \
SELECT \
    TRIM(T1.DEALERCODE) AS DEALERCODE, \
    TRIM(T1.CONTRACTNO) AS CONTRACTNO, \
    TRIM(T1.FRAMENO) AS FRAMENO, \
    T1.ORDERSTATE, \
    T1.BUYERNAME, \
    T1.NOMINEE, \
    TRIM(T1.MODEL) AS MODEL, \
    TRIM(T1.PAYMENTSTYLE) AS PAYMENTSTYLE, \
    T1.EARNEST, \
    TRIM(T1.SFX) AS SFX, \
    T1.DELIVERYPLACE, \
    TRIM(T1.BUYERTEL1) AS BUYERTEL1, \
    TRIM(T1.BUYERTEL2) AS BUYERTEL2, \
    TRIM(T1.BUYERMOBIL1) AS BUYERMOBIL1, \
    TRIM(T1.BUYERMOBIL2) AS BUYERMOBIL2, \
    TRIM(T1.NOMINEETEL1) AS NOMINEETEL1, \
    TRIM(T1.NOMINEETEL2) AS NOMINEETEL2, \
    TRIM(T1.NOMINEEMOBIL1) AS NOMINEEMOBIL1, \
    TRIM(T1.NOMINEEMOBIL2) AS NOMINEEMOBIL2, \
    TRIM(T1.VEHICLENAMECODE) AS VEHICLENAMECODE, \
    TRIM(T1.VEHICLENAME) AS VEHICLENAME, \
    TRIM(T1.SALESCODE) AS SALESCODE, \
    T1.SALES, \
    T1.CONTRACTDATE, \
    T2.DISTINEARRIVED_DATE AS DISTINEARRIVED_DATE, \
    T2.RDNEWLYDELIVERY_DATE AS RDNEWLYDELIVERY_DATE \
FROM \
    TACT_ORDER_VEHICLE_NODELIVERY T1 \
    LEFT JOIN IMS_VEHICLE_LOGI T2 \
    ON TRIM(T1.CONTRACTNO) = T2.CONTRACT_NO \
    AND T2.IS_DEL = '0' \
WHERE \
    T1.DELETEFLAG = '0' \
    AND T1.CONTRACTDATE IS NOT NULL 
# MOD for \u53d7\u7406\u65e5\u4e0d\u4e3a\u7a7a\u6761\u4ef6\u8ffd\u52a0 zhanglei 20170605 End

#\u65b0\u8f66\u751f\u4ea7\u7269\u6d41\u72b6\u6001\u67e5\u8be2
sql.selectNewCarStatusInfo.001 = \
SELECT \
    TRIM(T1.DEALERCODE) AS DEALERCODE, \
    TRIM(T1.CONTRACTNO) AS CONTRACTNO, \
    TRIM(T1.FRAMENO) AS FRAMENO, \
    T1.ORDERSTATE, \
    T1.BUYERNAME, \
    T1.NOMINEE, \
    TRIM(T1.MODEL) AS MODEL, \
    TRIM(T1.SFX) AS SFX, \
    T2.DISTINEARRIVED_DATE AS DISTINEARRIVED_DATE, \
    T2.RDNEWLYDELIVERY_DATE AS RDNEWLYDELIVERY_DATE \
FROM \
    TACT_ORDER_VEHICLE_NODELIVERY T1 \
    INNER JOIN IMS_VEHICLE_LOGI T2 \
    ON TRIM(T1.CONTRACTNO) = T2.CONTRACT_NO \
WHERE \
    T2.IS_DEL = '0' \
    AND T1.DELETEFLAG = '0' \
    AND T2.UPD_DATETIME BETWEEN TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') AND TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS')

# Add for \u667a\u80fd\u4ea4\u8f66\u65b0\u8f66\u8ba2\u5355\u4ee5\u53ca\u65b0\u8f66\u751f\u4ea7\u7269\u6d41\u72b6\u6001 YQ 20161222 End

# Add for  \u4f1a\u5458\u4fe1\u606f\u540c\u6b65_\u8d26\u53f7\u8f66\u8f86\u4fe1\u606f\u540c\u6b65  pengnj 20170104 Sart
sql.getUserCarInfo.001 = \
SELECT \
	USER_CAR.UID_GTMC AS UID_GTMC, \
	USER_CAR.VINNO AS VINNO, \
	USER_CAR.REGISTERNO AS REGISTERNO, \
	USER_CAR.CAR_NICKNAME AS CAR_NICKNAME, \
	USER_CAR.DELETEFLAG AS DELETEFLAG, \
	TACT_ORDER_VEHICLE.MODEL AS MODEL, \
	TACT_ORDER_VEHICLE.SFX AS SFX, \
	TACT_ORDER_VEHICLE.COLORCD AS COLORCD, \
	TACT_ORDER_VEHICLE.VHCENGINE AS VHCENGINE, \
	TACT_ORDER_VEHICLE.COLORNAME AS COLORNAME, \
	TACT_ORDER_VEHICLE.VEHICLENAMECODE AS VEHICLENAMECODE, \
	TACT_ORDER_VEHICLE.VEHICLENAME AS VEHICLENAME, \
	TACT_ORDER_VEHICLE.VHCGRADE AS VHCGRADE, \
	TACT_ORDER_VEHICLE.VHCMISSION AS VHCMISSION, \
	TACT_ORDER_VEHICLE.VHCEXHAUST AS VHCEXHAUST, \
	TO_CHAR ( \
		TACT_ORDER_VEHICLE.SALESDATE, \
		'YYYY-MM-DD HH24:MI:SS' \
	) AS VHCSALESDATE, \
	KPI_SRV_ORDER_HISTORY.MILEAGE AS MILEAGE, \
	USER_LOGIN.TEL_NO AS TEL_NO \
FROM \
	USER_CAR \
LEFT JOIN ( \
	SELECT \
		FRAMENO, \
		MODEL, \
		SFX, \
		COLORCD, \
		COLORNAME, \
		VEHICLENAMECODE, \
		VEHICLENAME, \
		VHCENGINE, \
		VHCGRADE, \
		VHCMISSION, \
		VHCEXHAUST, \
		SALESDATE \
	FROM \
		( \
			SELECT \
				FRAMENO, \
				MODEL, \
				SFX, \
				COLORCD, \
				COLORNAME, \
				VEHICLENAMECODE, \
				VEHICLENAME, \
				VHCENGINE, \
				VHCGRADE, \
				VHCMISSION, \
				VHCEXHAUST, \
				SALESDATE \
			FROM \
				TACT_ORDER_VEHICLE_BK \
			WHERE \
				FRAMENO = TRIM (?) \
			AND DELETEFLAG = '0' \
			ORDER BY \
				CONTRACTDATE DESC \
		) \
	WHERE \
		ROWNUM = 1 \
) TACT_ORDER_VEHICLE ON TACT_ORDER_VEHICLE.FRAMENO = USER_CAR.VINNO \
LEFT JOIN ( \
  SELECT \
    VINNO, \
    MAX(MILEAGE) AS MILEAGE  \
  FROM \
    KPI_SRV_ORDER_HISTORY A  \
    LEFT JOIN KPI_SRV_SRVTYPE B  \
      ON A.TYPICALSRVTYPE = B.SRVTYPE  \
    LEFT JOIN IDM_EMPLOYEE_USERS C  \
      ON TRIM(A.SACODE) = C.ACCOUNT  \
      AND A.DEALERCODE = TRIM(C.DLRCODE)  \
      AND C.ACCOUNTTYPE = 'tact'  \
    INNER JOIN (  \
      SELECT \
        T.FRAMENO \
        , MAX(T.DELIVERYENDDATE) AS DELIVERYENDDATE  \
      FROM \
        TACT_ORDER_VEHICLE_BK T  \
      GROUP BY \
        T.FRAMENO \
    ) D  \
      ON A.VINNO = D.FRAMENO  \
      AND A.ORDERDATE > D.DELIVERYENDDATE  \
  WHERE \
    A.VINNO = TRIM(?)  \
    AND (TRIM(A.TYPICALSRVTYPE) NOT IN ('D', '7')  \
      OR A.TYPICALSRVTYPE IS NULL \
    )  \
    AND A.UPDATETIME <= SYSDATE  \
  GROUP BY \
    VINNO \
) KPI_SRV_ORDER_HISTORY  \
  ON KPI_SRV_ORDER_HISTORY.VINNO = USER_CAR.VINNO \
LEFT JOIN USER_LOGIN \
    ON USER_LOGIN.UID_GTMC = ? \
WHERE \
	USER_CAR.UID_GTMC = ? \
AND USER_CAR.VINNO = TRIM (?)

# Add for  \u4f1a\u5458\u4fe1\u606f\u540c\u6b65_\u8d26\u53f7\u8f66\u8f86\u4fe1\u606f\u540c\u6b65  pengnj 20170104 end

# Add for  \u4f1a\u5458\u4fe1\u606f\u540c\u6b65_\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u540c\u6b65 pengnj 20161230 Sart
sql.getUserLoginInfo.001 = \
SELECT \
        SYS_CD, \
        USER_ID, \
        UID_GTMC, \
        TEL_NO, \
        PWD, \
        ACTIVATE_FLG, \
        CREDATE, \
        UPDATETIME, \
        DELETEFLAG \
FROM \
	USER_LOGIN \
WHERE \
	USER_ID = ? \
	AND SYS_CD = ? 
# Add for  \u4f1a\u5458\u4fe1\u606f\u540c\u6b65_\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u540c\u6b65 pengnj 20161230 end

# Add for  \u4f1a\u5458\u4fe1\u606f\u540c\u6b65_\u8d26\u53f7\u57fa\u672c\u5c5e\u6027\u4fe1\u606f\u540c\u6b65  pengnj 20170102 Sart
sql.getLogInUserBaseInfo.001 = \
SELECT \
        UID_GTMC, \
        NAME, \
        SEX, \
        BIRTHDAY_YEAR, \
        BIRTHDAY_MONTH, \
        BIRTHDAY_DAY, \
        AVATAR_IMG_GCLUB, \
        AVATAR_IMG_ICLUB, \
        ADDRESS_PROVINCE, \
        ADDRESS_CITY, \
        ADDRESS_DETAIL, \
        DEALER_CODE, \
        DRIVING_LICENSE_EXPIRY_DATE, \
        APIREGISTER, \
        TO_CHAR(REGIST_DATE_GCLUB, 'YYYY-MM-DD HH24:MI:SS') AS REGISTDATEGCLUB, \
        REGIST_DATE_ICLUB, \
        WX_CODE, \
        NICKNAME, \
        USER_TYPE, \
        IDENTITY_CARD, \
        RECOMMENDED_NAME, \
        REGIST_FROM_TYPE, \
        REGIST_FROM_CD, \
        STATUS, \
        LOGIN_COUNT_ICLUB, \
        LAST_LOGIN_DATE_ICLUB, \
        LOGIN_FAIL_COUNT_ICLUB, \
        LOGIN_COUNT_GCLUB, \
        LAST_LOGIN_DATE_GCLUB, \
        LOGIN_FAIL_COUNT_GCLUB, \
        DEVICE_ID, \
        APP_VERSION, \
        APP_OS_TYPE, \
        CRT_USER, \
        CRT_DATETIME, \
        UPD_USER, \
        UPD_DATETIME \
FROM \
	USER_BASE_INFO \
WHERE \
	UID_GTMC = ? 
	
# Add for  \u4f1a\u5458\u4fe1\u606f\u540c\u6b65_\u8d26\u53f7\u57fa\u672c\u5c5e\u6027\u4fe1\u606f\u540c\u6b65  pengnj 20170102 end

# Modify for \u7edf\u5408\u7ba1\u7406ID\u8ffd\u52a0 zhanglei 20170308 Sart
# Add for  \u6839\u636e \u53c2\u6570.\u624b\u673a\u53f7\u7801\u67e5\u8be2\u6240\u5c5e\u7cfb\u7edfCD\uff0c\u7528\u6237ID pengnj 20170117 Sart
sql.getuserrelationbytel.001 = \
SELECT \
        SYS_CD, \
        USER_ID, \
        UID_GTMC \
FROM \
	USER_LOGIN \
WHERE \
	TEL_NO = TRIM(?) 
# Add for  \u6839\u636e \u53c2\u6570.\u624b\u673a\u53f7\u7801\u67e5\u8be2\u6240\u5c5e\u7cfb\u7edfCD\uff0c\u7528\u6237ID pengnj 20170117 end
# Modify for \u7edf\u5408\u7ba1\u7406ID\u8ffd\u52a0 zhanglei 20170308 end

# Add for iclub2app\u7ad9\u5185\u4fe1\u540c\u6b65\u63a5\u53e3  XDD 20161229 Start
#EIP\u7ad9\u5185\u4fe1\u8868\u7684ID\u53d6\u5f97
sql.selectInnerMsg.001 = \
SELECT \
    INNER_MSG_SEQ.nextval ID \
FROM \
    DUAL

#\u540c\u6b65\u6570\u636e\u67e5\u8be2
sql.selectInnerMsg.002 = \
SELECT \
    ID \
FROM \
    INNER_MSG \
WHERE \
    ID = TO_NUMBER(?) \
FOR UPDATE NOWAIT
#EIP\u7ad9\u5185\u4fe1\u4fe1\u606f\u4fdd\u5b58
sql.InsertInnerMsg.001 = \
INSERT INTO \
    INNER_MSG \
    ( \
        ID, \
        TEL_NO, \
        SEND_DATE, \
        TITLE, \
        CONTENT_VAL, \
        MESSAGE_URL, \
        SYNC_FLG, \
        CREDATE, \
        CREUSER \
    ) \
    VALUES \
    ( \
        TO_NUMBER(?), \
        ?, \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        ?, \
        ?, \
        ?, \
        '0', \
        SYSDATE, \
        'iclub' \
    )

#EIP\u540c\u6b65flg\u66f4\u65b0
sql.updateInnerMsg.001 = \
UPDATE \
    INNER_MSG \
SET \
    SYNC_FLG = '1', \
    UPDATETIME = SYSDATE, \
    UPDATEUSER = 'app' \
WHERE \
    ID = TO_NUMBER(?) 
# Add for iclub2app\u7ad9\u5185\u4fe1\u540c\u6b65\u63a5\u53e3  XDD 20161229 End

# Add for iclub2app\u4f18\u60e0\u52b5\u540c\u6b65\u63a5\u53e3 yuan_yumei start 
sql.insertTiCouponEip2app.001 =\
INSERT INTO \
    EIPUSER.TI_COUPON_EIP2APP \
    ( \
          SEQ_ID, \
          COUPON_ID, \
          BATCH_ID, \
          PHONE, \
          BC_ID, \
          TC_ID, \
          COUPON_NAME, \
          COUPON_REMARK, \
          COPYRIGHT, \
          STATUS, \
          GRANT_TYPE, \
          COUPON_COST, \
          COUPON_COUNT, \
          COUPON_AMOUNT, \
          COUPON_ISSUER, \
          FROM_APPLICATION, \
          CONPON_USE_REMARK, \
          COUPON_TYPE, \
          COUPON_BEGIN, \
          COUPON_END, \
          COUPON_STATUS, \
          PUBLISH_DATE, \
          USEING_DATE, \
          USEED_DATE, \
          ORDER_ID, \
          DEALER_CODE, \
          READ_FLAG, \
          CREATE_DATE, \
          CREATE_BY, \
          UPDATE_DATE, \
          UPDATE_BY, \
          COUPON_INTRODUCTION, \
          THIRD_PARTY_URL, \
          THIRD_PARTY_ID, \
          COUPON_PWD, \
          COUPON_PHONE \
    ) \
    VALUES \
    ( \
        EIPUSER.SEQ_TI_COUPON_EIP2APP.NEXTVAL, \
        TO_NUMBER(?), \
        ?, \
        TO_NUMBER(?), \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        ?, \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        ?, \
        ?, \
        ?, \
        SYSDATE, \
        1, \
        SYSDATE, \
        1, \
        ?, \
        ?, \
        ?, \
        ?, \
        ? \
    )
# Add for iclub2app\u4f18\u60e0\u52b5\u540c\u6b65\u63a5\u53e3 yuan_yumei end

# Add for:\u67e5\u8be2\u3010\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u3011\uff0c\u83b7\u53d6\u7edf\u5408\u7ba1\u7406ID yuan_yumei start 
sql.VhcInfo.006 = \
SELECT UID_GTMC \
FROM USER_LOGIN \
WHERE TEL_NO = ?
# Add for:\u67e5\u8be2\u3010\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u3011\uff0c\u83b7\u53d6\u7edf\u5408\u7ba1\u7406ID yuan_yumei end 

#TMTS Add  start *****************************
#2017-01-05 start *****************************
#\u83b7\u53d6\u9001\u4fee\u8005\u7535\u8bdd
sql.MemberPhoneInfo.001=SELECT T.LATESTSNDCUSTTEL1,T.LATESTSNDCUSTTEL2 ,  \
T.NOMINEEMOBIL1,T.NOMINEEMOBIL2,T.BUYERMOBIL1,T.BUYERMOBIL2,T.BUYERTEL1,T.BUYERTEL2 \
FROM TACT_CUSTOMER_VEHICLE  T WHERE T.VINNO =?
#\u8f66\u8f86\u7ed1\u5b9a
sql.MemberPhoneInfo.002= SELECT COUNT(1) CARCOUNT FROM    \
(SELECT DISTINCT T1.UID_GTMC FROM USER_LOGIN T1 WHERE T1.TEL_NO = ? ) T1   \
inner join  USER_CAR T2   \
ON T1.UID_GTMC = T2.UID_GTMC  \
WHERE T2.VINNO =?
#2017-01-05 end *****************************

#2017-01-18 start *****************************
#\u83b7\u53d6\u8d26\u53f7\u57fa\u672c\u5c5e\u6027
sql.user_Info.001=  \
SELECT   \
T1.UID_GTMC,  \
T2.NAME,	  \
T2.SEX,	  \
T2.BIRTHDAY_YEAR,	  \
T2.BIRTHDAY_MONTH,	  \
T2.BIRTHDAY_DAY,	  \
T2.AVATAR_IMG_GCLUB,	  \
T2.ADDRESS_DETAIL,  \
T2.DEALER_CODE  \
FROM USER_LOGIN T1  \
INNER JOIN USER_BASE_INFO T2  \
ON T1.UID_GTMC = T2.UID_GTMC  \
WHERE  SYS_CD = ? \
AND TEL_NO = ? \
AND DELETEFLAG = '0'
#\u8f66\u8f86\u7ed1\u5b9a
sql.user_Info.002=  \
SELECT COUNT(1)  AS CARCOUNT FROM  USER_CAR T1 \
WHERE T1.UID_GTMC = ?
#2017-01-18 end *****************************
#TMTS Add end *****************************

#\u6839\u636e\u7528\u6237\u7535\u8bdd\u83b7\u53d6\u8d26\u53f7\u4fe1\u606f
sql.getUserInfo.005 = \
SELECT UID_GTMC,TEL_NO \
FROM USER_LOGIN \
WHERE TEL_NO = ? 

#add for:\u67e5\u8be2\u7528\u6237\u5df2\u7ed1\u5b9a\u7684\u8f66\u8f86  yuan_yumei 20170221 start 
sql.getVehicleInfo.005 =  \
SELECT VINNO   \
FROM USER_CAR  \
WHERE UID_GTMC =  ?  \
AND DELETEFLAG = '0'
#add for:\u67e5\u8be2\u7528\u6237\u5df2\u7ed1\u5b9a\u7684\u8f66\u8f86  yuan_yumei 20170221 end 

#20170303 \u6708\u5355\u4f4d\u4f1a\u5458\u79ef\u5206\u6c47\u603b Add by YQ Start
#\u6708\u5355\u4f4d\u4f1a\u5458\u79ef\u5206\u6c47\u603b\u53d6\u5f97
sql.UserPointSumInfoList.001 = \
SELECT \
  USER_ID \
  , YEAR \
  , GET_COST_FALG \
  , POINT_SUM_JAN \
  , POINT_SUM_FEB \
  , POINT_SUM_MAR \
  , POINT_SUM_APR \
  , POINT_SUM_MAY \
  , POINT_SUM_JUN \
  , POINT_SUM_JUL \
  , POINT_SUM_AUG \
  , POINT_SUM_SEPT \
  , POINT_SUM_OCT \
  , POINT_SUM_NOV \
  , POINT_SUM_DEC \
FROM \
   USER_POINT_SUM \
WHERE \
  USER_ID = ? \
ORDER BY \
  USER_ID \
  , YEAR \
  , GET_COST_FALG
#20170303 \u6708\u5355\u4f4d\u4f1a\u5458\u79ef\u5206\u6c47\u603b Add by YQ End


#20170313 \u5458\u5de5\u4fe1\u606f\u540c\u6b65 Add by zhang_lei Start
#\u5458\u5de5\u4fe1\u606f\u53d6\u5f97
sql.EmployeeForSend.001 = \
SELECT \
  PER_ID \
  , DEALERCODE \
  , EMPLOYEECODE \
  , EMPLOYEENAME \
  , IS_DEL \
  , QRCODE1 \
  , QRCODE2 \
  , QRCODE3 \
  , QRCODE4 \
  , QRCODE5 \
FROM \
   DLRHR_EMPLOYEE_USERS_DETAIL \
WHERE \
  PER_ID = ?

#\u5458\u5de5\u4fe1\u606f\u63d2\u5165
sql.EmployeeForSend.002 = \
INSERT INTO \
    DLRHR_EMPLOYEE_USERS_DETAIL \
    ( \
          PER_ID, \
          DEALERCODE, \
          EMPLOYEECODE, \
          EMPLOYEENAME, \
          MOBILE, \
          QRCODE1, \
          QRCODE2, \
          QRCODE3, \
          QRCODE4, \
          QRCODE5, \
          IS_DEL, \
          CRT_DATETIME, \
          CRT_USER, \
          UPD_DATETIME, \
          UPD_USER \
    ) \
    VALUES \
    ( \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        TO_NUMBER(?), \
        SYSDATE, \
        'IBPP', \
        SYSDATE, \
        'IBPP' \
    )

#\u5458\u5de5\u4fe1\u606f\u66f4\u65b0
sql.EmployeeForSend.003 = \
UPDATE \
  DLRHR_EMPLOYEE_USERS_DETAIL \
SET \
  DEALERCODE = ?, \
  EMPLOYEECODE = ?, \
  EMPLOYEENAME = ?, \
  MOBILE = ?, \
  QRCODE1 = ?, \
  QRCODE2 = ?, \
  QRCODE3 = ?, \
  QRCODE4 = ?, \
  QRCODE5 = ?, \
  IS_DEL = TO_NUMBER(?), \
  UPD_DATETIME = SYSDATE, \
  UPD_USER = 'IBPP' \
WHERE \
  PER_ID = ?
#20170313 \u5458\u5de5\u4fe1\u606f\u540c\u6b65 Add by zhang_lei End

#Add by huang_yeguang at 20170323 for App \u7aef\u770b\u5230\u7ef4\u4fee\u8f66\u8f86\u9879\u76ee\u4e0etact\u4e0d\u7b26 start
#\u65bd\u5de5\u9879\u76ee\u660e\u7ec6DB\u73b0\u6709\u6570\u636e\u67e5\u8a62
sql.FindExistOrderProjects.001 = \
SELECT \
  SRVTYPE, \
  SRVCODE, \
  SRVSEQUECE \
FROM \
  SRV_SRVDETAIL_F \
WHERE \
  DEALERCODE = ? \
  AND ORDERNO = ?

#\u65bd\u5de5\u9879\u76ee\u660e\u7ec6DB\u5931\u6548\u6570\u636e\u5220\u9664
sql.UpdateExistOrderProjects.001 = \
UPDATE \
  SRV_SRVDETAIL_F \
SET \
  DELETEFLAG = '1' \
WHERE \
  DEALERCODE = ? \
AND ORDERNO = ?

#\u96f6\u4ef6\u660e\u7ec6DB\u73b0\u6709\u6570\u636e\u67e5\u8a62
sql.FindExistOrderParts.001 = \
SELECT \
  PARTSITEMSEQ \
FROM \
  SRV_PARTSDETAIL_F \
WHERE \
  DEALERCODE = ? \
AND ORDERNO = ?

#\u96f6\u4ef6\u660e\u7ec6DB\u5931\u6548\u6570\u636e\u5220\u9664 
sql.UpdateExistOrderParts.001 = \
UPDATE \
  SRV_PARTSDETAIL_F \
SET \
  DELETEFLAG = '1' \
WHERE \
  DEALERCODE = ? \
AND ORDERNO = ?

#\u4e34\u65f6\u96f6\u4ef6\u660e\u7ec6DB\u73b0\u6709\u6570\u636e\u67e5\u8a62
sql.FindExistOrderParts.002 = \
SELECT \
  PARTSITEMSEQ \
FROM \
  SRV_PARTSDETAILTEMP_F \
WHERE \
  DEALERCODE = ? \
AND ORDERNO = ?

#\u4e34\u65f6\u96f6\u4ef6\u660e\u7ec6DB\u5931\u6548\u6570\u636e\u5220\u9664
sql.UpdateExistOrderParts.002 = \
UPDATE \
  SRV_PARTSDETAILTEMP_F \
SET \
  DELETEFLAG = '1' \
WHERE \
  DEALERCODE = ? \
AND ORDERNO = ?

#Add by huang_yeguang at 20170323 for App \u7aef\u770b\u5230\u7ef4\u4fee\u8f66\u8f86\u9879\u76ee\u4e0etact\u4e0d\u7b26 end

#Add by liang_xiao at 20170412 for \u9500\u552e\u4f18\u60e0\u5238\u5931\u6548  start
#\u9500\u552e\u4f18\u60e0\u5238\u5931\u6548  start
#\u83b7\u53d6\u672a\u4f7f\u7528\u7684\u9500\u552e\u4f18\u60e0\u5238\u4fe1\u606f SQL002
sql.SelectSaleCouponInfo.002 = \
SELECT \
  COUPON_ID, \
  DEALER_CODE, \
  COUPON_STATUS, \
  TO_CHAR(COUPON_BEGIN,'YYYY-MM-DD') AS COUPON_BEGIN, \
  TO_CHAR(COUPON_END,'YYYY-MM-DD') AS COUPON_END, \
  EVENT_ID, \
  DEL_FLAG \
FROM \
  TACT_SALES_COUPON_CONTENT \
WHERE \
  EVENT_ID = ? \
AND COUPON_ID = ? \
AND COUPON_STATUS = '0'

#mod for \u7535\u5546\u9500\u552e\u4f18\u60e0\u5238\u4fe1\u606f\u540c\u6b65\u7ed9APP by liangxiao at 20170815 start
#\u83b7\u53d6\u66f4\u65b0\u540e\u9500\u552e\u4f18\u60e0\u5238\u4fe1\u606f SQL003
sql.SelectSaleCouponInfo.003 = \
SELECT \
  COUPON_ID, \
  DEALER_CODE, \
  COUPON_STATUS, \
  TO_CHAR(COUPON_BEGIN,'YYYY-MM-DD') AS COUPON_BEGIN, \
  TO_CHAR(COUPON_END,'YYYY-MM-DD') AS COUPON_END, \
  EVENT_ID, \
  DEL_FLAG, \
  CARD_NAME, \
  COUPON_KBN, \
  COUPON_SUM, \
  COUPON_ENTITY_CONTENT, \
  OPEN_ID, \
  COUPON_RULE, \
  DEALER_CODE_FROM \
FROM \
  TACT_SALES_COUPON_CONTENT \
WHERE \
  EVENT_ID = ? \
AND COUPON_ID = ? 

#\u9500\u552e\u4f18\u60e0\u5238\u5931\u6548  end
#mod for \u7535\u5546\u9500\u552e\u4f18\u60e0\u5238\u4fe1\u606f\u540c\u6b65\u7ed9APP by liangxiao at 20170815 end

#\u552e\u540e\u4f18\u60e0\u5238\u5931\u6548  start
#\u83b7\u53d6\u672a\u4f7f\u7528\u7684\u5fae\u4fe1\u4f18\u60e0\u5238\u4fe1\u606f SQL001
sql.SelectWXCouponInfo.001 = \
SELECT \
  COUPON_CONTENT_GUID, \
  COUPON_ID, \
  DEALER_CODE, \
  COUPON_STATUS, \
  COUPON_BEGIN, \
  COUPON_END, \
  EVENT_ID, \
  DEL_FLAG \
FROM \
  WX_COUPON_CONTENT \
WHERE \
  EVENT_ID = RPAD(?, 5, ' ') \
AND COUPON_ID = ? \
AND COUPON_STATUS = '0'

#\u83b7\u53d6\u66f4\u65b0\u540e\u5fae\u4fe1\u4f18\u60e0\u5238\u4fe1\u606f SQL002
sql.SelectWXCouponInfo.002 = \
SELECT \
  COUPON_CONTENT_GUID, \
  COUPON_ID, \
  DEALER_CODE, \
  COUPON_STATUS, \
  COUPON_BEGIN, \
  COUPON_END, \
  EVENT_ID, \
  DEL_FLAG, \
  OPEN_ID, \
  COUPON_KBN, \
  CARD_ID, \
  COUPON_CONTENT, \
  TYPE_ID \
FROM \
  WX_COUPON_CONTENT \
WHERE \
  EVENT_ID = RPAD(?, 5, ' ') \
AND COUPON_ID = ? 

#\u552e\u540e\u4f18\u60e0\u5238\u5931\u6548  end
#Add by liang_xiao at 20170412 for \u9500\u552e\u4f18\u60e0\u5238\u5931\u6548 end

# Add 20170517 for\u7535\u5546\u4f18\u60e0\u5238\u540c\u6b65\u7ed9APP by liangxiao at Start
#\u83b7\u53d6\u5fae\u4fe1\u4f18\u60e0\u5238\u4fe1\u606f SQL003
sql.SelectWXCouponInfo.003 = \
SELECT \
    EVENT_ID, \
    OPEN_ID, \
    COUPON_KBN, \
	TYPE_ID, \
	COUPON_STATUS, \
	COUPON_ID, \
	CARD_ID, \
	COUPON_CONTENT, \
	COUPON_RULE, \
	COUPON_BEGIN, \
	COUPON_END, \
	SRV_ORDER_NO, \
	DEALER_CODE_FROM, \
	COUPON_DETAIL, \
	DEALER_CODE \
FROM WX_COUPON_CONTENT \
WHERE  COUPON_ID = ?
# Add 20170517 for\u7535\u5546\u4f18\u60e0\u5238\u540c\u6b65\u7ed9APP by liangxiao at End

#Add by liang_xiao at 20170412 for \u4f18\u60e0\u5238\u6838\u9500KPI  start
#\u9500\u552e\u4f18\u60e0\u5238\u6838\u9500KPI  start
sql.SelectSalesCouponKPI.001 = \
SELECT \
  COUPON_ID, \
  EVENT_ID, \
  USER_PHONE, \
  VIN_NO, \
  COUPON_STATUS, \
  VEHICLENAME, \
  SFX, \
  DEALER_CODE, \
  DEALER_NAME,\
  PAYMENTENDDATE, \
  DELIVERYENDDATE, \
  BUYERNAME, \
  BUYERTEL1, \
  INPUTDATE, \
  CONTRACTNO, \
  SALESDATE \
FROM \
  TEMP_TABLE_KPI 
#\u9500\u552e\u4f18\u60e0\u5238\u6838\u9500KPI  end

#\u552e\u540e\u4f18\u60e0\u5238\u6838\u9500KPI  start
sql.SelectSalesCouponKPI.002 = \
SELECT \
  COUPON_ID, \
  EVENT_ID, \
  COUPON_STATUS, \
  USER_PHONE, \
  GET_DATE, \
  BIND_DATE, \
  WRITEOFFS_DATE, \
  VIN_NO, \
  REGISTERNO ,\
  VHCNAME, \
  SFX, \
  CUSTOMERNAME, \
  DEALER_CODE, \
  DEALER_NAME, \
  BUYDATE, \
  TEL1, \
  ORDERNO, \
  TYPICALSRVTYPE, \
  SALESTOTAL, \
  DEALERCODE, \
  BUYER_DEALER_NAME, \
  BUYERNAME, \
  BUYERTEL1, \
  INPUTDATE, \
  CONTRACTNO, \
  SALESDATE, \
  DELIVERYENDDATE \
FROM \
  TEMP_TABLE_KPI_WX 
#\u552e\u540e\u4f18\u60e0\u5238\u6838\u9500KPI  end

#Add by liang_xiao at 20170417 for \u4f18\u60e0\u5238\u89c4\u5219\u53d6\u5f97 start
#\u9500\u552e\u4f18\u60e0\u5238\u89c4\u5219\u53d6\u5f97 SQL001
sql.SelectSalesCouponRule.001 = \
SELECT \
  CLASSFIRST, \
  CLASSFIRSTNAME, \
  CLASSSECOND, \
  CLASSSECONDNAME, \
  ITEMNAME, \
  RULEVALUE, \
  ITEMCODE, \
  INVALIDRULE, \
  VALUETYPE, \
  ACTIVEFLAG \
FROM \
  BASE_SALE_COUPON_RULE 

#\u552e\u540e\u4f18\u60e0\u5238\u89c4\u5219\u53d6\u5f97 SQL001
sql.SelectWXCouponRule.001 = \
SELECT \
  PRULECODE, \
  RULECODE, \
  ITEMNAME, \
  RULEVALUE, \
  INVALIDRULE, \
  VALUETYPE, \
  ACTIVEFLAG \
FROM \
  BASE_BACK_COUPON_RULE 
  
#\u83b7\u5f97\u6d3b\u52a8id SQL001
sql.SelectEventId.001 = \
SELECT \
  EVENT_ID \
FROM \
  (SELECT \
    EVENT_ID \
  FROM \
    BASE_COUPON_RULE \
  WHERE \
    EVENT_ID != '44444' \
  ORDER BY TO_NUMBER(EVENT_ID) DESC)  \
WHERE ROWNUM = 1

#\u83b7\u5f97\u4f18\u60e0\u5238\u53f7\u5217\u8868 SQL001
sql.SelectCouponId.001 = \
SELECT \
  COUPON_ID \
FROM \
  WX_COUPON_CONTENT \
WHERE \
  COUPON_ID LIKE '1701%' \
AND LENGTH(COUPON_ID) = 9

#Add by liang_xiao at 20170417 for \u4f18\u60e0\u5238\u89c4\u5219\u53d6\u5f97 end

#Add by zhanglei at 20170412 for iclub\u9996\u6b21\u7ed1\u8f66\u53d1\u5238 start
sql.getVehicleInfo.006 = \
SELECT \
    COUNT(1) AS COUNT \
FROM \
    USER_CAR \
WHERE \
    UID_GTMC = TRIM(?)
#Add by zhanglei at 20170412 for iclub\u9996\u6b21\u7ed1\u8f66\u53d1\u5238 end

#Add for:\u83b7\u53d6\u900f\u660e\u8f66\u95f4\u8f66\u578b\u89c6\u9891\u4fe1\u606f    chen_yuan 20170413 start
#\u67e5\u8be2\u8f66\u8f86\u89c6\u9891\u4fe1\u606f   
sql.getCarvideoUrlBaseInfo.001= \
SELECT \
    a.SFX,a.COLORCD,a.FRAMENO,b.URL \
FROM \
    TACT_ORDER_VEHICLE_BK a,CAR_VIDEO b \
WHERE \
    a.SFX=b.SFX \
    AND a.COLORCD=b.COLORCD \
AND \
    a.DEALERCODE=? \
    AND a.CONTRACTNO=? 
#Add for:\u83b7\u53d6\u900f\u660e\u8f66\u95f4\u8f66\u578b\u89c6\u9891\u4fe1\u606f    chen_yuan 20170413 end

#Add by shenkang at 20170413 for \u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u4e34\u65f6\u4fe1\u606f\u63a5\u53e3 start
#\u5220\u9664\u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u9a8c\u8bc1\u8868\u8fc7\u671f\u6570\u636e
sql.delSrvOrderValiInfo.001 = \
DELETE \
TACT_SRV_ORDER_VALI \
WHERE \
VALIUPDATETIME < SYSDATE - ? 

#\u5220\u9664\u7ef4\u4fee\u660e\u7ec6\u9a8c\u8bc1\u8868\u8fc7\u671f\u6570\u636e
sql.delSrvDetailValiInfo.001 = \
DELETE \
SRV_SRVDETAIL_F_VALI \
WHERE \
VALIUPDATETIME < SYSDATE - ? 

#\u5220\u9664\u96f6\u4ef6\u660e\u7ec6\u9a8c\u8bc1\u8868\u8fc7\u671f\u6570\u636e 
sql.delSrvPartsDetailValiInfo.001 = \
DELETE \
SRV_PARTSDETAIL_F_VALI \
WHERE \
VALIUPDATETIME < SYSDATE - ? 

#\u5220\u9664\u4e34\u65f6\u96f6\u4ef6\u660e\u7ec6\u9a8c\u8bc1\u8868\u8fc7\u671f\u6570\u636e
sql.delSrvPartsDetailValiTempInfo.001 = \
DELETE \
SRV_PARTSDETAILTEMP_F_VALI \
WHERE \
VALIUPDATETIME < SYSDATE - ? 

#\u6839\u636e\u4e3b\u952e\u5220\u9664\u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u9a8c\u8bc1\u8868\u6570\u636e
sql.delSrvOrderValiInfo.002 = \
DELETE \
TACT_SRV_ORDER_VALI \
WHERE \
DEALERCODE = TRIM(?) \
AND ORDERNO = TRIM(?)

#\u7ef4\u4fee\u5de5\u5355\u4fe1\u606f\u9a8c\u8bc1\u8868\u6570\u636e\u63d2\u5165
sql.insertSrvOrderValiInfo.001 = \
INSERT INTO \
    TACT_SRV_ORDER_VALI \
       (DEALERCODE, \
       ORDERNO, \
       VINNO, \
       MODEL, \
       SFX, \
       VHCTYPE, \
       VHCMAKERTYPE, \
       VHCCODE, \
       SALESDEALERCODE, \
       CRDEALERCODE, \
       TYPICALSRVTYPE, \
       CUSTCHARGEAMOUNT, \
       DELETEFLAG, \
       MILEAGE, \
       SALESTOTAL, \
       COUPONDISCOUNT, \
       TEL_NO) \
VALUES \
      (?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?) 

#\u6839\u636e\u4e3b\u952e\u5220\u9664\u5de5\u5355\u660e\u7ec6\u9a8c\u8bc1\u8868\u6570\u636e
sql.deltSrvDetailValiInfo.002= \
 DELETE FROM SRV_SRVDETAIL_F_VALI WHERE DEALERCODE=TRIM(?) AND \
 ORDERNO=TRIM(?) 

#\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u5de5\u5355\u660e\u7ec6\u9a8c\u8bc1\u8868
sql.insertSrvDetailValiInfo.001= \
INSERT INTO \
    SRV_SRVDETAIL_F_VALI \
       (DEALERCODE, \
       ORDERNO, \
       SRVTYPE, \
       SRVCODE, \
       TYPICALSRVTYPE, \
       TWCDISCOUNTRATE, \
       DELETEFLAG, \
       ACTIVITYFLAG, \
       ACTIVITYCODE, \
       ACTIVITYNOSIGN) \
VALUES \
      (?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?)

#\u6839\u636e\u4e3b\u952e\u5220\u9664\u96f6\u4ef6\u660e\u7ec6\u9a8c\u8bc1\u8868\u6570\u636e
sql.delSrvPartsDetailValiInfo.002= \
DELETE FROM SRV_PARTSDETAIL_F_VALI WHERE DEALERCODE=TRIM(?) AND \
 ORDERNO=TRIM(?)

#\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u96f6\u4ef6\u660e\u7ec6\u9a8c\u8bc1\u8868
sql.insertSrvPartsDetailValiInfo.001= \
INSERT INTO \
    SRV_PARTSDETAIL_F_VALI \
       (DEALERCODE, \
       ORDERNO, \
       OUTWAREDATE, \
       PARTSCODE, \
       PARTSNAME, \
       INSTOCKTYPE, \
       PARTSTYPE, \
       SRVTYPE, \
       QUANTITY, \
       DELETEFLAG) \
VALUES \
      (?, \
       ?, \
       CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ?, \
       ? )

#\u6839\u636e\u4e3b\u952e\u5220\u9664\u4e34\u65f6\u96f6\u4ef6\u660e\u7ec6\u9a8c\u8bc1\u8868\u6570\u636e
sql.delSrvPartsDetailValiTempInfo.002 = \
DELETE FROM SRV_PARTSDETAILTEMP_F_VALI WHERE DEALERCODE=TRIM(?) AND \
ORDERNO=TRIM(?) 

#\u5c06\u6570\u636e\u4fdd\u5b58\u5165\u4e34\u65f6\u96f6\u4ef6\u660e\u7ec6\u9a8c\u8bc1\u8868\u4e2d
sql.insertSrvPartsDetailValiTempInfo.001 = \
INSERT \
INTO SRV_PARTSDETAILTEMP_F_VALI \
  ( \
    DEALERCODE, \
    ORDERNO, \
    PARTSITEMSEQ, \
    ORDERDATE, \
    SALESDATE, \
    ORDERCANCELDATE, \
    ORDERSTATUS, \
    OUTWAREDATE, \
    PARTSCODE, \
    PARTSNAME, \
    MAKERTYPE, \
    INSTOCKTYPE, \
    PARTSTYPE, \
    SRVTYPE, \
    QUANTITY, \
    UNIT, \
    SELLPRICE, \
    PRICE, \
    UNITSELLPRICE, \
    TRANSDEPT, \
    TRANSDEPTNAME, \
    INCOMMARK, \
    STATUS, \
    BOFLAG, \
    DELETEFLAG, \
    UPDATECOUNT, \
    CREDATE, \
    CREUSER, \
    UPDATETIME, \
    UPDATEUSER, \
    FINANCESALESDATE, \
    SRVCODE, \
    SRVCODESEQ, \
    USAGE, \
    SPECIALCLASSCODE, \
    SUBSCRIBITIONNO, \
    UPDATEFLAG, \
    SETMENUFLAG, \
    SRVADDSEQ, \
    ACTIVITYFLAG, \
    ACTIVITYCODE, \
    ACTIVITYNOSIGN \
  ) \
  VALUES \
  ( \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ? \
  )
#Add by shenkang at 20170413 for \u7ef4\u4fee\u4fdd\u517b\u5de5\u5355\u4e34\u65f6\u4fe1\u606f\u63a5\u53e3 end
#Add by wanghao at 20170412 for \u52a8\u6001\u9a8c\u8bc1\u7801\u751f\u6210\u53ca\u83b7\u53d6 start
#\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u751f\u6210\u53ca\u83b7\u53d6\u3011 \u67e5\u8be2\u8be5\u624b\u673aN\u5206\u949f\u5185\u662f\u5426\u6709\u6ce8\u518c
sql.getdynamiccode.001 = \
SELECT \
	TEL_NO, \
	SYS_CD, \
	CODE, \
	CREDATE \
FROM \
	( \
		SELECT \
			TEL_NO, \
			SYS_CD, \
			CODE, \
			TO_CHAR (CREDATE,'YYYY-MM-DD HH24:MI:SS') AS CREDATE \
		FROM \
			IBPP_CODE_GET_LOGS \
		WHERE \
			TEL_NO = ? \
		AND SYS_CD = ? \
		ORDER BY \
			CREDATE DESC \
	) A \
WHERE \
	ROWNUM = 1

#\u67e5\u8be2\u8be5\u624b\u673a\u53f7\u548c\u7cfb\u7edf\u6240\u5c5eCD\u7684\u767b\u5f55\u65e5\u5fd7\u8bb0\u5f55
sql.getCodeLogin.001 = \
SELECT \
	CODE \
FROM \
	IBPP_CODE_LOGIN \
WHERE \
	TEL_NO = ? \
	AND SYS_CD = ? \
ORDER BY \
	TOVALIDITY DESC 

#\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u751f\u6210\u53ca\u83b7\u53d6\u3011 \u67e5\u8be2\u8be5\u624b\u673a\u53f7\u5728\u52a8\u6001\u9a8c\u8bc1\u7801\u767b\u5f55\u4e2d\u662f\u5426\u5b58\u5728
sql.selectdynamiccode.001 = \
SELECT \
	COUNT (1) getCount \
FROM \
	IBPP_CODE_LOGIN \
WHERE \
	TEL_NO = ? \
AND SYS_CD = ? 
#\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u751f\u6210\u53ca\u83b7\u53d6\u3011 \u63d2\u5165\u52a8\u6001\u9a8c\u8bc1\u7801\u83b7\u53d6\u5c65\u5386
sql.insertdynamiccode.001 = \
INSERT INTO \
	IBPP_CODE_GET_LOGS  \
	( \
		LOGID, \
		TEL_NO,  \
		SYS_CD,  \
		CODE,  \
		CREDATE \
	)  \
	VALUES  \
	( \
		IBPP_CODE_LOGIN_LOGS_SEQ.NEXTVAL, \
		?, \
		?, \
		?, \
		TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') \
	)
#\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u751f\u6210\u53ca\u83b7\u53d6\u3011 \u63d2\u5165\u52a8\u6001\u9a8c\u8bc1\u7801\u767b\u5f55
sql.insertdynamiccode.002 = \
INSERT INTO \
	IBPP_CODE_LOGIN  \
	( \
		TEL_NO, \
		SYS_CD, \
		CODE, \
		TOVALIDITY \
	) \
	VALUES \
	( \
		?, \
		?, \
		?, \
		TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') \
	)
#\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u751f\u6210\u53ca\u83b7\u53d6\u3011 \u66f4\u65b0\u52a8\u6001\u9a8c\u8bc1\u7801\u767b\u5f55 
sql.updatedynamiccode.002 = \
UPDATE IBPP_CODE_LOGIN \
SET CODE = ?, \
TOVALIDITY = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') \
WHERE \
	TEL_NO = ? \
AND SYS_CD = ?
#\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u767b\u5f55\u3011\u63d2\u5165\u767b\u5f55\u65e5\u5fd7
sql.insertlogincode.001 = \
INSERT INTO \
	IBPP_CODE_LOGIN_LOGS  \
	( \
		LOGID, \
		TEL_NO, \
		SYS_CD, \
		CODE, \
		CREDATE \
	) \
	VALUES \
	( \
		IBPP_CODE_GET_LOGS_SEQ.NEXTVAL, \
		?, \
		?, \
		?, \
		TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') \
	)
#\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u767b\u5f55\u3011\u67e5\u8be2\u8be5\u624b\u673a\u53f7\u3001\u7cfb\u7edfCD\u8bb0\u5f55 
sql.selectlogincode.001 = \
SELECT \
	TEL_NO, \
	SYS_CD, \
	CODE, \
	TO_CHAR(TOVALIDITY,'YYYY-MM-DD HH24:MI:SS') AS CREDATE \
FROM \
	IBPP_CODE_LOGIN \
WHERE \
	TEL_NO = ? \
AND SYS_CD = ? 
#\u3010\u77ed\u4fe1\u53d1\u9001\u3011\u63d2\u5165\u77ed\u4fe1\u53d1\u9001\u5c65\u5386
sql.insertsendsmslogs.001 = \
INSERT INTO \
	SEND_SMS_LOGS  \
	( \
		LOGID, \
		TEL_NO, \
		CONTENT, \
		FLG, \
		CREDATE \
	) \
	VALUES \
	( \
		SEND_SMS_LOGS_SEQ.NEXTVAL, \
		?, \
		?, \
		?, \
		TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') \
	)
#\u3010\u77ed\u4fe1\u53d1\u9001\u3011\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u751f\u6210\u53ca\u83b7\u53d6\u3011\u67e5\u8be2\u5f53\u524d\u6708\u7d2f\u8ba1\u6b21\u6570\u662f\u5426\u8d85\u8fc7100\u6b21/\u5f53\u5929\u7d2f\u8ba1\u6b21\u6570\u662f\u5426\u8d85\u8fc710\u6b21/10\u5206\u949f\u5185\u7d2f\u8ba1\u6b21\u6570\u662f\u5426\u8d85\u8fc73\u6b21
sql.checkdynamiccodecount.001 = \
SELECT  \
	LOGID, \
	TEL_NO, \
	SYS_CD, \
	CODE, \
	CREDATE \
FROM \
	IBPP_CODE_GET_LOGS code \
WHERE \
	code.CREDATE >= TRUNC (SYSDATE, 'MM') \
AND code.CREDATE <= SYSDATE \
AND code.TEL_NO = ? \
AND code.SYS_CD = ? \
ORDER BY CREDATE DESC
#\u3010\u52a8\u6001\u9a8c\u8bc1\u7801\u767b\u5f55\u3011 \u67e5\u8be2\u5f53\u524d\u624b\u673a\u53f7\u662f\u5426\u6ce8\u518c
sql_select_is_register_001 = \
SELECT \
	UID_GTMC \
FROM \
	user_login \
WHERE \
    TEL_NO = ? \
AND SYS_CD = ?
#Add by wanghao at 20170412 for \u52a8\u6001\u9a8c\u8bc1\u7801\u751f\u6210\u53ca\u83b7\u53d6 end

#DBLink\u5207\u6362\u5230\u63a5\u53e3\u65b9\u5f0f chen_yuan 20170414 start
#\u8d26\u53f7\u57fa\u672c\u5c5e\u6027\u8ba4\u8bc1\u4fe1\u606f\u83b7\u53d6
sql.getUserEbBaseInfo.001= \
SELECT \
    NAME, \
    SEX, \
    BIRTHDAY_YEAR, \
    BIRTHDAY_MONTH, \
    BIRTHDAY_DAY, \
    NICKNAME, \
    IDENTITY_CARD, \
    ADDRESS_PROVINCE, \
    ADDRESS_CITY, \
    ADDRESS_DETAIL, \
    DEALER_CODE, \
    AVATAR_IMG_GCLUB \
FROM \
    USER_LOGIN \
LEFT OUTER JOIN \
    USER_BASE_INFO \
ON \
    USER_LOGIN.UID_GTMC=USER_BASE_INFO.UID_GTMC \
WHERE \
    TEL_NO =?

#\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u83b7\u53d6
sql.getUserEbBaseInfo.002= \
SELECT \
    SYS_CD,TEL_NO,PWD,ACTIVATE_FLG \
FROM \
    USER_LOGIN \
WHERE \
    UID_GTMC =? \
AND \
    (SYS_CD = '1' OR SYS_CD = '2')

#\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u83b7\u53d6   
#modify \u53bb\u6389sys_cd\u533a\u5206 by shen_kang 20170720 start
sql.getUserEbBaseInfo.003= \
SELECT \
    SYS_CD, SUBSTR(TEL_NO,1,15) AS TEL_NO \
FROM \
    USER_LOGIN \
WHERE \
    UID_GTMC =?
#modify \u53bb\u6389sys_cd\u533a\u5206 by shen_kang 20170720 end
 
#\u65b0\u8f66\u8ba2\u5355\u8f66\u8f86\u4fe1\u606f\u83b7\u53d6
sql.getUserEbBaseInfo.004= \
 SELECT \
    DEALERCODE, \
    MODEL, \
    TRIM(COLORCD) AS COLORCD, \
    SALESDATE, \
    VHCENGINE, \
    TRIM(SFX) AS SFX \
FROM \
    TACT_ORDER_VEHICLE_BK \
WHERE \
    FRAMENO =?
AND \
    DELIVERYENDDATE IS NOT NULL
    
#\u987e\u5ba2\u8f66\u8f86\u4fe1\u606f\u83b7\u53d6
sql.getUserEbBaseInfo.005= \
SELECT \
    SALESDEALERCODE, \
    MODEL, \
    TRIM(COLORCODE) AS COLORCODE, \
    VHCSALESDATE, \
    ENGINE, \
    TRIM(SFX) AS SFX \
FROM \
    TACT_CUSTOMER_VEHICLE \
WHERE \
    VINNO =?

#\u8f66\u67b6\u5f15\u64ce\u4fe1\u606f\u83b7\u53d6
sql.getUserEbBaseInfo.006= \
SELECT \
    TRIM(ENGINENO) AS ENGINENO \
FROM \
    LCMS_VOITUREINFO \
WHERE \
    VIN =?
    
#\u67e5\u8be2\u5de5\u5355\u4fe1\u606f
sql.getUserEbBaseInfo.007= \
SELECT \
    MILEAGE \
FROM \
    KPI_SRV_ORDER_HISTORY \
WHERE \
    VINNO =? \
ORDER BY MILEAGE DESC 

#\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u83b7\u53d6
sql.getUserEbBaseInfo.008= \
SELECT \
    SYS_CD,TEL_NO,PWD,ACTIVATE_FLG \
FROM \
    USER_LOGIN \
WHERE \
    UID_GTMC =? \
ORDER BY \
    SYS_CD DESC
    
#\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u83b7\u53d6   
sql.getUserEbBaseInfo.009= \
SELECT \
    SYS_CD, SUBSTR(TEL_NO,1,15) AS TEL_NO \
FROM \
    USER_LOGIN \
WHERE \
    UID_GTMC =? 
   
#\u8d26\u53f7\u8ba4\u8bc1\u4fe1\u606f\u83b7\u53d6
sql.getUserEbBaseInfo.010= \
SELECT \
    SYS_CD,PWD,ACTIVATE_FLG,UID_GTMC,UPPER(UPD_USER) AS UPD_USER,TEL_NO \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO =? \
AND \
    SYS_CD =?
#\u8d26\u53f7\u57fa\u672c\u5c5e\u6027
sql.getUserEbBaseInfo.011= \
SELECT \
    NAME, \
    SEX, \
    IDENTITY_CARD, \
    ADDRESS_DETAIL, \
    DEALER_CODE, \
    AVATAR_IMG_GCLUB, \
    ADDRESS_PROVINCE, \
    ADDRESS_CITY, \
    UID_GTMC, \
    NICKNAME, \
    BIRTHDAY_YEAR, \
    BIRTHDAY_MONTH, \
    BIRTHDAY_DAY, \
    UPPER(UPD_USER) AS UPD_USER \
FROM \
    USER_BASE_INFO \
WHERE \
    UID_GTMC =?
    
#/**\u987e\u5ba2\u8f66\u8f86\u4fe1\u606f\u83b7\u53d6*/
sql.getUserEbBaseInfo.012= \
SELECT \
    REGISTERNO, \
    VINNO \
FROM \
    TACT_CUSTOMER_VEHICLE \
WHERE \
    VINNO =?
  
#\u8d26\u53f7\u8f66\u8f86\u57fa\u672c\u5c5e\u6027
sql.getUserEbBaseInfo.013= \
SELECT \
    INSURER, \
    VINNO, \
    MILEAGE_USER_SET, \
    REGISTERNO, \
    UPPER(UPD_USER) AS UPD_USER, \
    INSURANCE_START_DATE, \
    INSURANCE_END_DATE, \
    BIND_SRC_SYS, \
    CAR_NICKNAME, \
    TO_CHAR(CREDATE, 'YYYY-MM-DD HH24:MI:SS') AS CREDATE, \
    TO_CHAR(UPDATETIME, 'YYYY-MM-DD HH24:MI:SS') AS UPDATETIME \
FROM \
    USER_CAR \
WHERE \
    UID_GTMC=? \
AND \
    VINNO=?
#DBLink\u5207\u6362\u5230\u63a5\u53e3\u65b9\u5f0f chen_yuan 20170414 end
# /Add for chen_yuan 20170418 start

#Add by shenkang at 20170416 for \u4f18\u60e0\u5238\u9a8c\u8bc1 start
sql.selectOrderCdByCouponId_001 = \
SELECT \
    ORDERNO \
FROM \
    TACT_SRV_ORDER_VALI \
WHERE \
    COUPONID = ?

sql.selectOrderByOrderNo_001 = \
SELECT \
    DEALERCODE, \
    ORDERNO, \
    VINNO, \
    MODEL, \
    SFX, \
    VHCTYPE, \
    VHCMAKERTYPE, \
    VHCCODE, \
    SALESDEALERCODE, \
    CRDEALERCODE, \
    TYPICALSRVTYPE, \
    CUSTCHARGEAMOUNT, \
    DELETEFLAG, \
    MILEAGE, \
    SALESTOTAL, \
    COUPONDISCOUNT, \
    TEL_NO \
FROM \
    TACT_SRV_ORDER_VALI \
WHERE \
    ORDERNO = ?
    
#\u83b7\u53d6\u96f6\u4ef6\u660e\u7ec6\u4fe1\u606f
sql.SelectPartsDetail_001 = \
SELECT \
    PARTSCODE, \
    OUTWAREDATE \
FROM \
SRV_PARTSDETAIL_F_VALI \
WHERE \
    ORDERNO = ? \
ORDER BY \
    PARTSCODE
    
#\u83b7\u53d6\u4f18\u60e0\u5238\u7ed1\u5b9a\u7684\u5de5\u5355\u53f7
sql_SelectCouponBindOrderNo_001 = \
SELECT \
    SRV_ORDER_NO \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    COUPON_ID = ?

#\u83b7\u53d6\u4f18\u60e0\u5238\u7ed1\u5b9a\u7684\u5de5\u5355\u53f7
sql.FindBindResult.002 = \
SELECT \
COUPON_ID AS couponId, \
SRV_ORDER_NO AS srvOrderNo, \
COUPON_STATUS AS couponStatus \
FROM WX_COUPON_CONTENT  \
WHERE  \
COUPON_ID = ? AND NVL(DEL_FLAG,0)='0' AND ROWNUM=1

#\u6839\u636e\u5de5\u5355\u53f7\u83b7\u53d6\u5de5\u5355\u7ed1\u5b9a\u7684\u4f18\u60e0\u5238\u6d3b\u52a8ID
sql.SelectEventIdByOrderNo_001 = \
SELECT \
    EVENT_ID, \
    BIND_DATE, \
    TYPE_ID, \
    COUPON_CONTENT \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    SRV_ORDER_NO = ? \
    AND COUPON_ID != ?

#Add by shenkang at 20170416 for \u4f18\u60e0\u5238\u9a8c\u8bc1 end

#app\u4f18\u60e0\u5238\u540c\u6b65eip zhanglei 20170419 start
sql.CouponApp2Eip.001= \
SELECT \
    UID_GTMC \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO = ? \
AND \
    ROWNUM <= 1
    
sql.CouponApp2Eip.002= \
SELECT \
    COUNT(1) AS COUNT \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    COUPON_ID = ? \
AND \
    EVENT_ID = RPAD(?, 5, ' ') 
    
#Add by zhanglei at 20170703 for \u591a\u5f20\u4f18\u60e0\u5238\u6838\u9500 start
#modify for \u66f4\u65b0\u65e5\u671f\u589e\u52a0\u683c\u5f0fformat by shen_kang 20170908
sql.CouponApp2Eip.003 = \
INSERT INTO WX_COUPON_CONTENT \
( \
	COUPON_CONTENT_GUID, \
	CARD_ID, \
	COUPON_ID, \
	EVENT_ID, \
	OPEN_ID, \
	GZH_HASH, \
	DEALER_CODE, \
	COUPON_STATUS, \
	TYPE_ID, \
	COUPON_CONTENT, \
	COUPON_RULE, \
	COUPON_BEGIN, \
	COUPON_END, \
	SRV_ORDER_NO, \
	VIN_NO, \
	SFX_CODE, \
	CHECK_MODEL, \
	USE_STATUS, \
	CREATED_ON, \
	CREATED_BY, \
	MODIFY_ON, \
	MODIFY_BY, \
	UPDATE_COUNT, \
	DEL_FLAG, \
	USER_NAME, \
	USER_NUMBER, \
	UPDATE_ON, \
	SYSTEM_ID, \
	COUPON_KBN, \
	COUPON_GROUP_ID, \
	THIRDPARTY_NAME, \
	PUBLISH_DATE, \
	COUPON_URL, \
	GET_DATE, \
	BIND_DATE, \
	WRITEOFFS_DATE, \
	COUPON_DETAIL, \
	DEALER_NAME, \
	COUPON_PWD, \
	COUPON_PHONE, \
	COUPON_INTRODUCTION, \
	COUPON_GRANT_TYPE, \
	FROM_APPLICATION, \
	IS_PARALLEL, \
	DEALER_CODE_FROM \
) \
VALUES \
( \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 TO_CHAR(SYSDATE,'YYYY-MM-DD HH24:MI:SS'), \
	 'ibpp', \
	 NULL, \
	 '0', \
	 NULL, \
	 ?, \
	 NULL, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
	 ?, \
	 TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
	 TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
	 TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ?, \
	 ? \
)
    
#modify for \u66f4\u65b0\u65e5\u671f\u589e\u52a0\u683c\u5f0fformat by shen_kang 20170908
sql.CouponApp2Eip.004 = \
UPDATE ibpp.WX_COUPON_CONTENT \
SET \
	CARD_ID = ?, \
	COUPON_ID = ?, \
	EVENT_ID = ?, \
	OPEN_ID = ?, \
	GZH_HASH = ?, \
	DEALER_CODE = ?, \
	COUPON_STATUS = ?, \
	TYPE_ID = ?, \
	COUPON_CONTENT = ?, \
	COUPON_RULE = ?, \
	COUPON_BEGIN = ?, \
	COUPON_END = ?, \
	SRV_ORDER_NO = ?, \
	VIN_NO = ?, \
	SFX_CODE = ?, \
	CHECK_MODEL = ?, \
	USE_STATUS = ?, \
	USER_NUMBER = ?, \
	MODIFY_ON = TO_CHAR(SYSDATE,'YYYY-MM-DD HH24:MI:SS'), \
	UPDATE_ON = SYSDATE, \
	SYSTEM_ID = ?, \
	COUPON_KBN = ?, \
	COUPON_GROUP_ID = ?, \
	THIRDPARTY_NAME = ?, \
	PUBLISH_DATE = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
	COUPON_URL = ?, \
	GET_DATE = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
	BIND_DATE = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
	WRITEOFFS_DATE = TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
	COUPON_DETAIL = ?, \
	DEALER_NAME = ?, \
	COUPON_PWD = ?, \
	COUPON_PHONE = ?, \
	COUPON_INTRODUCTION = ?, \
	COUPON_GRANT_TYPE = ?, \
	FROM_APPLICATION = ? ,\
	IS_PARALLEL = ? ,\
	DEALER_CODE_FROM = ? \
WHERE COUPON_ID = ? AND EVENT_ID = RPAD(?, 5, ' ') 
#Add by zhanglei at 20170703 for \u591a\u5f20\u4f18\u60e0\u5238\u6838\u9500 end
#app\u4f18\u60e0\u5238\u540c\u6b65eip zhanglei 20170419 end
#Add by wanghao at 20170420 for \u9500\u552e\u4f18\u60e0\u5238\u53d1\u5238 start
#\u3010\u4f18\u60e0\u5238\u751f\u6210\u3011\u9500\u552e\u4f18\u60e0\u5238\u9500\u552e\u6d3b\u52a8save
sql.insertsalesevent.001 = \
INSERT INTO TACT_SALES_EVENT \
	( \
		EVENT_ID, \
		DLRCODE, \
		EVENT_NAME, \
		EVENT_START_DATE, \
		EVENT_END_DATE, \
		EVENT_IN_COUPON_LIMIT, \
		EVENT_OUT_COUPON_LIMIT, \
		ACCU_MONEY_GROUND, \
		DEDU_MONEY_TOP, \
		DELFLAG, \
		CREATEUSERID, \
		CREATETIME \
	) \
VALUES \
	( \
		?, \
		?, \
		?, \
		TO_DATE (?,'YYYY-MM-DD HH24:MI:SS'), \
		TO_DATE (?,'YYYY-MM-DD HH24:MI:SS'), \
		?, \
		?, \
		?, \
		?, \
		'0', \
		'IBPP', \
		SYSDATE \
	)
#\u3010\u4f18\u60e0\u5238\u751f\u6210\u3011\u751f\u6210\u6d3b\u52a8ID
sql.selectsalesevent.001 = \
SELECT \
	EVENT_ID \
FROM \
	( \
		SELECT \
			EVENT_ID \
		FROM \
			TACT_SALES_EVENT \
		ORDER BY \
			TO_NUMBER (EVENT_ID) DESC) A \
WHERE ROWNUM = 1
#\u3010\u4f18\u60e0\u5238\u751f\u6210\u3011\u67e5\u8be2\u73b0\u5b58\u7684\u4f18\u60e0\u5238\u7801
sql.select_coupon_code_list_001 = \
SELECT \
	COUPON_ID \
FROM \
	TACT_SALES_COUPON_CONTENT \
WHERE \
  COUPON_ID LIKE '1701%' \
AND LENGTH(COUPON_ID) = 9
#\u3010\u4f18\u60e0\u5238\u751f\u6210\u3011\u4f20\u5165vhcnamecode\u67e5\u8be2BASE_VEHICLE_MODEL\u8868\u4e2d\u7684 SFXCODE
sql.get_sfx_code_001 = \
SELECT \
	REPLACE (WM_CONCAT (DISTINCT TRIM(SFX)),',',';') SFX \
FROM \
	BASE_VEHICLE_MODEL \
WHERE \
	VHCNAMECODE IN ?
#Add by wanghao at 20170420 for \u9500\u552e\u4f18\u60e0\u5238\u53d1\u5238 end

#Add by liangxiao at 20170517 for \u9500\u552e\u5e97\u540d\u79f0\u53d6\u5f97 Start 
sql.SelectDealerFromName.001 = \
SELECT \
	DEALER_NAME \
FROM \
	BASE_DEALER_INFO \
WHERE \
	DEALER_CODE = RPAD(?, 5, ' ')
#Add by liangxiao at 20170517 for \u9500\u552e\u5e97\u540d\u79f0\u53d6\u5f97 End

#Add by wanghao at 20170522 for \u95ee\u5377\u5217\u8868\u4fe1\u606f\u63a5\u53e3start
#\u95ee\u5377\u5217\u8868\u4fe1\u606f\u63a5\u53e3\u63d2\u5165
sql_insert_paper_list_001 = \
	INSERT INTO APP_QUESTIONNAIRE_LIST ( \
		SEQ_NO, \
		PAPERID, \
		PAPER_TYPE, \
		REVIEWTYPE, \
		PAPER_NAME, \
		PAPER_URL, \
		PAPER_DAYS, \
		ENABLESTARTTIME, \
		ENABLEENDTIME, \
		CREATE_DATE, \
		CREATE_USER, \
		IS_DEL, \
		PRIZE_IMGURL, \
		SUBTITLE \
	) \
	VALUES \
	( \
		APP_QUESTIONNAIRE_LIST_SEQ.NEXTVAL , \
		?, \
		?, \
		?, \
		?, \
		?, \
		?, \
		TO_DATE (?, 'YYYY-MM-DD'), \
		TO_DATE (?, 'YYYY-MM-DD'), \
		TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS'), \
		'ibpp',  \
		'0', \
		?, \
		? \
	)
#\u95ee\u5377\u5217\u8868\u4fe1\u606f\u63a5\u53e3\u66f4\u65b0
sql_update_paper_list_001 = \
UPDATE APP_QUESTIONNAIRE_LIST SET \
	REVIEWTYPE = ?, \
	PAPER_NAME = ?, \
	PAPER_URL = ?, \
	PAPER_DAYS = ?, \
	ENABLESTARTTIME = TO_DATE (?, 'YYYY-MM-DD'), \
	ENABLEENDTIME = TO_DATE (?, 'YYYY-MM-DD'), \
	UPDATE_DATE = TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS'), \
	UPDATE_USER = 'ibpp', \
	PRIZE_IMGURL = ?, \
	SUBTITLE = ? \
WHERE \
	PAPERID = ? \
AND PAPER_TYPE = ?
#\u95ee\u5377\u5217\u8868\u4fe1\u606f\u63a5\u53e3\u67e5\u8be2
sql_select_paper_list_001 = \
SELECT  \
	COUNT(1) AS CNT \
FROM \
	APP_QUESTIONNAIRE_LIST \
WHERE \
	PAPERID = ? \
	AND PAPER_TYPE = ?
#\u95ee\u5377\u5e73\u53f0\u83b7\u53d6\u8ba2\u5355\u6ce8\u518c\u7528\u6237
sql_get_register_user_list_001 = \
	SELECT \
		USR.UID_GTMC, \
		USR.TEL_NO, \
		TO_CHAR(USR.CREDATE,'YYYY-MM-DD HH24:MI:SS') CREDATE, \
		ORDERNO, \
		FRAMENO AS VINNO \
	FROM \
		TACT_ORDER_VEHICLE_BK \
	LEFT JOIN USER_LOGIN USR ON ( \
		BUYERMOBIL1 = USR.TEL_NO \
	) \
	WHERE USR.CREDATE >= TO_DATE (?,'YYYY-MM-DD HH24:MI:SS')
	
#Add by wanghao at 20170522 for \u95ee\u5377\u5217\u8868\u4fe1\u606f\u63a5\u53e3 end



# Add for \u8ba2\u5355\u95ee\u5377\u63a8\u9001\u5c65\u5386 by liangxiao at 20170523 start
sql.SelectPaperSendHisList.001 = \
SELECT \
  PAPERID, \
  PAPER_TYPE, \
  REVIEW_TYPE, \
  ORDER_NO, \
  USER_ID, \
  TEL, \
  PAPER_URL, \
  ENABLESTARTTIME, \
  ENABLEENDTIME, \
  DEALERCODE, \
  PUSH_DATE \
FROM \
  APP_QUESTIONNAIRE_HISTORY \
WHERE \
  CREATED_ON >= TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS')
# Add for \u8ba2\u5355\u95ee\u5377\u63a8\u9001\u5c65\u5386 by liangxiao at 20170523 start

# Add 20170526 for EIP\u7528\u6237\u5224\u65ad by liangxiao at Start
sql.SelectUserLogin.001 = \
SELECT \
  TEL_NO \
FROM \
  USER_LOGIN \
WHERE \
  TEL_NO = ?
# Add 20170526 for EIP\u7528\u6237\u5224\u65ad by liangxiao at END

# Add 20170523 for\u517b\u8f66\u65e0\u5fe7\u4f18\u60e0\u5238\u9886\u5238  by zhanglei at Start
#\u83b7\u53d6\u517b\u8f66\u65e0\u5fe7\u4f18\u60e0\u5238\u4fe1\u606f 
sql.cvmcoupon.001 = \
SELECT \
    TEL_NO, \
    COUPON_ID, \
    COUPON_KEY_CODE, \
    TO_CHAR(RECEVIE_DATE, 'YYYY-MM-DD HH24:MI:SS') AS RECEVIE_DATE \
FROM CVM_COUPON_RECEIVE \
WHERE TEL_NO = ? \
AND COUPON_KEY_CODE = ? \
AND DEL_FLAG = '0'

#\u83b7\u53d6\u517b\u8f66\u65e0\u5fe7\u4f18\u60e0\u5238\u4fe1\u606f 
sql.cvmcoupon.002 = \
UPDATE CVM_COUPON_RECEIVE \
SET \
	RECEVIE_DATE = SYSDATE, \
	UPDATE_DATE = SYSDATE, \
	UPDATE_USER = 'ibpp', \
	COUPON_STATUS = '1' \
WHERE TEL_NO = ? \
AND COUPON_KEY_CODE = ? \

#\u83b7\u53d6\u517b\u8f66\u65e0\u5fe7\u4f18\u60e0\u5238\u4fe1\u606f 
sql.cvmcoupon.003 = \
UPDATE WX_COUPON_CONTENT \
SET \
	OPEN_ID = ?, \
	MODIFY_ON = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS'), \
	MODIFY_BY = 'ibpp', \
	GET_DATE = SYSDATE \
WHERE COUPON_ID = ? AND EVENT_ID = '30000'

#\u83b7\u53d6\u5fae\u4fe1\u4f18\u60e0\u5238\u4fe1\u606f
sql.cvmcoupon.004 = \
SELECT \
    EVENT_ID, \
    OPEN_ID, \
    COUPON_KBN, \
	TYPE_ID, \
	COUPON_ID, \
	CARD_ID, \
	COUPON_CONTENT, \
	COUPON_RULE, \
	COUPON_BEGIN, \
	COUPON_END, \
	SRV_ORDER_NO, \
	DEALER_CODE_FROM, \
	COUPON_STATUS, \
	SYSTEM_ID, \
	DEALER_CODE, \
	COUPON_DETAIL \
FROM WX_COUPON_CONTENT \
WHERE COUPON_ID = ? AND EVENT_ID = '30000'
# Add 20170523 for\u517b\u8f66\u65e0\u5fe7\u4f18\u60e0\u5238\u9886\u5238  by zhanglei at End

#Add By chenyuan 20170603 start
# \u6839\u636e\u7edf\u5408\u7ba1\u7406ID\u53d6\u5f97iClub\u4f1a\u5458ID
sql.GetEipUserId.001 = \
SELECT \
  USER_ID \
FROM \
  USER_LOGIN \
WHERE \
     UID_GTMC=? \
AND \
     SYS_CD=?
#Add By chenyuan 20170603 end

#Add By liangxiao 20170606 start
#\u95ee\u5377\u4fe1\u606f\u83b7\u53d6
sql.SelectQuestionnaireInfo.001 = \
SELECT \
    PAPERID , \
    PAPER_TYPE , \
    REVIEWTYPE , \
    PAPER_NAME , \
    PAPER_DAYS , \
    TO_CHAR(ENABLESTARTTIME,'YYYY-MM-DD HH24:MI:SS') AS ENABLESTARTTIME, \
    TO_CHAR(ENABLEENDTIME,'YYYY-MM-DD HH24:MI:SS') AS ENABLEENDTIME, \
    TO_CHAR(UPDATE_DATE,'YYYY-MM-DD HH24:MI:SS') AS UPDATE_DATE, \
    TO_CHAR(CREATE_DATE,'YYYY-MM-DD HH24:MI:SS') AS CREATE_DATE, \
    PAPER_URL \
FROM APP_QUESTIONNAIRE_LIST \
WHERE \
    PAPER_TYPE = ? 

#\u7ef4\u4fee\u5de5\u5355\u4fe1\u606f\u83b7\u53d6
sql.SelectSrvOrderInfo.001 = \
SELECT \
    TWCUSER , \
	SRVGROUPNAME , \
	TYPICALSRVTYPE \
FROM TACT_SRV_ORDER \
WHERE \
    DEALERCODE = ? \
  AND ORDERNO = ?

#\u95ee\u5377\u540c\u6b65\u4e2d\u95f4\u8868\u6570\u636eDB\u8ffd\u52a0
sql.InsertAppQuestionnaireMiddle.001 = \
INSERT INTO \
    APP_QUESTIONNAIRE_MIDDLE \
	( \
	    UUID , \
		USER_ID , \
		TEL , \
		ORDER_NO , \
		REVIEW_TYPE , \
		CREATED_ON , \
		CREATED_BY , \
		PAPERID , \
		PAPER_TYPE , \
		PAPER_NAME , \
		PAPER_URL , \
		PAPER_DAYS , \
		ENABLESTARTTIME , \
		ENABLEENDTIME , \
		DEALERCODE, \
		PUSH_DATE \
	) \
	VALUES \
	( \
		?, \
		?, \
		?, \
		?, \
		?, \
		SYSDATE , \
		?, \
		?, \
		?, \
		?, \
		?, \
		?, \
		TO_DATE (?, 'YYYY-MM-DD'), \
		TO_DATE (?, 'YYYY-MM-DD'), \
		?, \
		TO_DATE (?, 'YYYY-MM-DD HH24:MI:SS') \
	)
	

#Add By liangxiao 20170606 end

#add \u4fdd\u517b\u65e0\u5fe7\u590f\u5b63\u670d\u52a1\u6d3b\u52a8\u4f18\u60e0\u5238\u751f\u6210 by shenkang 20170609 start
#\u6839\u636e\u5de5\u5355\u4fe1\u606f\u67e5\u8be2\u4f18\u60e0\u5238\u9886\u53d6\u7528\u6237\u4fe1\u606f\u8868
sql.selectCvmCouponReceive.001= \
SELECT \
    1 \
FROM \
    CVM_COUPON_RECEIVE \
WHERE \
    ORDER_NO = ?
#\u6839\u636e\u5957\u9910\u4ee3\u7801\u5728CVM\u5957\u9910\u8868\u4e2d\u67e5\u8be2\u76f8\u5e94\u7684\u5957\u9910\u4fe1\u606f
sql.selectCvmCombo.001= \
SELECT \
    COMBO_CODE, \
    DEALER_CODE, \
    COMBO_NAME, \
    ITEM_CODE, \
    ITEM_NAME, \
    IS_FACTORY, \
    COMBO_COUNT, \
    CUSTOM_EXPLAIN \
FROM \
    CVM_COMBO \
WHERE \
    COMBO_CODE = ? \
    AND DEALER_CODE= ? 

#\u6839\u636e\u9879\u76ee\u4ee3\u7801\u67e5\u8be2\u57fa\u7840\u5957\u9910\u4fe1\u606f
sql.selectCvmComboStyle.001= \
SELECT \
    COUPON_NAME, \
    COUPON_DETAIL \
FROM \
    CVM_COMBO_STYLE \
WHERE \
    SRV_CODE = ? 
#\u67e5\u8be2\u4f18\u60e0\u5238\u7801\u662f\u5426\u91cd\u590d
sql.selectWxCouponContent.003= \
SELECT \
    1 \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    COUPON_ID = ? 

#\u67e5\u8be2\u4f18\u60e0\u5238\u9886\u53d6\u4fe1\u606f\u8868\u79d8\u94a5\u662f\u5426\u91cd\u590d
sql.selectCvmCouponReceive.002= \
SELECT \
    1 \
FROM \
    CVM_COUPON_RECEIVE \
WHERE \
    coupon_key_code = ? 
    
#\u67e5\u8be2\u8f66\u8f86\u4ea4\u8f66\u65e5
#Modify \u4ea4\u8f66\u65e5\u67e5\u8be2\u4fee\u6b63 by shen_kang 20170731 start
sql.selectFirstDelt.001= \
SELECT \
   TO_CHAR(DELIVERYENDDATE,'YYYYMMDD') AS FIRST_DELI_DATE \
FROM \
    TACT_ORDER_VEHICLE_BK \
WHERE \
    FRAMENO = TRIM(?) \
    AND DELIVERYENDDATE IS NOT NULL \
    AND DELETEFLAG='0'
#Modify \u4ea4\u8f66\u65e5\u67e5\u8be2\u4fee\u6b63 by shen_kang 20170731 end

#\u751f\u6210\u4f18\u60e0\u5238
sql.insertWxCouponByCvm.001=\
INSERT INTO wx_coupon_content ( \
  COUPON_CONTENT_GUID, \
  card_id, \
  Coupon_Id, \
  Event_Id, \
  Dealer_Code, \
  Coupon_Status, \
  Type_Id, \
  COUPON_CONTENT, \
  COUPON_RULE, \
  Coupon_Begin, \
  Coupon_End, \
  Vin_No, \
  Created_On, \
  Created_By, \
  Modify_On, \
  Modify_By, \
  COUPON_DETAIL, \
  DEALER_NAME, \
  DEALER_CODE_FROM, \
  COUPON_ENTITY_CONTENT, \
  DEL_FLAG \
) \
VALUES( \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  ?, \
  0 \
)

#\u5c06\u4f18\u60e0\u5238\u9886\u53d6\u4fe1\u606f\u63d2\u5165\u5230\u4f18\u60e0\u5238\u9886\u53d6\u7528\u6237\u4fe1\u606f\u8868\u4e2d
sql.insertCvmCouponReceive.001= \
INSERT INTO CVM_COUPON_RECEIVE ( \
    SEQ_NO, \
    TEL_NO, \
    ORDER_NO, \
    COUPON_ID, \
    COUPON_STATUS, \
    COUPON_KEY_CODE, \
    ORDER_DATE, \
    SEND_MESSAGE, \
    SEND_STATUS, \
    SEND_COUNT, \
    CREATE_DATE, \
    CREATE_USER, \
    UPDATE_DATE, \
    UPDATE_USER, \
    DEL_FLAG \
) \
VALUES \
    ( \
        CVM_COUPON_RECEIVE_SEQ.NEXTVAL, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
        ?, \
        ?, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
        ?, \
        CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
        ?, \
        ? \
    )

#\u66f4\u65b0\u4f18\u60e0\u5238\u9886\u53d6\u4fe1\u606f\u8868
sql.updateCvmcouponReceive.001= \
UPDATE CVM_COUPON_RECEIVE \
SET \
    SEND_STATUS = ?, \
    ERROR_MESSAGE = ?, \
    UPDATE_DATE = SYSDATE, \
    SEND_DATE = SYSDATE, \
    UPDATE_USER = ? \
WHERE \
    TEL_NO = ? \
AND COUPON_KEY_CODE = ?

#\u67e5\u8be2\u7ecf\u9500\u5efa\u57fa\u672c\u4fe1\u606f
sql.selectBasedealerInfo.001= \
SELECT \
    DEALER_NAME \
FROM \
    BASE_DEALER_INFO \
WHERE \
    DEALER_CODE = ? \
AND IS_DEL = '0'

#\u4f18\u60e0\u5238\u7ed1\u5b9a
sql.UpdateCvmWxCouponContent.001 = \
UPDATE \
  WX_COUPON_CONTENT \
SET \
  SRV_ORDER_NO = ? \
  ,SFX_CODE = ? \
  ,COUPON_STATUS = ? \
  ,MODIFY_ON = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') \
  ,MODIFY_BY = ? \
  ,BIND_DATE = SYSDATE \
WHERE \
  COUPON_ID = ?
#add \u4fdd\u517b\u65e0\u5fe7\u590f\u5b63\u670d\u52a1\u6d3b\u52a8\u4f18\u60e0\u5238\u751f\u6210 by shenkang 20170609 end

# Add for app2iclub\u4f18\u60e0\u52b5\u540c\u6b65\u63a5\u53e3 zhanglei 20170612 start 
sql.insertTiCouponapp2Eip.001 =\
INSERT INTO \
    EIPUSER.TI_COUPON_APP2EIP \
    ( \
        SEQ_ID, \
        COUPON_CONTENT_GUID, \
        CARD_ID, \
        COUPON_ID, \
        EVENT_ID, \
        OPEN_ID, \
        GZH_HASH, \
        DEALER_CODE, \
        COUPON_STATUS, \
        TYPE_ID, \
        COUPON_CONTENT, \
        COUPON_RULE, \
        COUPON_BEGIN, \
        COUPON_END, \
        SRV_ORDER_NO, \
        VIN_NO, \
        SFX_CODE, \
        CHECK_MODEL, \
        USE_STATUS, \
        CREATED_ON, \
        CREATED_BY, \
        READ_FLAG, \
        USER_NUMBER, \
        SYSTEM_ID, \
        COUPON_KBN, \
        COUPON_GROUP_ID, \
        THIRDPARTY_NAME, \
        PUBLISH_DATE, \
        COUPON_URL, \
        GET_DATE, \
        BIND_DATE, \
        WRITEOFFS_DATE, \
        COUPON_DETAIL, \
        DEALER_NAME \
    ) \
    VALUES \
    ( \
        EIPUSER.SEQ_TI_COUPON_APP2EIP.NEXTVAL, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        ?, \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        ?, \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        TO_DATE(?,'YYYY-MM-DD HH24:MI:SS'), \
        ?, \
        ? \
    )
# Add for app2iclub\u4f18\u60e0\u52b5\u540c\u6b65\u63a5\u53e3 zhanglei 20170612 start 
#add for \u8fd4\u56de\u7edf\u5408\u7ba1\u7406ID by liangxiao at 20170613 start
sql.selectUserLoginInfo.001 = \
SELECT \
    UID_GTMC \
FROM USER_LOGIN \
WHERE \
    USER_ID=TRIM(?) \
AND DELETEFLAG='0' 
#add for \u8fd4\u56de\u7edf\u5408\u7ba1\u7406ID by liangxiao at 20170613 end

#add for \u67e5\u8be2CVM\u4f18\u60e0\u5238\u4fe1\u606f shen_kang 20170615 start
sql.selectCvmCoupon.001= \
SELECT \
    CARD_ID, \
    COUPON_ID \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    COUPON_ID = ? 
#add for \u67e5\u8be2CVM\u4f18\u60e0\u5238\u4fe1\u606f shen_kang 20170615 end

#add for \u4fdd\u517b\u65e0\u5fe7\u4f18\u60e0\u5238\u4fe1\u606f\u53d6\u5f97\u63a5\u53e3 shen_kang 20170616 start
#\u67e5\u8be2\u4f18\u60e0\u5238\u9886\u53d6\u7528\u6237\u4fe1\u606f\u8868
sql.selectCvmCouponRe.001 = \
SELECT \
    COUPON_ID \
FROM \
    CVM_COUPON_RECEIVE \
WHERE \
    TEL_NO = ? \
AND COUPON_KEY_CODE = ? 

sql.selectWxCouponForCvm.001 = \
SELECT DISTINCT \
    A.COUPON_CONTENT_GUID AS COUPON_CONTENT_GUID, \
    A.CARD_ID AS CARD_ID, \
    A.COUPON_ID AS COUPON_ID, \
    A.EVENT_ID AS EVENT_ID, \
    A.OPEN_ID AS OPEN_ID, \
    A.GZH_HASH AS GZH_HASH, \
    A.DEALER_CODE AS DEALER_CODE, \
    A.COUPON_STATUS AS COUPON_STATUS, \
    A.TYPE_ID AS TYPE_ID, \
    A.COUPON_CONTENT AS COUPON_CONTENT, \
    A.COUPON_RULE AS COUPON_RULE, \
    A.COUPON_BEGIN AS COUPON_BEGIN, \
    A.COUPON_END AS COUPON_END, \
    A.SRV_ORDER_NO AS SRV_ORDER_NO, \
    A.VIN_NO AS VIN_NO, \
    A.SFX_CODE AS SFX_CODE, \
    A.CHECK_MODEL AS CHECK_MODEL, \
    A.USE_STATUS AS USE_STATUS, \
    A.UPDATE_COUNT AS UPDATE_COUNT, \
    A.DEL_FLAG AS DEL_FLAG, \
    A.USER_NAME AS USER_NAME, \
    A.USER_NUMBER AS USER_NUMBER, \
    TO_CHAR(A.UPDATE_ON, 'YYYY-MM-DD HH24:MI:SS') AS UPDATE_ON, \
    A.COUPON_KBN AS COUPON_KBN, \
    A.COUPON_GROUP_ID AS COUPON_GROUP_ID, \
    A.THIRDPARTY_NAME AS THIRDPARTY_NAME, \
    TO_CHAR(A.PUBLISH_DATE, 'YYYY-MM-DD HH24:MI:SS') AS PUBLISH_DATE, \
    A.COUPON_URL AS COUPON_URL, \
    TO_CHAR(A.GET_DATE, 'YYYY-MM-DD HH24:MI:SS') AS GET_DATE, \
    TO_CHAR(A.BIND_DATE, 'YYYY-MM-DD HH24:MI:SS') AS BIND_DATE, \
    TO_CHAR(A.WRITEOFFS_DATE, 'YYYY-MM-DD HH24:MI:SS') AS WRITEOFFS_DATE, \
    A.COUPON_DETAIL AS COUPON_DETAIL, \
    A.DEALER_NAME AS DEALER_NAME, \
    A.COUPON_PWD AS COUPON_PWD, \
    A.COUPON_PHONE AS COUPON_PHONE, \
    A.COUPON_INTRODUCTION AS COUPON_INTRODUCTION, \
    A.COUPON_GRANT_TYPE AS COUPON_GRANT_TYPE, \
    A.FROM_APPLICATION AS FROM_APPLICATION \
FROM \
    WX_COUPON_CONTENT A \
WHERE \
    A.DEL_FLAG <> '1' \
    AND A.COUPON_ID IN (
#add for \u4fdd\u517b\u65e0\u5fe7\u4f18\u60e0\u5238\u4fe1\u606f\u53d6\u5f97\u63a5\u53e3 shen_kang 20170616 end
#add for \u9500\u552e\u95ee\u5377\u540c\u6b65\u5c65\u5386\u8868 liangxiao 20170620 start
sql.SelectAppQuestionnaireHistory.001 = \
SELECT \
    TEL, \
    ORDER_NO \
FROM \
    APP_QUESTIONNAIRE_HISTORY \
WHERE \
    TEL = ? \
AND ORDER_NO = ? 
#add for \u9500\u552e\u95ee\u5377\u540c\u6b65\u5c65\u5386\u8868 liangxiao 20170620 end

#add for \u552e\u540e\u590f\u5b63\u670d\u52a1\u6d3b\u52a8\u4f18\u60e0\u5238\u53d1\u653e shen_kang 20170627 start
#\u96f6\u4ef6\u7c7b\u578b\u67e5\u8be2
sql.selectPartType.001 = \
SELECT \
    PART_TYPE \
FROM \
    PART_TYPE_T \
WHERE \
    PART_NO = ? 

#\u6839\u636e\u624b\u673a\u53f7\u67e5\u8be2\u7edf\u5408\u7ba1\u7406ID
sql.selectUidGtmcByTel.001 = \
SELECT \
    UID_GTMC \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO = ? \
AND DELETEFLAG = '0' \

#\u67e5\u8be2\u672c\u6b21\u6d3b\u52a8\u7684\u4f18\u60e0\u5238ID
sql.selectGustCoupon.001 = \
SELECT \
    COUPON_ID \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    EVENT_ID = '30001' \
AND OPEN_ID IS NULL \
AND LENGTH(COUPON_ID)=11 \
AND DEL_FLAG = '0'

#\u5c06\u4f18\u60e0\u5238\u4e0e\u7528\u6237\u8fdb\u884c\u7ed1\u5b9a
sql.updateGustCoupon.001 = \
UPDATE WX_COUPON_CONTENT S \
SET OPEN_ID = ?, \
 S.DEALER_CODE=?, \
 S.VIN_NO=?, \
 S.MODIFY_ON = TO_CHAR(SYSDATE,'YYYY/MM/DD HH24:MI:SS'), \
 S.MODIFY_BY = ?, \
 S.USER_NAME = ?, \
 S.USER_NUMBER = ?, \
 S.UPDATE_ON = SYSDATE, \
 S.GET_DATE = SYSDATE \
WHERE \
	COUPON_ID = ?

#\u5c06\u53d1\u5238\u4fe1\u606f\u4fdd\u5b58\u5230\u590f\u5b63\u670d\u52a1\u6d3b\u52a8\u9886\u53d6\u8868\u4e2d
sql.insertSummerCouponReceive.001 = \
INSERT INTO SUMMER_COUPON_RECEIVE ( \
    SEQ_NO, \
    ORDER_NO, \
    TEL_NO, \
    COUPON_ID, \
    SEND_STATUS, \
    CREATE_DATE, \
    CREATE_USER, \
    UPDATE_DATE, \
    UPDATE_USER \
) \
VALUES \
    ( \
        SUMMER_COUPON_RECEIVE_SEQ.NEXTVAL, \
        ?, \
        ?, \
        ?, \
        ?, \
        SYSDATE, \
        ?, \
        SYSDATE, \
        ? \
    )

#\u66f4\u65b0\u9886\u53d6\u4fe1\u606f\u8868
sql.updateSummerCouponReceive.001 = \
UPDATE SUMMER_COUPON_RECEIVE \
SET SEND_DATE = SYSDATE, \
    SEND_MESSAGE = ?, \
    SEND_STATUS = ?, \
    ERROR_MESSAGE = ?, \
    SEND_COUNT = ?, \
    UPDATE_DATE = SYSDATE, \
    UPDATE_USER = ? \
WHERE \
    ORDER_NO = ?

#\u67e5\u8be2\u8be5\u5de5\u5355\u662f\u5426\u5df2\u53d1\u653e\u8fc7\u4f18\u60e0\u5238
sql.selectSummerCouponRe.001 = \
SELECT \
    1 \
FROM \
    SUMMER_COUPON_RECEIVE \
WHERE \
    ORDER_NO = ?

#\u67e5\u8be2\u4f18\u60e0\u5238\u4fe1\u606f
sql.selectWxCoupon.001 = \
SELECT \
    EVENT_ID, \
    OPEN_ID, \
    COUPON_KBN, \
    TYPE_ID, \
    COUPON_ID, \
    CARD_ID, \
    COUPON_CONTENT, \
    COUPON_RULE, \
    COUPON_BEGIN, \
    COUPON_END, \
    SRV_ORDER_NO, \
    DEALER_CODE_FROM, \
    COUPON_STATUS, \
    SYSTEM_ID, \
    DEALER_CODE, \
    USER_NUMBER, \
    COUPON_DETAIL \
FROM WX_COUPON_CONTENT \
WHERE COUPON_ID = ? 

#\u66f4\u65b0\u5fae\u4fe1\u4f18\u60e0\u5238\u4fe1\u606f
sql.UpdateCvmAndCustWxCouponContent.001 = \
UPDATE \
  WX_COUPON_CONTENT \
SET \
   SRV_ORDER_NO = ? \
  ,SFX_CODE = ? \
  ,COUPON_STATUS = ? \
  ,WRITEOFFS_DATE = SYSDATE \
  ,MODIFY_ON = TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') \
  ,MODIFY_BY =  ?  \
WHERE \
  COUPON_ID = ?
#add for \u552e\u540e\u590f\u5b63\u670d\u52a1\u6d3b\u52a8\u4f18\u60e0\u5238\u53d1\u653e shen_kang 20170627 end

#Add for App\u4f18\u60e0\u5238\u7ed1\u5b9a\u63a5\u53e3 by liang_xiao 2017704 start
sql.UpdateWxCouponContentBind.002 = \
UPDATE \
  WX_COUPON_CONTENT \
SET \
  DEALER_CODE = ? \
  ,SRV_ORDER_NO = ? \
  ,VIN_NO = ? \
  ,SFX_CODE = ? \
  ,COUPON_STATUS = ? \
  ,MODIFY_ON = ? \
  ,MODIFY_BY =  ?  \
  ,BIND_DATE= CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END \
WHERE \
  COUPON_ID = ?
#Add for App\u4f18\u60e0\u5238\u7ed1\u5b9a\u63a5\u53e3 by liang_xiao 2017704 end
#Add for App\u4f18\u60e0\u5238\u6838\u9500\u63a5\u53e3 by liang_xiao 2017704 start
sql.UpdateAppCouponContent.002 = \
UPDATE \
  WX_COUPON_CONTENT \
SET \
   DEALER_CODE = ? \
  ,SRV_ORDER_NO = ? \
  ,VIN_NO = ? \
  ,SFX_CODE = ? \
  ,COUPON_STATUS = ? \
  ,MODIFY_ON = ? \
  ,MODIFY_BY =  ?  \
  ,WRITEOFFS_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END \
WHERE \
  COUPON_ID = ?
#Add for App\u4f18\u60e0\u5238\u6838\u9500\u63a5\u53e3 by liang_xiao 2017704 end


#Add by zhanglei at 20170706 for App \u7aef\u770b\u5230\u7ef4\u4fee\u8f66\u8f86\u9879\u76ee\u4e0etact\u4e0d\u7b26 start
sql.updatesrvsrvdetailf.001 = \
UPDATE \
    SRV_SRVDETAIL_F \
SET \
    DELETEFLAG = 1 \
WHERE \
    DEALERCODE = ? \
    AND ORDERNO = ?
#Add by zhanglei at 20170706 for App \u7aef\u770b\u5230\u7ef4\u4fee\u8f66\u8f86\u9879\u76ee\u4e0etact\u4e0d\u7b26 end

#add for \u5224\u65ad\u8f66\u8f86\u662f\u5426\u5df2\u7ed1\u5b9a by shen_kang 20170720 start
sql.getIsAlreadBind.001 = \
SELECT \
    DELETEFLAG \
FROM \
    USER_CAR \
WHERE \
    UID_GTMC = TRIM(?) AND \
    VINNO = TRIM(?)
#add for \u5224\u65ad\u8f66\u8f86\u662f\u5426\u5df2\u7ed1\u5b9a by shen_kang 20170720 end

#Add by liangxiao \u7528\u6237\u5b58\u5728\u5224\u65ad at 20170801 start
#\u7528\u6237\u57fa\u672c\u4fe1\u606f
sql.getUserLoginInfoByTel.001= \
SELECT \
    SYS_CD,PWD,ACTIVATE_FLG,UID_GTMC,UPPER(UPD_USER) AS UPD_USER,TEL_NO \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO =? \
ORDER BY \
    UPDATETIME DESC
#Add by liangxiao \u7528\u6237\u5b58\u5728\u5224\u65ad at 20170801 end

#Add for \u7535\u5546\u4f18\u60e0\u5238\u4fe1\u606f\u540c\u6b65\u7ed9APP by liangxiao at 20170815 start
sql.SelectSalesCoupBind.002 = \
SELECT \
	COUPON_ID \
	,EVENT_ID \
	,CARD_NAME \
	,COUPON_KBN \
	,COUPON_SUM \
	,COUPON_ENTITY_CONTENT \
	,TO_CHAR(COUPON_BEGIN,'YYYY-MM-DD') AS COUPON_BEGIN \
    ,TO_CHAR(COUPON_END,'YYYY-MM-DD') AS COUPON_END \
	,OPEN_ID \
	,COUPON_STATUS \
	,COUPON_RULE \
	,DEALER_CODE_FROM \
	,DEALER_CODE \
FROM \
  TACT_SALES_COUPON_CONTENT  \
WHERE \
  COUPON_ID = ? 

#Add for \u7535\u5546\u4f18\u60e0\u5238\u4fe1\u606f\u540c\u6b65\u7ed9APP by liangxiao at 20170815 end

##Add by lu_chuanchuan \u4f18\u60e0\u5238\u6279\u6b21\u4fe1\u606f\u66f4\u65b0 20170817 start
#\u67e5\u8be2\u4f18\u60e0\u5238\u6279\u6b21\u8868
sql.selectCouponBatchContent.001 = \
SELECT \
	COUNT(1) AS COUNT \
FROM \
	APP_COUPON_BATCH_CONTENT \
WHERE \
	COUPON_BATCH_ID = ?
#\u6839\u636e\u6279\u6b21\u53f7\u5220\u9664\u6570\u636e
sql.deleteCouponBatchContent.001 = \
DELETE \
FROM \
	APP_COUPON_BATCH_CONTENT \
WHERE \
	COUPON_BATCH_ID= ?
#\u4f18\u60e0\u5238\u6279\u6b21\u8868\u63d2\u5165\u4fe1\u606f
sql.insertCouponBatchContent.001 = \
INSERT INTO \
APP_COUPON_BATCH_CONTENT \
	( \
	SEQ_NO, \
	COUPON_BATCH_ID, \
	RULE_CODE, \
	RULE_ITEMNAME, \
	RULE_VALUE, \
	CREATE_TIME, \
	UPDATE_TIME \
	) \
VALUES \
	( \
	APP_COUPON_BATCH_CONTENT_SEQ.NEXTVAL, \
	?, \
	?, \
	?, \
	?, \
	SYSDATE, \
	SYSDATE \
	)
#Add by lu_chuanchuan \u4f18\u60e0\u5238\u6279\u6b21\u4fe1\u606f\u66f4\u65b0 20170817 end
#add for APP\u9500\u552e\u4f18\u60e0\u5238 by shen_kang 20170814 start
#\u67e5\u8be2app\u9500\u552e\u4f18\u60e0\u5238\u57fa\u672c\u4fe1\u606f
sql.getWxCouponContent.001 = \
SELECT \
    COUPON_ID, \
    COUPON_STATUS, \
    COUPON_BEGIN, \
    COUPON_END, \
    TYPE_ID, \
    COUPON_CONTENT, \
    SRV_ORDER_NO \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    COUPON_ID = ? \
AND DEL_FLAG = '0'

#\u67e5\u8be2\u4f18\u60e0\u5238\u4f7f\u7528\u89c4\u5219
sql.getAppSalesCouponRule.001 = \
SELECT \
  RULE_CODE, \
  RULE_VALUE, \
  RULE_CLASS_FIRST, \
  RULE_CLASS_SECOND \
FROM \
  TACT_SALES_COUPON_RULE RU \
INNER JOIN WX_COUPON_CONTENT WX ON RU.EVENT_ID = WX.COUPON_GROUP_ID \
WHERE \
  WX.COUPON_ID = ? \
  AND RU.IS_DEL='0' \
  AND RU.RULE_SYSTEM_KBN='2'

#\u67e5\u8be2\u9884\u8d2d\u534f\u8bae\u53f7\u5df2\u7ed1\u5b9a/\u6838\u9500\u7684\u4f18\u60e0\u5238\u4e2a\u6570
sql.getOrderNoUseCnt.001 = \
SELECT \
    COUNT(1) AS CNT \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    SRV_ORDER_NO = ? \
AND DEL_FLAG = '0' \
AND COUPON_STATUS IN ('2', '3') \
AND TYPE_ID='7'
#\u67e5\u8be2\u9884\u8d2d\u534f\u8bae\u53f7\u5df2\u7ed1\u5b9a/\u6838\u9500\u7684\u4f18\u60e0\u5238\u603b\u91d1\u989d
sql.getOrderNoMoneySum.001 = \
SELECT \
	COUPON_ID, \
	COUPON_CONTENT \
FROM \
	WX_COUPON_CONTENT \
WHERE \
	SRV_ORDER_NO = ? \
AND DEL_FLAG = '0' \
AND COUPON_STATUS IN ('2', '3') \
AND TYPE_ID = '7' 

#\u4f18\u60e0\u5238\u4f7f\u7528\u9650\u5b9a\u6761\u4ef6\u67e5\u8be2
sql.getAppSaleUseLimit.001 = \
SELECT \
    RULE_VALUE \
FROM \
    WX_COUPON_CONTENT WX \
INNER JOIN APP_COUPON_BATCH_CONTENT AP ON WX.COUPON_GROUP_ID = AP.COUPON_BATCH_ID \
WHERE \
    WX.COUPON_ID = ? \
AND AP.RULE_CODE = ?

#\u67e5\u8be2\u8f66\u578b\u4fe1\u606f
sql.getVehicleModelBySfx.001 = \
SELECT \
    STANDARD_MODEL_CODE||'@'||GRADECODE AS MODEL \
FROM \
    BASE_VEHICLE_MODEL \
WHERE \
    TRIM (SFX) = ? \
AND IS_DEL = '0'
#app\u9500\u552e\u4f18\u60e0\u5238\u7ed1\u5b9a/\u89e3\u7ed1
sql.appSalesCoupBind.001 = \
UPDATE WX_COUPON_CONTENT \
SET COUPON_STATUS = ?, \
    SFX_CODE = ?, \
    DEALER_CODE = ?, \
    SRV_ORDER_NO = ?, \
    MODIFY_ON = ?, \
    MODIFY_BY = ?, \
    BIND_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END \
WHERE \
    COUPON_ID = ?

#app\u9500\u552e\u4f18\u60e0\u5238\u6838\u9500
sql.appSalesCoupVeri.001 = \
UPDATE WX_COUPON_CONTENT \
SET COUPON_STATUS = ?, \
    SFX_CODE = ?, \
    DEALER_CODE = ?, \
    SRV_ORDER_NO = ?, \
    MODIFY_ON = ?, \
    MODIFY_BY = ?, \
    WRITEOFFS_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END \
WHERE \
    COUPON_ID = ?
#add for APP\u9500\u552e\u4f18\u60e0\u5238 by shen_kang 20170814 end
#Add by lu_chuancahun at 20170721 
sql.selectUserLogin.001 = \
SELECT \
	UID_GTMC \
FROM \
	USER_LOGIN \
WHERE \
	TEL_NO = ?
sql.deleteUserLoginByuidGtmc.001 = \
DELETE \
FROM \
	USER_LOGIN \
WHERE \
	UID_GTMC = ?
sql.deleteUserBaseInfoByuidGtmc.001 = \
DELETE \
FROM \
	USER_BASE_INFO \
WHERE \
	UID_GTMC = ?
sql.deleteUserCarByuidGtmc.001 = \
DELETE \
FROM \
	USER_CAR \
WHERE \
	UID_GTMC = ?
#Add by lu_chuanchuan at 20170721

#add for \u8f66\u8f86\u89e3\u7ed1\u6b21\u6570\u9650\u5236 by shen_kang 20170825 start
#\u67e5\u8be2\u8f66\u8f86\u89e3\u7ed1\u6b21\u6570
sql.getUnBindCountByVinNo.001 = \
SELECT \
    UNBIND_COUNT \
FROM \
    VEHICLE_UNBIND_COUNT \
WHERE \
    VIN_NO = ? \
AND DEL_FLAG = '0'
#\u5c06\u8f66\u8f86\u89e3\u7ed1\u4fe1\u606f\u63d2\u5165\u8f66
sql.insertUnbindCount.001 = \
INSERT INTO VEHICLE_UNBIND_COUNT ( \
    SEQ_NO, \
    VIN_NO, \
    UNBIND_COUNT, \
    UNBIND_DATE, \
    UNBIND_UID_GTMC, \
    DEL_FLAG \
) \
VALUES \
    ( \
        VEHICLE_UNBIND_COUNT_SEQ.NEXTVAL, \
        ?, \
        1, \
        SYSDATE, \
        ?, \
        '0' \
    )
#\u66f4\u65b0\u8f66\u8f86\u89e3\u7ed1\u6b21\u6570
sql.updateUnbindCount.001 = \
UPDATE VEHICLE_UNBIND_COUNT \
SET UNBIND_COUNT = UNBIND_COUNT + 1, \
 UNBIND_DATE = SYSDATE, \
 UNBIND_UID_GTMC = ? \
WHERE \
    VIN_NO = ? \
AND DEL_FLAG = '0'
#add for \u8f66\u8f86\u89e3\u7ed1\u6b21\u6570\u9650\u5236 by shen_kang 20170825 end
#add for \u4e00\u5929\u5185\u5c1d\u8bd5\u591a\u6b21\u7ed1\u8f66\u9650\u5236 by shen_kang 20170828 start
#\u67e5\u8be2\u624b\u673a\u53f7\u5f53\u5929\u5c1d\u8bd5\u7ed1\u5b9a\u7684\u8f66\u67b6\u53f7
sql.selectBindCountByTelNo.001 = \
SELECT DISTINCT \
    VIN_NO \
FROM \
    VEHICLE_BIND_LOG \
WHERE \
    TEL_NO = ? \
AND BIND_DAY = ? \
AND BIND_KBN='0'
#\u67e5\u8be2\u8f66\u67b6\u53f7\u5f53\u5929\u5c1d\u8bd5\u7684\u53d1\u52a8\u673a\u53f7\u7684\u6b21\u6570
sql.selectEngineNoCountByVinNo.001 = \
SELECT ENGINE_NO \
FROM \
    VEHICLE_BIND_LOG \
WHERE \
    TEL_NO = ? \
AND VIN_NO = ? \
AND BIND_DAY = ? \
AND BIND_KBN='0'
#\u63d2\u5165\u7ed1\u5b9alog
sql.insertVehicleBindLog.001 = \
INSERT INTO VEHICLE_BIND_LOG ( \
    SEQ_NO, \
    TEL_NO, \
    VIN_NO, \
    ENGINE_NO, \
    BIND_DAY, \
    CREDATE, \
    BIND_KBN \
) \
VALUES \
    ( \
        VEHICLE_BIND_LOG_SEQ.NEXTVAL, \
        ?, \
        ?, \
        ?, \
        TO_CHAR (SYSDATE, 'YYYYMMDD'), \
        SYSDATE, \
        ? \
    )
#\u67e5\u8be2\u5f53\u5929\u7684\u89e3\u7ed1\u6b21\u6570
sql.selectUnbindCntAtNowDay.001 = \
SELECT \
    TEL_NO \
FROM \
    VEHICLE_BIND_LOG \
WHERE \
    VIN_NO = ? \
AND BIND_DAY = ? \
AND BIND_KBN = '1'
#\u6839\u636eUID_GTMC\u67e5\u8be2\u7528\u6237\u624b\u673a\u53f7
sql.selectTelNoByGtmc.001 = \
SELECT \
    TEL_NO \
FROM \
    USER_LOGIN \
WHERE \
    UID_GTMC = ?
#add for \u4e00\u5929\u5185\u5c1d\u8bd5\u591a\u6b21\u7ed1\u8f66\u9650\u5236  by shen_kang 20170828 end
#add for \u5168\u65b0\u6c49\u5170\u8fbe\u8f66\u4e3b\u5173\u6000\u6d3b\u52a8 by shen_kagn 20170901 start
#\u67e5\u8be2\u7528\u6237\u662f\u5426\u6ce8\u518c
sql.selectUserIsExist.001 = \
SELECT \
    UID_GTMC \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO = ? \
AND DELETEFLAG = '0'

#\u67e5\u8be2\u8f66\u8f86\u4fe1\u606f
sql.selectUserCarForHLD.001 = \
SELECT \
    UC.UID_GTMC \
FROM \
    USER_CAR UC \
INNER JOIN TACT_ORDER_VEHICLE_BK TA ON UC.VINNO = TA.FRAMENO \
WHERE \
    UC.UID_GTMC = ? \
AND UC.VINNO = ? \
AND TA.VEHICLENAMECODE = 'HLD-T' \
AND NVL(TA.SALESPART,'0') <> '5' \
AND TA.CANCELDATE IS NULL \
AND UC.DELETEFLAG = '0' \
AND TA.DELETEFLAG='0'

#\u67e5\u8be2\u8be5\u8f66\u662f\u5426\u5df2\u9886\u53d6\u8fc7\u4f18\u60e0\u5238
sql.selectIsReceived.001 = \
SELECT \
    COUPON_ID \
FROM \
    HLD_COUPON_RECEIVE \
WHERE \
    VIN_NO = ? \
AND DEL_FLAG = '0'

#\u67e5\u8be2\u672a\u88ab\u53d1\u653e\u7684\u4f18\u60e0\u5238
sql.selectCouponIdByWxCoupForHLD.001 = \
SELECT \
    COUPON_ID \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    EVENT_ID = '30003' \
AND OPEN_ID IS NULL \
AND ROWNUM<3000

#\u5c06\u4f18\u60e0\u5238\u4e0e\u7528\u6237\u7ed1\u5b9a
sql.updateWxCoupForHLD.001 = \
UPDATE WX_COUPON_CONTENT \
SET OPEN_ID = ?, \
 GET_DATE = SYSDATE, \
 USER_NUMBER = ?, \
 MODIFY_BY = 'IBPP', \
 MODIFY_ON = ?, \
 VIN_NO= ? \
WHERE \
    COUPON_ID = ?

#\u5c06\u7528\u6237\u9886\u5238\u4fe1\u606f\u63d2\u5165\u5e93\u4e2d
sql.insertHLDReceive.001 = \
INSERT INTO HLD_COUPON_RECEIVE ( \
    SEQ_NO, \
    TEL_NO, \
    VIN_NO, \
    COUPON_ID, \
    SEND_MESSAGE, \
    SEND_STATUS, \
    CREATE_DATE, \
    CREATE_USER, \
    UPDATE_DATE, \
    UPDATE_USER \
) \
VALUES \
    ( \
        HLD_COUPON_RECEIVE_SEQ.NEXTVAL, \
        ?, \
        ?, \
        ?, \
        ?, \
        '0', \
        SYSDATE, \
        'IBPP', \
        SYSDATE, \
        'IBPP' \
    )

#\u66f4\u65b0\u77ed\u4fe1\u53d1\u9001\u60c5\u51b5
sql.updateHLDReceive.001 = \
UPDATE HLD_COUPON_RECEIVE \
SET SEND_STATUS = ?, \
 ERROR_MESSAGE = ?, \
 SEND_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?,'YYYY-MM-DD HH24:MI:SS') END, \
 SEND_COUNT = SEND_COUNT + 1, \
 UPDATE_DATE = SYSDATE, \
 UPDATE_USER = 'IBPP' \
WHERE \
    TEL_NO = ? \
AND VIN_NO = ? \
AND COUPON_ID = ?
#\u67e5\u8be2\u4f18\u60e0\u5238\u4fe1\u606f
sql.selectHLDWxCoupon.001 = \
SELECT \
    EVENT_ID, \
    OPEN_ID, \
    COUPON_KBN, \
    TYPE_ID, \
    COUPON_ID, \
    CARD_ID, \
    COUPON_CONTENT, \
    COUPON_RULE, \
    COUPON_BEGIN, \
    COUPON_END, \
    SRV_ORDER_NO, \
    DEALER_CODE_FROM, \
    COUPON_STATUS, \
    SYSTEM_ID, \
    DEALER_CODE, \
    USER_NUMBER, \
    COUPON_DETAIL \
FROM WX_COUPON_CONTENT \
WHERE COUPON_ID = ? 
#add for \u5168\u65b0\u6c49\u5170\u8fbe\u8f66\u4e3b\u5173\u6000\u6d3b\u52a8 by shen_kagn 20170901 end
#add for \u65b0\u6c49\u5170\u8fbe\u6d3b\u52a8\u4f18\u60e0\u5238\u6838\u9500 by liangxiao 20170831 start
#\u83b7\u53d6\u8f66\u578b
sql.selectVhcCode.001 = \
SELECT \
    VIN_NO AS VIN \
FROM \
	WX_COUPON_CONTENT \
WHERE \
    COUPON_ID = ? \
AND DEL_FLAG = '0'

#\u83b7\u53d6\u7ef4\u4fee\u9879\u76ee
sql.selectSrvDetail.001 = \
SELECT \
    SRVCODE \
FROM \
    SRV_SRVDETAIL_F_VALI \
WHERE \
    DEALERCODE = ? \
AND ORDERNO = ?

#\u83b7\u53d6\u96f6\u4ef6\u660e\u7ec6
sql.selectPartsCode.001 = \
SELECT \
    PARTSCODE \
FROM \
    SRV_PARTSDETAIL_F_VALI \
WHERE \
    DEALERCODE = ? \
AND ORDERNO = ? 

#add for \u65b0\u6c49\u5170\u8fbe\u6d3b\u52a8\u4f18\u60e0\u5238\u6838\u9500 by liangxiao 20170831 end
#add for APP\u9500\u552e\u4f18\u60e0\u5238\u7ed1\u5b9acheck by shen_kang 20170911 start
sql.selectBindCntForAppSales.001 = \
SELECT \
    COUPON_ID \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    SRV_ORDER_NO= ? \
    AND DEL_FLAG = '0' \
AND COUPON_STATUS IN ('2', '3') \
AND TYPE_ID='7'
#add for APP\u9500\u552e\u4f18\u60e0\u5238\u7ed1\u5b9acheck by shen_kang 20170911 end
#add for APP\u552e\u540e\u4f18\u60e0\u5238\u9650\u5b9a\u8f66\u578b \u9650\u5b9a\u9500\u552e\u5e97 by shen_kang 20170913 start
#\u6839\u636e\u5238\u7801\u67e5\u8be2\u8f66\u578b\u9500\u552e\u5e97\u9650\u5236
sql.selectAstrictByCouponId.001 = \
SELECT \
    RULE_VALUE \
FROM \
    WX_COUPON_CONTENT WX \
INNER JOIN APP_COUPON_BATCH_CONTENT AP ON WX.COUPON_GROUP_ID = AP.COUPON_BATCH_ID \
WHERE \
    WX.COUPON_ID = ? \
AND AP.RULE_CODE = ?
#\u67e5\u8be2\u5de5\u5355\u4e2d\u7684\u8f66\u578b\u4fe1\u606f
sql.selectVhcCodeByOrder.001 = \
SELECT \
	VEHICLENAMECODE AS MODEL \
FROM \
	TACT_ORDER_VEHICLE_BK \
WHERE \
	FRAMENO = ? \
AND DELETEFLAG = '0'

#\u67e5\u8be2\u8be5\u6279\u6b21\u7684\u89c4\u5219\u662f\u5426\u5b58\u5728
sql.selectRuleByModel.001 = \
SELECT \
    1 \
FROM \
    BASE_COUPON_RULE \
WHERE \
    EVENT_ID = ? \
AND RULE_CODE = ?
#\u63d2\u5165\u89c4\u5219
sql.insertRuleForApp.001 = \
INSERT INTO BASE_COUPON_RULE ( \
    EVENT_ID, \
    RULE_CODE, \
    ITEMNAME, \
    RULE_VALUE, \
    CRT_DATETIME, \
    CRT_USER, \
    UPD_DATETIME, \
    UPD_USER, \
    IS_DEL, \
    COUPON_ID \
) \
VALUES \
    ( \
        ?, \
        ?, \
        ?, \
        ?, \
        SYSDATE, \
        'IBPP', \
        SYSDATE, \
        'IBPP', \
        '0', \
        ' ' \
    )
#\u66f4\u65b0\u89c4\u5219
sql.updateRuleForApp.001 = \
UPDATE BASE_COUPON_RULE \
SET RULE_VALUE = ?, \
 UPD_DATETIME = SYSDATE, \
 UPD_USER = 'IBPP' \
WHERE \
    EVENT_ID = ? \
AND RULE_CODE = ?
#add for APP\u552e\u540e\u4f18\u60e0\u5238\u9650\u5b9a\u8f66\u578b \u9650\u5b9a\u9500\u552e\u5e97 by shen_kang 20170913 end

#Add for \u8f66\u8f86\u4e0a\u4e0b\u5de5\u4f4d\u72b6\u6001\u540c\u6b65\u63a5\u53e3 by liangxiao 20170914 start
#\u6839\u636e\u8f66\u724c\u53f7\u83b7\u53d6\u7ef4\u4fee\u5de5\u5355\u4fe1\u606f
sql.selectTactSrvOrder.001 = \
SELECT \
    ORDERNO, \
    REGISTERNO, \
    VINNO \
FROM \
    TACT_SRV_ORDER \
WHERE \
    REGISTERNO = ? \
    AND DELETEFLAG = '0' \
    AND TYPICALSRVTYPE IN ('U', '1', 'A', '4', 'E', 'F', 'D', 'B', '6', 'C', '7', '9', '5', 'N', 'O', 'P') 

#\u65b0\u89c4\u8f66\u8f86\u4e0a\u4e0b\u5de5\u4f4d\u72b6\u6001\u540c\u6b65\u4fe1\u606f
sql.InsertMaintnenceCarStatusInfo.001 = \
INSERT INTO MAINTENANCE_CAR_STATUS_INFO \
  ( \
    SEQ_NO , \
    REGISTER_NO , \
    SRV_ORDER_NO , \
    STALL_ID , \
    CAMERA_ID1 , \
    CAMERA_ID2 , \
    DEALER_CODE , \
    STATUS , \
    CREATED_ON , \
    CREATED_BY, \
    MODIFY_ON , \
    MODIFY_BY \
  ) \
  VALUES( \
    CAR_STATUS_INFO_SEQ.NEXTVAL, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    SYSDATE, \
    'ibpp', \
    SYSDATE, \
    'ibpp' \
  )
#\u6839\u636e\u5de5\u4f4d\u7f16\u53f7\u548c\u9500\u552e\u5e97\u7f16\u53f7\u83b7\u53d6\u5de5\u4f4d\u4fe1\u606f
sql.selectStallIdStatusInfo.001 = \
SELECT \
    REGISTER_NO , \
    SRV_ORDER_NO , \
    STATUS \
FROM \
	STALL_CAR_STATUS_INFO \
WHERE \
	STALL_ID = ? \
AND DEALER_CODE =?

# \u6dfb\u52a0\u5de5\u4f4d\u4fe1\u606f\u5230\u5de5\u4f4d\u4fe1\u606f
sql.insertCarStatusInfo.001 = \
INSERT INTO STALL_CAR_STATUS_INFO \
  ( \
    REGISTER_NO , \
    SRV_ORDER_NO , \
    STALL_ID , \
    CAMERA_ID1 , \
    CAMERA_ID2 , \
    DEALER_CODE , \
    STATUS , \
    CREATED_ON , \
    CREATED_BY, \
    MODIFY_ON , \
    MODIFY_BY \
  ) \
  VALUES( \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    SYSDATE, \
    'ibpp', \
    SYSDATE, \
    'ibpp' \
  )

#\u66f4\u65b0\u5de5\u4f4d\u72b6\u6001
sql.updateCarStatusInfo.001 = \
UPDATE \
	STALL_CAR_STATUS_INFO \
SET \
	STATUS = 1, \
	MODIFY_ON = SYSDATE, \
	MODIFY_BY = 'ibpp' \
WHERE \
	STALL_ID = ? \
AND DEALER_CODE =?

#\u66f4\u65b0\u5de5\u4f4d\u72b6\u6001
sql.updateCarStatusInInfo.001 = \
UPDATE \
	STALL_CAR_STATUS_INFO \
SET \
	REGISTER_NO = ?, \
    SRV_ORDER_NO = ?, \
    CAMERA_ID1 = ?, \
    CAMERA_ID2 = ?, \
	STATUS = 0, \
	MODIFY_ON = SYSDATE, \
	MODIFY_BY = 'ibpp' \
WHERE \
	STALL_ID = ? \
AND DEALER_CODE =?

#Add for \u8f66\u8f86\u4e0a\u4e0b\u5de5\u4f4d\u72b6\u6001\u540c\u6b65\u63a5\u53e3 by liangxiao 20170914 end

#Add for \u5fae\u4fe1\u7528\u6237\u4fe1\u606f\u9a8c\u8bc1 by lu_chuanchuan 20170918 start
#\u67e5\u8be2\u7528\u6237\u7684\u7535\u8bdd
sql.selectUserWxInfoById.001 = \
SELECT \
	UID_GTMC \
FROM \
	USER_WX_INFO \
WHERE \
	OPEN_ID = ? \
	AND UNION_ID = ?
#\u67e5\u8be2\u7528\u6237\u7684\u7edf\u5408ID
sql.updateUserWxInfo.001 = \
UPDATE \
	USER_WX_INFO \
SET \
	UPDATE_TIME = SYSDATE \
WHERE \
	OPEN_ID = ? \
	AND UNION_ID = ?
#Add for \u5fae\u4fe1\u7528\u6237\u4fe1\u606f\u9a8c\u8bc1 by lu_chuanchuan 20170918 end

# add for leikaiwei  2017-09-25 \u63d2\u5165\u7528\u6237\u7ed1\u5b9a\u4fe1\u606f  start 
sql.insertUserWxInfo.001 = \
INSERT INTO \
	USER_WX_INFO( \
SEQ_NO, \
UID_GTMC, \
DLRCODE, \
UNION_ID, \
OPEN_ID, \
CREATE_USER, \
CREATE_TIME, \
UPDATE_USER, \
UPDATE_TIME \
) \
VALUES( \
USER_WX_INFO_SEQ.NEXTVAL, \
?, \
?, \
?, \
?, \
'IBPP', \
SYSDATE, \
'IBPP', \
SYSDATE \
) 
# add for leikaiwei  2017-09-25 \u63d2\u5165\u7528\u6237\u7ed1\u5b9a\u4fe1\u606f  end 
#Add for \u9a8c\u8bc1\u7528\u6237\u6ce8\u518c\u548c\u7ed1\u5b9a by lu_chuanchuan 20171011 start
#\u6839\u636e\u5de5\u5355\u53f7\u67e5\u8be2\u9001\u4fee\u8005\u7535\u8bdd
sql.selectTactSrvOrderByOrderNO.001 = \
SELECT \
	TWCTEL1, \
	TWCTEL2 \
FROM \
	TACT_SRV_ORDER \
WHERE \
	ORDERNO = ? \
	AND DEALERCODE = ?
#\u6839\u636eopenId\u67e5\u8be2\u7528\u6237\u662f\u5426\u7ed1\u5b9a
sql.selectUserWxInfoByopenId.001 = \
SELECT \
	COUNT(1) AS COUNT \
FROM \
	USER_WX_INFO \
WHERE \
	OPEN_ID = ?
#\u6839\u636eopenId\u67e5\u8be2\u7528\u6237\u7684\u7edf\u5408ID
sql.selectUserWxInfoByopenId.002 = \
SELECT \
	UID_GTMC \
FROM \
	USER_WX_INFO \
WHERE \
	OPEN_ID = ?
#\u6839\u636e\u7535\u8bdd\u67e5\u8be2\u7528\u6237\u7684\u7edf\u5408ID
sql.selectUserLoginByTel.001 = \
SELECT \
	UID_GTMC \
FROM \
	USER_LOGIN \
WHERE \
	TEL_NO = ?
sql.selectKpiSrvOrderHisByOrderNO.001 = \
SELECT \
	TWCTEL1, \
	TWCTEL2 \
FROM \
	KPI_SRV_ORDER_HISTORY \
WHERE \
	ORDERNO = ? \
	AND DEALERCODE = ?
#Add for \u9a8c\u8bc1\u7528\u6237\u6ce8\u518c\u548c\u7ed1\u5b9a by lu_chuanchuan 20171011 end

#Add for \u7535\u5546\u540c\u6b65\u7528\u6237\u4fe1\u606f\u5230I-Club by lu_chuanchuan 20171201 start
#\u6839\u636e\u7528\u6237\u7684\u7edf\u5408\u7ba1\u7406Id\u548c\u7cfb\u7edfCD\u67e5\u627e\u7528\u6237\u4fe1\u606f
sql.getUserLoginInfo.002 = \
SELECT \
    SYS_CD, \
    USER_ID, \
    UID_GTMC, \
    TEL_NO, \
    PWD, \
    ACTIVATE_FLG, \
    CREDATE, \
    UPDATETIME, \
    DELETEFLAG \
FROM \
	USER_LOGIN \
WHERE \
	UID_GTMC = ? \
	AND SYS_CD = ?

#\u6839\u636e\u7edf\u5408\u7ba1\u7406ID\u67e5\u627e\u7528\u6237\u4fe1\u606f
sql.getLogInUserBaseInfo.002 = \
SELECT \
    UID_GTMC, \
    NAME, \
    SEX, \
    BIRTHDAY_YEAR, \
    BIRTHDAY_MONTH, \
    BIRTHDAY_DAY, \
    AVATAR_IMG_GCLUB, \
    AVATAR_IMG_ICLUB, \
    ADDRESS_PROVINCE, \
    ADDRESS_CITY, \
    ADDRESS_DETAIL, \
    DEALER_CODE, \
    DRIVING_LICENSE_EXPIRY_DATE, \
    APIREGISTER, \
    TO_CHAR(REGIST_DATE_GCLUB, 'YYYY-MM-DD HH24:MI:SS') AS REGISTDATEGCLUB, \
    REGIST_DATE_ICLUB, \
    WX_CODE, \
    NICKNAME, \
    USER_TYPE, \
    IDENTITY_CARD, \
    RECOMMENDED_NAME, \
    REGIST_FROM_TYPE, \
    REGIST_FROM_CD, \
    STATUS, \
    LOGIN_COUNT_ICLUB, \
    LAST_LOGIN_DATE_ICLUB, \
    LOGIN_FAIL_COUNT_ICLUB, \
    LOGIN_COUNT_GCLUB, \
    LAST_LOGIN_DATE_GCLUB, \
    LOGIN_FAIL_COUNT_GCLUB, \
    DEVICE_ID, \
    APP_VERSION, \
    APP_OS_TYPE, \
    CRT_USER, \
    CRT_DATETIME, \
    UPD_USER, \
    UPD_DATETIME \
FROM \
	USER_BASE_INFO \
WHERE \
	UID_GTMC = ?
#\u6839\u636e\u7edf\u5408\u7ba1\u7406ID\u67e5\u627e\u7528\u6237\u4fe1\u606f
sql.selectUserBaseInfo.001 = \
SELECT \
	1 \
FROM \
	USER_BASE_INFO \
WHERE \
	UID_GTMC = ?
	
#\u6dfb\u52a0\u4fe1\u606f\u5230\u5e10\u53f7\u57fa\u672c\u4fe1\u606f\u8868
sql.insertUserBaseInfo.001 = \
INSERT INTO \
	USER_BASE_INFO \
	( \
		UID_GTMC, \
		NAME, \
		SEX, \
		BIRTHDAY_YEAR, \
		BIRTHDAY_MONTH, \
		BIRTHDAY_DAY, \
		AVATAR_IMG_ICLUB, \
		ADDRESS_PROVINCE, \
		ADDRESS_CITY, \
		ADDRESS_DETAIL, \
		DRIVING_LICENSE_EXPIRY_DATE, \
		NICKNAME, \
		UPD_USER, \
		UPD_DATETIME, \
		CRT_USER, \
		CRT_DATETIME \
	) \
	VALUES \
	( \
		?, \
		?, \
		?, \
		?, \
		?, \
		?, \
		?, \
		?, \
		?, \
		?, \
		CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD') END, \
		?, \
		'\u7535\u5546', \
		SYSDATE, \
		'\u7535\u5546', \
		SYSDATE \
	)
#Add for \u7535\u5546\u540c\u6b65\u7528\u6237\u4fe1\u606f\u5230I-Club by lu_chuanchuan 20171201 end

#add for \u6839\u636e\u8f66\u67b6\u53f7\u67e5\u8be2\u8f66\u8f86\u4fe1\u606f by shen_kang 20171208 start
#add for \u6839\u636e\u53d1\u52a8\u673a\u53f7\u67e5\u8be2\u8f66\u8f86\u4fe1\u606f
sql.selectVhcByEng.001 = \
SELECT \
    A.FRAMENO AS vinNo, \
    A.MODEL AS model, \
    A.SFX AS sfx, \
    A.COLORCD AS colorCode, \
    A.COLORNAME AS COLORNAME, \
    TO_CHAR(A.SALESDATE, 'YYYY-MM-DD') AS vhcSalesDate, \
    C.ENGINENO AS engine, \
    MAX(B.REGISTERNO) AS registerNo, \
    A.VEHICLENAMECODE AS VEHICLENAMECODE, \
    A.VEHICLENAME AS VEHICLENAME, \
    A.BUYERNAME AS BUYERNAME, \
    TO_CHAR(A.PDSSETTLEDATE, 'YYYY-MM-DD') AS PDSSETTLEDATE, \
    TO_CHAR(A.DELIVERYENDDATE, 'YYYY-MM-DD') AS DELIVERYENDDATE, \
    A.BUYERTEL1 AS buyerTel1, \
    A.BUYERTEL2 AS buyerTel2, \
    A.BUYERMOBIL1 AS buyerMobil1, \
    A.BUYERMOBIL2 AS buyerMobil2, \
    A.NOMINEETEL1 AS nomineeTel1, \
    A.NOMINEETEL2 AS nomineeTel2, \
    A.NOMINEEMOBIL1 AS nomineeMobil1, \
    A.NOMINEEMOBIL2 AS nomineeMobil2 \
FROM \
    TACT_ORDER_VEHICLE_BK A \
    LEFT JOIN TACT_CUSTOMER_VEHICLE B ON A.FRAMENO = B.VINNO AND B.DELETEFLAG = '0' \
    LEFT JOIN LCMS_VOITUREINFO C ON A.FRAMENO = C.VIN \
WHERE \
    A.FRAMENO = TRIM(?) AND \
    A.DELETEFLAG = '0' \
    AND A.DELIVERYENDDATE IS NOT NULL \
GROUP BY \
    A.FRAMENO, \
    A.MODEL, \
    A.SFX, \
    A.COLORCD, \
    A.COLORNAME, \
    A.SALESDATE, \
    C.ENGINENO, \
    A.REGISTNO, \
    A.VEHICLENAMECODE, \
    A.VEHICLENAME, \
    A.BUYERNAME, \
    A.PDSSETTLEDATE, \
    A.DELIVERYENDDATE, \
    A.BUYERTEL1, \
    A.BUYERTEL2, \
    A.BUYERMOBIL1, \
    A.BUYERMOBIL2, \
    A.NOMINEETEL1, \
    A.NOMINEETEL2, \
    A.NOMINEEMOBIL1, \
    A.NOMINEEMOBIL2
#add for \u6839\u636e\u8f66\u67b6\u53f7\u67e5\u8be2\u8f66\u8f86\u4fe1\u606f by shen_kang 20171208 end

#Add for \u8f66\u53cb\u4f1a\u4f18\u60e0\u52b5\u6570\u636e\u9a7b\u7559EIP\u5e73\u53f0 by liangxiao 20171205 start
#\u4f18\u60e0\u5238\u4ef6\u6570\u67e5\u8be2
sql.selectIclubCouponContentCount.001 = \
SELECT \
    COUNT(1) AS COUNT \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    COUPON_ID = ? \
    AND COUPON_GROUP_ID = ?
#\u83b7\u53d6\u7edf\u5408\u7ba1\u7406ID
sql.selectUidGtmcByTelNo.001 = \
SELECT \
    UID_GTMC \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO = ?
#\u4f18\u60e0\u5238\u4fe1\u606f\u66f4\u65b0\u5904\u7406
sql.updateIclubCouponContent.001 = \
UPDATE \
    WX_COUPON_CONTENT \
SET \
    CARD_ID = ?, \
    OPEN_ID = ?, \
    DEALER_CODE = ?, \
    COUPON_STATUS = ?, \
    TYPE_ID = ?, \
    COUPON_CONTENT = ?, \
    COUPON_RULE = ?, \
    COUPON_BEGIN = ?, \
    COUPON_END = ?, \
    SRV_ORDER_NO = ?, \
    UPDATE_COUNT = NULL, \
    DEL_FLAG = '0', \
    USER_NAME = NULL, \
    USER_NUMBER = ?, \
    COUPON_GROUP_ID = ?, \
    COUPON_URL = ?, \
    GET_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    BIND_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    WRITEOFFS_DATE = CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    DEALER_CODE_FROM = ?, \
    COUPON_PWD = ?, \
    COUPON_PHONE = ?, \
    COUPON_INTRODUCTION = ?, \
    COUPON_GRANT_TYPE = ?, \
    FROM_APPLICATION = ?, \
    IS_PARALLEL = '0', \
    MODIFY_ON = ?, \
    COUPON_ENTITY_CONTENT = ?, \
    MODIFY_BY = 'ibpp', \
    COUPON_KBN = ?, \
    THIRDPARTY_NAME = ?, \
    EVENT_ID = '88888', \
    COUPON_DETAIL = ? \
WHERE \
    COUPON_ID = ?
#\u4f18\u60e0\u5238\u4fe1\u606f\u6dfb\u52a0\u5904\u7406
sql.insertIclubCouponContent.001 = \
INSERT INTO \
    WX_COUPON_CONTENT \
    ( \
    COUPON_CONTENT_GUID, \
    COUPON_ID, \
    CARD_ID, \
    OPEN_ID, \
    DEALER_CODE, \
    COUPON_STATUS, \
    TYPE_ID, \
    COUPON_CONTENT, \
    COUPON_RULE, \
    COUPON_BEGIN, \
    COUPON_END, \
    SRV_ORDER_NO, \
    UPDATE_COUNT, \
    DEL_FLAG, \
    USER_NAME, \
    USER_NUMBER, \
    COUPON_GROUP_ID, \
    COUPON_URL, \
    GET_DATE, \
    BIND_DATE, \
    WRITEOFFS_DATE, \
    DEALER_CODE_FROM, \
    COUPON_PWD, \
    COUPON_PHONE, \
    COUPON_INTRODUCTION, \
    COUPON_GRANT_TYPE, \
    FROM_APPLICATION, \
    IS_PARALLEL, \
    SYSTEM_ID, \
    COUPON_ENTITY_CONTENT, \
    CREATED_ON, \
    CREATED_BY, \
    MODIFY_ON, \
    MODIFY_BY, \
    COUPON_KBN, \
    THIRDPARTY_NAME, \
    COUPON_DETAIL, \
    EVENT_ID \
    ) \
    VALUES \
    ( \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    NULL, \
    '0', \
    NULL, \
    ?, \
    ?, \
    ?, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    CASE WHEN ? IS NULL THEN NULL ELSE TO_DATE(?, 'YYYY-MM-DD HH24:MI:SS') END, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    '0', \
    '003', \
    ?, \
    ?, \
    'ibpp', \
    ?, \
    'ibpp', \
    ?, \
    ?, \
    ?, \
    '88888' \
    )
#Add for \u8f66\u53cb\u4f1a\u4f18\u60e0\u52b5\u6570\u636e\u9a7b\u7559EIP\u5e73\u53f0 by liangxiao 20171205 end
#Add for \u552e\u540e\u4f18\u60e0\u5238\u67e5\u8be2 by lu_chuanchuan 20171212 start
#\u6839\u636e\u8f66\u67b6\u53f7\u67e5\u8be2\u7528\u6237\u7684\u7edf\u5408\u7ba1\u7406Id
sql.selectUserCarByVinNo.001 = \
SELECT \
	UID_GTMC \
FROM \
	USER_CAR \
WHERE \
	VINNO = ? AND DELETEFLAG = '0'
#\u6839\u636e\u7528\u6237Id\u548c\u9500\u552e\u5e97\u4ee3\u7801\u67e5\u8be2\u5382\u5546\u548c\u9500\u552e\u5e97\u53d1\u884c\u7684\u7684\u672a\u7ed1\u5b9a\u672a\u8fc7\u671f\u7684\u4f18\u60e0\u5238
sql.selectCvmCouponByOpenIdAndDealerCode.001 = \
SELECT \
	UL.TEL_NO, \
	UBI.NAME, \
	BDI.DEALER_NAME, \
	WCC.EVENT_ID, \
	WCC.COUPON_GROUP_ID, \
 	WCC.CARD_ID, \
	WCC.TYPE_ID, \
	WCC.COUPON_ID, \
	WCC.COUPON_CONTENT, \
	WCC.COUPON_END, \
	WCC.IS_PARALLEL, \
	WCC.COUPON_RULE, \
	WCC.DEALER_CODE_FROM \
FROM \
	WX_COUPON_CONTENT WCC \
	LEFT JOIN USER_LOGIN UL ON WCC.OPEN_ID = UL.UID_GTMC AND UL.DELETEFLAG = '0' \
	LEFT JOIN USER_BASE_INFO UBI ON WCC.OPEN_ID = UBI.UID_GTMC \
	LEFT JOIN BASE_DEALER_INFO BDI ON WCC.DEALER_CODE_FROM = BDI.DEALER_CODE AND BDI.IS_DEL = '0' \
WHERE \
	WCC.DEALER_CODE_FROM IN (?,'00000') \
	AND WCC.OPEN_ID = ? \
	AND WCC.COUPON_STATUS = '0' \
	AND WCC.TYPE_ID <> '7' \
	AND WCC.COUPON_END >= TO_CHAR(SYSDATE,'YYYY-MM-DD')
#\u6839\u636e\u4f18\u60e0\u5238\u7ec4ID\u67e5\u8be2\u5f53\u524d\u4f18\u60e0\u5238\u7684\u9650\u7528\u8f66\u578b	
sql.selectAppCouponBatchContentByGroupId.001 = \
SELECT \
	RULE_VALUE \
FROM \
	APP_COUPON_BATCH_CONTENT \
WHERE \
	COUPON_BATCH_ID = ? AND RULE_CODE = '01-002'
#\u6839\u636e\u4f18\u60e0\u5238\u7ec4ID\u67e5\u8be2\u5f53\u524d\u4f18\u60e0\u5238\u7684\u9650\u7528\u5e97
sql.selectAppCouponBatchContentByGroupId.002 = \
SELECT \
	RULE_VALUE \
FROM \
	APP_COUPON_BATCH_CONTENT \
WHERE \
	COUPON_BATCH_ID = ? AND RULE_CODE = '01-003'
#\u6839\u636e\u8f66\u540d\u4ee3\u7801\u548c\u7b49\u7ea7\u4ee3\u7801\u67e5\u627e\u5f53\u524d\u8f66\u578b
sql.selectBaseVehicleModelByCode.001 = \
SELECT \
	VHCNAME \
FROM \
	BASE_VEHICLE_MODEL \
WHERE \
	VHCNAMECODE = ? AND GRADECODE = ?
#\u6839\u636e\u6d3b\u52a8Id\u67e5\u8be2\u7535\u5546\u4f18\u60e0\u5238\u7684\u9650\u7528\u8f66\u578b
sql.selectBaseCouponRuleByEventId.001 = \
SELECT \
	RULE_VALUE \
FROM \
	BASE_COUPON_RULE \
WHERE \
	EVENT_ID = ? AND RULE_CODE = '03-003'
#\u6839\u636e\u8f66\u578b\u4ee3\u7801\u67e5\u8be2\u5f53\u524d\u8f66\u578b\u7684\u540d\u79f0
sql.selectBaseVhicleModelByCode.002 = \
SELECT \
	VHCNAME \
FROM \
	BASE_VEHICLE_MODEL \
WHERE \
	VHCNAMECODE = ?
#Add for \u552e\u540e\u4f18\u60e0\u5238\u67e5\u8be2 by lu_chuanchuan 20171212 end
#Add for CSI\u8c03\u7814\u79ef\u5206\u83b7\u53d6 by liangxiao at 20171219 start
# \u67e5\u627e\u5df2\u6fc0\u6d3b\u7684\u4f1a\u5458\u4ef6\u6570
sql.selectUserInfo.001 = \
SELECT \
    COUNT(1) AS NUM \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO = ? \
AND DELETEFLAG = '0'

# \u6839\u636e\u5de5\u5355\u53f7\u548c\u8f66\u67b6\u53f7\u67e5\u8be2\u5de5\u5355\u4ef6\u6570
sql.selectVinnoOrderno.001 = \
SELECT \
    COUNT(1) AS NUM \
FROM \
    TACT_SRV_ORDER \
WHERE \
    VINNO = ? \
AND ORDERNO = ? 
# \u6839\u636e\u5de5\u5355\u53f7\u67e5\u8be2\u4e4b\u524d\u8be5\u5de5\u5355\u662f\u5426\u5df2\u7ecf\u53d1\u9001\u8fc7\u79ef\u5206
sql.selectSendCSIPointList.001 = \
SELECT \
    COUNT(1) AS NUM \
FROM \
    CSI_UPDATE_POINT_HISTORY \
WHERE \
    ORDER_NO = ? 
# \u6839\u636e\u7528\u6237ID\u83b7\u53d6\u7528\u6237\u6838\u5fc3\u4fe1\u606f
sql.selectUserCore.001 = \
SELECT \
    POINT, \
    EXP \
FROM \
    USER_CORE \
WHERE \
    USER_ID = ?
# \u67e5\u8be2\u7528\u6237\u6838\u5fc3\u4fe1\u606f\u53d8\u66f4\u5c65\u5386\u4ef6\u6570
sql.selectUserCoreChgHis.001 = \
SELECT \
    COUNT(1) AS NUM \
FROM \
    USER_CORE_CHG_HIS \
WHERE \
    CONTENT = ?    
#Add for CSI\u8c03\u7814\u79ef\u5206\u83b7\u53d6 by liangxiao at 20171219 end

#add for \u5fae\u4fe1\u7528\u6237\u6ce8\u518c\u4e0e\u7ed1\u5b9a\u63a5\u53e3\u589e\u52a0\u9a8c\u8bc1 by shen_kang 20171222 start
#\u67e5\u8be2\u8be5\u7528\u6237\u662f\u5426\u5df2\u5b58\u5728
sql.selectNrpCsiKpiPer.001 = \
SELECT \
    1 \
FROM \
    NRP_CSI_KPI_PERSON \
WHERE \
    TEL_NO = ?
#add for \u5fae\u4fe1\u7528\u6237\u6ce8\u518c\u4e0e\u7ed1\u5b9a\u63a5\u53e3\u589e\u52a0\u9a8c\u8bc1 by shen_kang 20171222 end
#add for \u672a\u6fc0\u6d3b\u7528\u6237\u8fdb\u884c\u6fc0\u6d3b\u5904\u7406 by lianxgiao at 20171227 start
#\u83b7\u53d6\u7528\u6237\u7684\u6fc0\u6d3bflag
sql.getActiveFlag.001 = \
SELECT \
    ACTIVATE_FLG, \
    PWD, \
    DELETEFLAG, \
    USER_ID, \
    SYS_CD \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO = ? \
ORDER BY \
    CREDATE ASC
#\u66f4\u65b0\u7528\u6237\u7684\u6fc0\u6d3bflag
sql.updateActiveFlag.002 = \
UPDATE \
    USER_LOGIN \
SET \
    ACTIVATE_FLG = '1', \
    UPD_USER = 'iclub', \
    UPDATETIME = SYSDATE \
WHERE \
    TEL_NO = ?
#\u83b7\u53d6\u6fc0\u6d3b\u7528\u6237\u4ef6\u6570
sql.getActiveCount.002 = \
SELECT \
    COUNT(1) AS NUM \
FROM \
    USER_LOGIN \
WHERE \
    TEL_NO = ? \
AND ACTIVATE_FLG = '1'
#add for \u672a\u6fc0\u6d3b\u7528\u6237\u8fdb\u884c\u6fc0\u6d3b\u5904\u7406 by liangxiao at 20171227 end
#add for \u83b7\u53d6\u7528\u6237\u8f66\u9f84\u4fe1\u606f by lu_chuanchuan at 20180103 start
sql.selectDeliveryEndDateByVinNo.001 = \
SELECT \
	DELIVERYENDDATE \
FROM \
	TACT_ORDER_VEHICLE_BK \
WHERE \
	FRAMENO = ? \
	AND DELETEFLAG = '0' \
	AND CANCELDATE IS NULL \
ORDER BY \
	CONTRACTDATE DESC NULLS LAST
#add for \u83b7\u53d6\u7528\u6237\u8f66\u9f84\u4fe1\u606f by lu_chuanchuan at 20180103 end
#add for \u83b7\u53d6\u7528\u6237\u65b0\u8f66\u8ba2\u5355\u4fe1\u606f by lu_chuanchuan at 20180110 start
#\u6839\u636e\u7535\u8bdd\u67e5\u8be2\u7528\u6237\u65b0\u8f66\u8ba2\u5355\u5907\u4efd\u8868\u4e2d\u7684\u4fe1\u606f
sql.selectTactOrderVehicleBKByTel.001 = \
SELECT \
	TB.CONTRACTNO, \
	TO_CHAR(TB.INPUTDATE,'YYYY-MM-DD HH24:MI:SS') AS INPUTDATE, \
	TB.VEHICLENAME, \
	TB.DEALERCODE, \
	BD.DEALER_NAME, \
	TB.VHCGRADE, \
	TB.SFX, \
	TB.ORDERSTATE, \
	TB.DELETEFLAG, \
	TO_CHAR(TB.CONTRACTDATE,'YYYY-MM-DD HH24:MI:SS') AS CONTRACTDATE, \
	TB.FRAMENO, \
	TO_CHAR(TB.CANCELDATE,'YYYY-MM-DD HH24:MI:SS') AS CANCELDATE, \
	TO_CHAR(TB.DELIVERYENDDATE,'YYYY-MM-DD HH24:MI:SS') AS DELIVERYENDDATE \
FROM \
	TACT_ORDER_VEHICLE_BK TB \
LEFT JOIN \
	BASE_DEALER_INFO BD \
ON \
	TB.DEALERCODE = BD.DEALER_CODE \
WHERE \
	TB.CONTRACTDATE BETWEEN TO_DATE('2017-12-27','YYYY-MM-DD HH24:MI:SS') \
	AND TO_DATE('2018-1-31','YYYY-MM-DD HH24:MI:SS') \
	AND ? IN (TB.BUYERTEL1,TB.BUYERTEL2,TB.NOMINEETEL1,TB.NOMINEETEL2,TB.BUYERMOBIL1,TB.BUYERMOBIL2,TB.NOMINEEMOBIL1,TB.NOMINEEMOBIL2) \
	ORDER BY CONTRACTDATE
#add for \u83b7\u53d6\u7528\u6237\u65b0\u8f66\u8ba2\u5355\u4fe1\u606f by lu_chuanchuan at 20180110 end

#add for \u8f66\u53cb\u4f1a\u96e8\u522e\u7247\u6d3b\u52a8\u76f8\u5173 by shen_kang 20180112 start
#\u6839\u636e\u5377\u7801\u67e5\u8be2\u96e8\u522e\u7247\u4f18\u60e0\u5238
sql.selectWiperCoupon.001 = \
SELECT COUPON_ID \
FROM WIPER_BLADE_COUPON \
WHERE COUPON_ID = ? 

#\u63d2\u5165\u6ee4\u6e05\u5668\u4f18\u60e0\u5238
sql.insertNewCoupon.001 = \
INSERT INTO WX_COUPON_CONTENT( \
    COUPON_CONTENT_GUID, \
    CARD_ID, \
    COUPON_ID, \
    EVENT_ID, \
    OPEN_ID, \
    GZH_HASH, \
    DEALER_CODE, \
    COUPON_STATUS, \
    TYPE_ID, \
    COUPON_CONTENT, \
    COUPON_RULE, \
    COUPON_BEGIN, \
    COUPON_END, \
    SRV_ORDER_NO, \
    VIN_NO, \
    SFX_CODE, \
    CHECK_MODEL, \
    USE_STATUS, \
    CREATED_ON, \
    CREATED_BY, \
    MODIFY_ON, \
    MODIFY_BY, \
    UPDATE_COUNT, \
    DEL_FLAG, \
    USER_NAME, \
    USER_NUMBER, \
    UPDATE_ON, \
    COUPON_KBN, \
    COUPON_GROUP_ID, \
    THIRDPARTY_NAME, \
    PUBLISH_DATE, \
    COUPON_URL, \
    GET_DATE, \
    BIND_DATE, \
    WRITEOFFS_DATE, \
    COUPON_DETAIL, \
    DEALER_NAME, \
    DEALER_CODE_FROM, \
    COUPON_ENTITY_CONTENT, \
    COUPON_PWD, \
    COUPON_PHONE, \
    COUPON_INTRODUCTION, \
    COUPON_GRANT_TYPE, \
    FROM_APPLICATION ) \
VALUES( \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    TO_CHAR(SYSDATE,'yyyy-MM-dd HH24:MI:SS'),\
    ?, \
    TO_CHAR(SYSDATE,'yyyy-MM-dd HH24:MI:SS'),\
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    SYSDATE,\
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    REPLACE(?,'\uff1b','\uff1b'||CHR(10)||CHR(10)),\
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ?, \
    ? \
)

#\u67e5\u8be2\u5377\u7801\u662f\u5426\u91cd\u590d
sql.selectIsExistByNewCouponId.001 = \
SELECT \
    COUPON_ID \
FROM \
    WX_COUPON_CONTENT \
WHERE \
    COUPON_ID = ? 

#\u63d2\u5165\u9886\u5238\u8bb0\u5f55
sql.insertNewCouponRe.001 = \
INSERT INTO WIPER_COUPON_RECEIVE ( \
    SEQ_NO, \
    USE_COUPON_ID, \
    TEL_NO, \
    COUPON_ID, \
    SEND_STATUS, \
    CREATE_DATE, \
    CREATE_USER, \
    UPDATE_DATE, \
    UPDATE_USER \
) \
VALUES \
    ( \
        WIPER_COUPON_RECEIVE_SEQ.NEXTVAL, \
        ?, \
        ?, \
        ?, \
        ?, \
        SYSDATE, \
        ?, \
        SYSDATE, \
        ? \
    )

#\u6839\u636e\u4f18\u60e0\u5238\u7801\u67e5\u8be2\u7528\u6237\u4fe1\u606f
sql.selectUserLoginByCouponId.001 = \
SELECT \
    TEL_NO, \
    UID_GTMC \
FROM \
    USER_LOGIN US \
LEFT JOIN WX_COUPON_CONTENT WX ON US.UID_GTMC = WX.OPEN_ID \
WHERE \
    COUPON_ID = ?

#\u66f4\u65b0\u77ed\u4fe1\u53d1\u9001\u7ed3\u679c
sql.updateNewCouponRE.001 = \
UPDATE WIPER_COUPON_RECEIVE \
SET SEND_DATE = SYSDATE, \
    SEND_MESSAGE = ?, \
    SEND_STATUS = ?, \
    ERROR_MESSAGE = ?, \
    SEND_COUNT = SEND_COUNT+1, \
    UPDATE_DATE = SYSDATE, \
    UPDATE_USER = ? \
WHERE \
    USE_COUPON_ID = ? \
    AND COUPON_ID = ?

#\u67e5\u8be2\u8be5\u96e8\u522e\u7247\u4f18\u60e0\u5238\u662f\u5426\u5df2\u9886\u53d6\u8fc7\u5bf9\u5e94\u7684\u6ee4\u6e05\u5377
sql.selectIsReWiper.001 = \
SELECT \
    1 \
FROM \
    WIPER_COUPON_RECEIVE \
WHERE \
    USE_COUPON_ID = ? \
AND DEL_FLAG = '0'
#add for \u8f66\u53cb\u4f1a\u96e8\u522e\u7247\u6d3b\u52a8\u76f8\u5173 by shen_kang 20180112 end